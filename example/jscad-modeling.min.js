var jscadModeling=(()=>{var u=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var C=u((b7,js)=>{var Us=e=>e.reduce((t,r)=>Array.isArray(r)?t.concat(Us(r)):t.concat(r),[]);js.exports=Us});var Qs=u((E7,Ks)=>{var hg=C(),dg=(e,...t)=>{if(!Array.isArray(e))throw new Error("color must be an array");if(e.length<3)throw new Error("color must contain R, G and B values");if(e.length===3&&(e=[e[0],e[1],e[2],1]),t=hg(t),t.length===0)throw new Error("wrong number of arguments");let r=t.map(n=>(n.color=e,n));return r.length===1?r[0]:r};Ks.exports=dg});var kr=u((A7,Js)=>{var pg={black:[0/255,0/255,0/255],silver:[192/255,192/255,192/255],gray:[128/255,128/255,128/255],white:[255/255,255/255,255/255],maroon:[128/255,0/255,0/255],red:[255/255,0/255,0/255],purple:[128/255,0/255,128/255],fuchsia:[255/255,0/255,255/255],green:[0/255,128/255,0/255],lime:[0/255,255/255,0/255],olive:[128/255,128/255,0/255],yellow:[255/255,255/255,0/255],navy:[0/255,0/255,128/255],blue:[0/255,0/255,255/255],teal:[0/255,128/255,128/255],aqua:[0/255,255/255,255/255],aliceblue:[240/255,248/255,255/255],antiquewhite:[250/255,235/255,215/255],aquamarine:[127/255,255/255,212/255],azure:[240/255,255/255,255/255],beige:[245/255,245/255,220/255],bisque:[255/255,228/255,196/255],blanchedalmond:[255/255,235/255,205/255],blueviolet:[138/255,43/255,226/255],brown:[165/255,42/255,42/255],burlywood:[222/255,184/255,135/255],cadetblue:[95/255,158/255,160/255],chartreuse:[127/255,255/255,0/255],chocolate:[210/255,105/255,30/255],coral:[255/255,127/255,80/255],cornflowerblue:[100/255,149/255,237/255],cornsilk:[255/255,248/255,220/255],crimson:[220/255,20/255,60/255],cyan:[0/255,255/255,255/255],darkblue:[0/255,0/255,139/255],darkcyan:[0/255,139/255,139/255],darkgoldenrod:[184/255,134/255,11/255],darkgray:[169/255,169/255,169/255],darkgreen:[0/255,100/255,0/255],darkgrey:[169/255,169/255,169/255],darkkhaki:[189/255,183/255,107/255],darkmagenta:[139/255,0/255,139/255],darkolivegreen:[85/255,107/255,47/255],darkorange:[255/255,140/255,0/255],darkorchid:[153/255,50/255,204/255],darkred:[139/255,0/255,0/255],darksalmon:[233/255,150/255,122/255],darkseagreen:[143/255,188/255,143/255],darkslateblue:[72/255,61/255,139/255],darkslategray:[47/255,79/255,79/255],darkslategrey:[47/255,79/255,79/255],darkturquoise:[0/255,206/255,209/255],darkviolet:[148/255,0/255,211/255],deeppink:[255/255,20/255,147/255],deepskyblue:[0/255,191/255,255/255],dimgray:[105/255,105/255,105/255],dimgrey:[105/255,105/255,105/255],dodgerblue:[30/255,144/255,255/255],firebrick:[178/255,34/255,34/255],floralwhite:[255/255,250/255,240/255],forestgreen:[34/255,139/255,34/255],gainsboro:[220/255,220/255,220/255],ghostwhite:[248/255,248/255,255/255],gold:[255/255,215/255,0/255],goldenrod:[218/255,165/255,32/255],greenyellow:[173/255,255/255,47/255],grey:[128/255,128/255,128/255],honeydew:[240/255,255/255,240/255],hotpink:[255/255,105/255,180/255],indianred:[205/255,92/255,92/255],indigo:[75/255,0/255,130/255],ivory:[255/255,255/255,240/255],khaki:[240/255,230/255,140/255],lavender:[230/255,230/255,250/255],lavenderblush:[255/255,240/255,245/255],lawngreen:[124/255,252/255,0/255],lemonchiffon:[255/255,250/255,205/255],lightblue:[173/255,216/255,230/255],lightcoral:[240/255,128/255,128/255],lightcyan:[224/255,255/255,255/255],lightgoldenrodyellow:[250/255,250/255,210/255],lightgray:[211/255,211/255,211/255],lightgreen:[144/255,238/255,144/255],lightgrey:[211/255,211/255,211/255],lightpink:[255/255,182/255,193/255],lightsalmon:[255/255,160/255,122/255],lightseagreen:[32/255,178/255,170/255],lightskyblue:[135/255,206/255,250/255],lightslategray:[119/255,136/255,153/255],lightslategrey:[119/255,136/255,153/255],lightsteelblue:[176/255,196/255,222/255],lightyellow:[255/255,255/255,224/255],limegreen:[50/255,205/255,50/255],linen:[250/255,240/255,230/255],magenta:[255/255,0/255,255/255],mediumaquamarine:[102/255,205/255,170/255],mediumblue:[0/255,0/255,205/255],mediumorchid:[186/255,85/255,211/255],mediumpurple:[147/255,112/255,219/255],mediumseagreen:[60/255,179/255,113/255],mediumslateblue:[123/255,104/255,238/255],mediumspringgreen:[0/255,250/255,154/255],mediumturquoise:[72/255,209/255,204/255],mediumvioletred:[199/255,21/255,133/255],midnightblue:[25/255,25/255,112/255],mintcream:[245/255,255/255,250/255],mistyrose:[255/255,228/255,225/255],moccasin:[255/255,228/255,181/255],navajowhite:[255/255,222/255,173/255],oldlace:[253/255,245/255,230/255],olivedrab:[107/255,142/255,35/255],orange:[255/255,165/255,0/255],orangered:[255/255,69/255,0/255],orchid:[218/255,112/255,214/255],palegoldenrod:[238/255,232/255,170/255],palegreen:[152/255,251/255,152/255],paleturquoise:[175/255,238/255,238/255],palevioletred:[219/255,112/255,147/255],papayawhip:[255/255,239/255,213/255],peachpuff:[255/255,218/255,185/255],peru:[205/255,133/255,63/255],pink:[255/255,192/255,203/255],plum:[221/255,160/255,221/255],powderblue:[176/255,224/255,230/255],rosybrown:[188/255,143/255,143/255],royalblue:[65/255,105/255,225/255],saddlebrown:[139/255,69/255,19/255],salmon:[250/255,128/255,114/255],sandybrown:[244/255,164/255,96/255],seagreen:[46/255,139/255,87/255],seashell:[255/255,245/255,238/255],sienna:[160/255,82/255,45/255],skyblue:[135/255,206/255,235/255],slateblue:[106/255,90/255,205/255],slategray:[112/255,128/255,144/255],slategrey:[112/255,128/255,144/255],snow:[255/255,250/255,250/255],springgreen:[0/255,255/255,127/255],steelblue:[70/255,130/255,180/255],tan:[210/255,180/255,140/255],thistle:[216/255,191/255,216/255],tomato:[255/255,99/255,71/255],turquoise:[64/255,224/255,208/255],violet:[238/255,130/255,238/255],wheat:[245/255,222/255,179/255],whitesmoke:[245/255,245/255,245/255],yellowgreen:[154/255,205/255,50/255]};Js.exports=pg});var to=u((M7,eo)=>{var mg=kr(),gg=e=>mg[e.toLowerCase()];eo.exports=gg});var no=u((S7,ro)=>{var qg=e=>{if(e=e.replace("#",""),e.length<6)throw new Error("the given notation must contain 3 or more hex values");let t=parseInt(e.substring(0,2),16)/255,r=parseInt(e.substring(2,4),16)/255,n=parseInt(e.substring(4,6),16)/255;if(e.length>=8){let s=parseInt(e.substring(6,8),16)/255;return[t,r,n,s]}return[t,r,n]};ro.exports=qg});var Or=u((T7,so)=>{var vg=(e,t,r)=>(r<0&&(r+=1),r>1&&(r-=1),r<1/6?e+(t-e)*6*r:r<1/2?t:r<2/3?e+(t-e)*(2/3-r)*6:e);so.exports=vg});var io=u((k7,oo)=>{var xg=C(),Br=Or(),wg=(...e)=>{if(e=xg(e),e.length<3)throw new Error("values must contain H, S and L values");let t=e[0],r=e[1],n=e[2],s=n,o=n,i=n;if(r!==0){let c=n<.5?n*(1+r):n+r-n*r,a=2*n-c;s=Br(a,c,t+1/3),o=Br(a,c,t),i=Br(a,c,t-1/3)}if(e.length>3){let c=e[3];return[s,o,i,c]}return[s,o,i]};oo.exports=wg});var ao=u((O7,co)=>{var yg=C(),Pg=(...e)=>{if(e=yg(e),e.length<3)throw new Error("values must contain H, S and V values");let t=e[0],r=e[1],n=e[2],s=0,o=0,i=0,c=Math.floor(t*6),a=t*6-c,l=n*(1-r),h=n*(1-a*r),f=n*(1-(1-a)*r);switch(c%6){case 0:s=n,o=f,i=l;break;case 1:s=h,o=n,i=l;break;case 2:s=l,o=n,i=f;break;case 3:s=l,o=h,i=n;break;case 4:s=f,o=l,i=n;break;case 5:s=n,o=l,i=h;break}if(e.length>3){let d=e[3];return[s,o,i,d]}return[s,o,i]};co.exports=Pg});var uo=u((B7,lo)=>{var bg=C(),Eg=(...e)=>{if(e=bg(e),e.length<3)throw new Error("values must contain R, G and B values");let t=e[0]*255,r=e[1]*255,n=e[2]*255,s=`#${Number(16777216+t*65536+r*256+n).toString(16).substring(1,7)}`;return e.length>3&&(s=s+Number(e[3]*255).toString(16)),s};lo.exports=Eg});var ho=u((N7,fo)=>{var Ag=C(),Mg=(...e)=>{if(e=Ag(e),e.length<3)throw new Error("values must contain R, G and B values");let t=e[0],r=e[1],n=e[2],s=Math.max(t,r,n),o=Math.min(t,r,n),i,c,a=(s+o)/2;if(s===o)i=c=0;else{let l=s-o;switch(c=a>.5?l/(2-s-o):l/(s+o),s){case t:i=(r-n)/l+(r<n?6:0);break;case r:i=(n-t)/l+2;break;case n:i=(t-r)/l+4;break}i/=6}if(e.length>3){let l=e[3];return[i,c,a,l]}return[i,c,a]};fo.exports=Mg});var mo=u((R7,po)=>{var Sg=C(),Tg=(...e)=>{if(e=Sg(e),e.length<3)throw new Error("values must contain R, G and B values");let t=e[0],r=e[1],n=e[2],s=Math.max(t,r,n),o=Math.min(t,r,n),i,c=s,a=s-o,l=s===0?0:a/s;if(s===o)i=0;else{switch(s){case t:i=(r-n)/a+(r<n?6:0);break;case r:i=(n-t)/a+2;break;case n:i=(t-r)/a+4;break}i/=6}if(e.length>3){let h=e[3];return[i,l,c,h]}return[i,l,c]};po.exports=Tg});var qo=u((V7,go)=>{go.exports={colorize:Qs(),colorNameToRgb:to(),cssColors:kr(),hexToRgb:no(),hslToRgb:io(),hsvToRgb:ao(),hueToColorComponent:Or(),rgbToHex:uo(),rgbToHsl:ho(),rgbToHsv:mo()}});var wo=u((F7,xo)=>{var kg=e=>{if(!Array.isArray(e))throw new Error("Bezier points must be a valid array/");if(e.length<2)throw new Error("Bezier points must contain at least 2 values.");let t=Og(e);return{points:e,pointType:t,dimensions:t==="float_single"?0:e[0].length,permutations:vo(e.length-1),tangentPermutations:vo(e.length-2)}},Og=function(e){let t=null;return e.forEach(r=>{let n="";if(Number.isFinite(r))n="float_single";else if(Array.isArray(r))r.forEach(s=>{if(!Number.isFinite(s))throw new Error("Bezier point values must all be numbers.")}),n="float_"+r.length;else throw new Error("Bezier points must all be numbers or arrays of number.");if(t==null)t=n;else if(t!==n)throw new Error("Bezier points must be either all numbers or all arrays of numbers of the same size.")}),t},vo=function(e){let t=[];for(let r=0;r<=e;r++)t.push(Nr(e)/(Nr(r)*Nr(e-r)));return t},Nr=function(e){let t=1;for(let r=2;r<=e;r++)t*=r;return t};xo.exports=kg});var bo=u((C7,Po)=>{var Bg=(e,t)=>{if(e<0||e>1)throw new Error("Bezier valueAt() input must be between 0 and 1");if(t.pointType==="float_single")return yo(t,t.points,e);{let r=[];for(let n=0;n<t.dimensions;n++){let s=[];for(let o=0;o<t.points.length;o++)s.push(t.points[o][n]);r.push(yo(t,s,e))}return r}},yo=function(e,t,r){let n=t.length-1,s=0;for(let o=0;o<=n;o++)s+=e.permutations[o]*Math.pow(1-r,n-o)*Math.pow(r,o)*t[o];return s};Po.exports=Bg});var Mo=u((z7,Ao)=>{var Ng=(e,t)=>{if(e<0||e>1)throw new Error("Bezier tangentAt() input must be between 0 and 1");if(t.pointType==="float_single")return Eo(t,t.points,e);{let r=[];for(let n=0;n<t.dimensions;n++){let s=[];for(let o=0;o<t.points.length;o++)s.push(t.points[o][n]);r.push(Eo(t,s,e))}return r}},Eo=function(e,t,r){let n=t.length-1,s=0;for(let o=0;o<n;o++){let i=n*(t[o+1]-t[o]);s+=e.tangentPermutations[o]*Math.pow(1-r,n-1-o)*Math.pow(r,o)*i}return s};Ao.exports=Ng});var To=u((I7,So)=>{So.exports={create:wo(),valueAt:bo(),tangentAt:Mo()}});var Oo=u((G7,ko)=>{ko.exports={bezier:To()}});var No=u((D7,Bo)=>{var Rg=(e,t,r)=>(e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e[4]=t[4]+r[4],e[5]=t[5]+r[5],e[6]=t[6]+r[6],e[7]=t[7]+r[7],e[8]=t[8]+r[8],e[9]=t[9]+r[9],e[10]=t[10]+r[10],e[11]=t[11]+r[11],e[12]=t[12]+r[12],e[13]=t[13]+r[13],e[14]=t[14]+r[14],e[15]=t[15]+r[15],e);Bo.exports=Rg});var zt=u((X7,Ro)=>{var Vg=()=>[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];Ro.exports=Vg});var Fo=u((Y7,Vo)=>{var Fg=zt(),Cg=e=>{let t=Fg();return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t};Vo.exports=Cg});var Rr=u(($7,Co)=>{var zg=(e,t)=>(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e);Co.exports=zg});var Io=u((L7,zo)=>{var Ig=(e,t)=>{let r=t[0],n=t[1],s=t[2],o=t[3],i=t[4],c=t[5],a=t[6],l=t[7],h=t[8],f=t[9],d=t[10],q=t[11],g=t[12],p=t[13],m=t[14],v=t[15],x=r*c-n*i,y=r*a-s*i,b=r*l-o*i,w=n*a-s*c,E=n*l-o*c,P=s*l-o*a,k=h*p-f*g,A=h*m-d*g,M=h*v-q*g,S=f*m-d*p,T=f*v-q*p,F=d*v-q*m,N=x*F-y*T+b*S+w*M-E*A+P*k;return N?(N=1/N,e[0]=(c*F-a*T+l*S)*N,e[1]=(s*T-n*F-o*S)*N,e[2]=(p*P-m*E+v*w)*N,e[3]=(d*E-f*P-q*w)*N,e[4]=(a*M-i*F-l*A)*N,e[5]=(r*F-s*M+o*A)*N,e[6]=(m*b-g*P-v*y)*N,e[7]=(h*P-d*b+q*y)*N,e[8]=(i*T-c*M+l*k)*N,e[9]=(n*M-r*T-o*k)*N,e[10]=(g*E-p*b+v*x)*N,e[11]=(f*b-h*E-q*x)*N,e[12]=(c*A-i*S-a*k)*N,e[13]=(r*S-n*A+s*k)*N,e[14]=(p*y-g*w-m*x)*N,e[15]=(h*w-f*y+d*x)*N,e):null};zo.exports=Ig});var Do=u((Z7,Go)=>{var Gg=(e,t)=>e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]&&e[9]===t[9]&&e[10]===t[10]&&e[11]===t[11]&&e[12]===t[12]&&e[13]===t[13]&&e[14]===t[14]&&e[15]===t[15];Go.exports=Gg});var Vr=u((H7,Xo)=>{var Dg=e=>(e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e);Xo.exports=Dg});var Fr=u((_7,Yo)=>{var Xg=1e-6;Yo.exports={EPSILON:Xg}});var Cr=u((W7,$o)=>{var Yg=Vr(),{EPSILON:$g}=Fr(),Lg=(e,t,r)=>{let[n,s,o]=r,i=Math.sqrt(n*n+s*s+o*o);if(Math.abs(i)<$g)return Yg(e);i=1/i,n*=i,s*=i,o*=i;let c=Math.sin(t),a=Math.cos(t),l=1-a;return e[0]=n*n*l+a,e[1]=s*n*l+o*c,e[2]=o*n*l-s*c,e[3]=0,e[4]=n*s*l-o*c,e[5]=s*s*l+a,e[6]=o*s*l+n*c,e[7]=0,e[8]=n*o*l+s*c,e[9]=s*o*l-n*c,e[10]=o*o*l+a,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e};$o.exports=Lg});var Zo=u((U7,Lo)=>{var Zg=(e,t)=>(e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e);Lo.exports=Zg});var _o=u((j7,Ho)=>{var Hg=(e,t,r,n)=>{let s=Math.sin(t),o=Math.cos(t),i=Math.sin(r),c=Math.cos(r),a=Math.sin(n),l=Math.cos(n);return e[0]=c*o,e[1]=c*s,e[2]=-i,e[3]=0,e[4]=a*i*o-l*s,e[5]=l*o+a*i*s,e[6]=a*c,e[7]=0,e[8]=a*s+l*i*o,e[9]=l*i*s-a*o,e[10]=l*c,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e};Ho.exports=Hg});var Uo=u((K7,Wo)=>{var _g=(e,t)=>(e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e);Wo.exports=_g});var Ko=u((Q7,jo)=>{var Wg=zt(),Ug=(e,t,r,n,s,o,i,c,a,l,h,f,d,q,g,p)=>{let m=Wg();return m[0]=e,m[1]=t,m[2]=r,m[3]=n,m[4]=s,m[5]=o,m[6]=i,m[7]=c,m[8]=a,m[9]=l,m[10]=h,m[11]=f,m[12]=d,m[13]=q,m[14]=g,m[15]=p,m};jo.exports=Ug});var zr=u((J7,Qo)=>{var jg=(e,t)=>(e[0]=Math.abs(t[0]),e[1]=Math.abs(t[1]),e[2]=Math.abs(t[2]),e);Qo.exports=jg});var Ir=u((eM,Jo)=>{var Kg=(e,t,r)=>(e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e);Jo.exports=Kg});var Ye=u((tM,ei)=>{var Qg=(e,t)=>e[0]*t[0]+e[1]*t[1]+e[2]*t[2];ei.exports=Qg});var ri=u((rM,ti)=>{var Jg=Ye(),e5=(e,t)=>{let r=e[0],n=e[1],s=e[2],o=t[0],i=t[1],c=t[2],a=Math.sqrt(r*r+n*n+s*s),l=Math.sqrt(o*o+i*i+c*c),h=a*l,f=h&&Jg(e,t)/h;return Math.acos(Math.min(Math.max(f,-1),1))};ti.exports=e5});var ut=u((nM,ni)=>{var t5=()=>[0,0,0];ni.exports=t5});var oi=u((sM,si)=>{var r5=ut(),n5=e=>{let t=r5();return t[0]=e[0],t[1]=e[1],t[2]=e[2],t};si.exports=n5});var Gr=u((oM,ii)=>{var s5=(e,t)=>(e[0]=t[0],e[1]=t[1],e[2]=t[2],e);ii.exports=s5});var Te=u((iM,ci)=>{var o5=(e,t,r)=>{let n=t[0],s=t[1],o=t[2],i=r[0],c=r[1],a=r[2];return e[0]=s*a-o*c,e[1]=o*i-n*a,e[2]=n*c-s*i,e};ci.exports=o5});var Dr=u((cM,ai)=>{var i5=(e,t)=>{let r=t[0]-e[0],n=t[1]-e[1],s=t[2]-e[2];return Math.hypot(r,n,s)};ai.exports=i5});var ui=u((aM,li)=>{var c5=(e,t,r)=>(e[0]=t[0]/r[0],e[1]=t[1]/r[1],e[2]=t[2]/r[2],e);li.exports=c5});var hi=u((lM,fi)=>{var a5=(e,t)=>e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2];fi.exports=a5});var pi=u((uM,di)=>{var l5=(e,t)=>(e[0]=t,e[1]=t,e[2]=t,e);di.exports=l5});var Xr=u((fM,mi)=>{var u5=ut(),f5=(e,t,r)=>{let n=u5();return n[0]=e,n[1]=t,n[2]=r,n};mi.exports=f5});var qi=u((hM,gi)=>{var h5=(e,t,r=0)=>(e[0]=t[0],e[1]=t[1],e[2]=r,e);gi.exports=h5});var Yr=u((dM,vi)=>{var d5=e=>{let t=e[0],r=e[1],n=e[2];return Math.hypot(t,r,n)};vi.exports=d5});var wi=u((pM,xi)=>{var p5=(e,t,r,n)=>(e[0]=t[0]+n*(r[0]-t[0]),e[1]=t[1]+n*(r[1]-t[1]),e[2]=t[2]+n*(r[2]-t[2]),e);xi.exports=p5});var $r=u((mM,yi)=>{var m5=(e,t,r)=>(e[0]=Math.max(t[0],r[0]),e[1]=Math.max(t[1],r[1]),e[2]=Math.max(t[2],r[2]),e);yi.exports=m5});var Lr=u((gM,Pi)=>{var g5=(e,t,r)=>(e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e[2]=Math.min(t[2],r[2]),e);Pi.exports=g5});var Ei=u((qM,bi)=>{var q5=(e,t,r)=>(e[0]=t[0]*r[0],e[1]=t[1]*r[1],e[2]=t[2]*r[2],e);bi.exports=q5});var Mi=u((vM,Ai)=>{var v5=(e,t)=>(e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e);Ai.exports=v5});var It=u((xM,Si)=>{var x5=(e,t)=>{let r=t[0],n=t[1],s=t[2],o=r*r+n*n+s*s;return o>0&&(o=1/Math.sqrt(o)),e[0]=r*o,e[1]=n*o,e[2]=s*o,e};Si.exports=x5});var ki=u((wM,Ti)=>{var w5=zr(),y5=ut(),P5=Te(),b5=(e,t)=>{let r=w5(y5(),t),n=0+(r[0]<r[1]&&r[0]<r[2]),s=0+(r[1]<=r[0]&&r[1]<r[2]),o=0+(r[2]<=r[0]&&r[2]<=r[1]);return P5(e,t,[n,s,o])};Ti.exports=b5});var Bi=u((yM,Oi)=>{var E5=(e,t,r,n)=>{let s=[],o=[];return s[0]=t[0]-r[0],s[1]=t[1]-r[1],s[2]=t[2]-r[2],o[0]=s[0],o[1]=s[1]*Math.cos(n)-s[2]*Math.sin(n),o[2]=s[1]*Math.sin(n)+s[2]*Math.cos(n),e[0]=o[0]+r[0],e[1]=o[1]+r[1],e[2]=o[2]+r[2],e};Oi.exports=E5});var Ri=u((PM,Ni)=>{var A5=(e,t,r,n)=>{let s=[],o=[];return s[0]=t[0]-r[0],s[1]=t[1]-r[1],s[2]=t[2]-r[2],o[0]=s[2]*Math.sin(n)+s[0]*Math.cos(n),o[1]=s[1],o[2]=s[2]*Math.cos(n)-s[0]*Math.sin(n),e[0]=o[0]+r[0],e[1]=o[1]+r[1],e[2]=o[2]+r[2],e};Ni.exports=A5});var Fi=u((bM,Vi)=>{var M5=(e,t,r,n)=>{let s=[],o=[];return s[0]=t[0]-r[0],s[1]=t[1]-r[1],o[0]=s[0]*Math.cos(n)-s[1]*Math.sin(n),o[1]=s[0]*Math.sin(n)+s[1]*Math.cos(n),e[0]=o[0]+r[0],e[1]=o[1]+r[1],e[2]=t[2],e};Vi.exports=M5});var Zr=u((EM,Ci)=>{var S5=(e,t,r)=>(e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e);Ci.exports=S5});var Ii=u((AM,zi)=>{var T5=(e,t,r)=>(e[0]=Math.round(t[0]/r)*r+0,e[1]=Math.round(t[1]/r)*r+0,e[2]=Math.round(t[2]/r)*r+0,e);zi.exports=T5});var Hr=u((MM,Gi)=>{var k5=(e,t)=>{let r=t[0]-e[0],n=t[1]-e[1],s=t[2]-e[2];return r*r+n*n+s*s};Gi.exports=k5});var _r=u((SM,Di)=>{var O5=e=>{let t=e[0],r=e[1],n=e[2];return t*t+r*r+n*n};Di.exports=O5});var ft=u((TM,Xi)=>{var B5=(e,t,r)=>(e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e);Xi.exports=B5});var $i=u((kM,Yi)=>{var N5=e=>`[${e[0].toFixed(7)}, ${e[1].toFixed(7)}, ${e[2].toFixed(7)}]`;Yi.exports=N5});var Zi=u((OM,Li)=>{var R5=(e,t,r)=>{let n=t[0],s=t[1],o=t[2],i=r[3]*n+r[7]*s+r[11]*o+r[15];return i=i||1,e[0]=(r[0]*n+r[4]*s+r[8]*o+r[12])/i,e[1]=(r[1]*n+r[5]*s+r[9]*o+r[13])/i,e[2]=(r[2]*n+r[6]*s+r[10]*o+r[14])/i,e};Li.exports=R5});var R=u((BM,Hi)=>{Hi.exports={abs:zr(),add:Ir(),angle:ri(),clone:oi(),copy:Gr(),create:ut(),cross:Te(),distance:Dr(),divide:ui(),dot:Ye(),equals:hi(),fromScalar:pi(),fromValues:Xr(),fromVec2:qi(),length:Yr(),lerp:wi(),max:$r(),min:Lr(),multiply:Ei(),negate:Mi(),normalize:It(),orthogonal:ki(),rotateX:Bi(),rotateY:Ri(),rotateZ:Fi(),scale:Zr(),snap:Ii(),squaredDistance:Hr(),squaredLength:_r(),subtract:ft(),toString:$i(),transform:Zi()}});var Wi=u((NM,_i)=>{var Pe=R(),V5=Cr(),F5=(e,t,r)=>{let n=Pe.normalize(Pe.create(),t),s=Pe.normalize(Pe.create(),r),o=Pe.cross(Pe.create(),s,n),i=Pe.dot(s,n);if(i===-1)return V5(e,Math.PI,Pe.orthogonal(o,n));let c=1/(1+i);return e[0]=o[0]*o[0]*c+i,e[1]=o[1]*o[0]*c-o[2],e[2]=o[2]*o[0]*c+o[1],e[3]=0,e[4]=o[0]*o[1]*c+o[2],e[5]=o[1]*o[1]*c+i,e[6]=o[2]*o[1]*c-o[0],e[7]=0,e[8]=o[0]*o[2]*c-o[1],e[9]=o[1]*o[2]*c+o[0],e[10]=o[2]*o[2]*c+i,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e};_i.exports=F5});var ji=u((RM,Ui)=>{var C5=(e,t)=>{let r=Math.sin(t),n=Math.cos(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=n,e[6]=r,e[7]=0,e[8]=0,e[9]=-r,e[10]=n,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e};Ui.exports=C5});var Qi=u((VM,Ki)=>{var z5=(e,t)=>{let r=Math.sin(t),n=Math.cos(t);return e[0]=n,e[1]=0,e[2]=-r,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=r,e[9]=0,e[10]=n,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e};Ki.exports=z5});var ec=u((FM,Ji)=>{var I5=(e,t)=>{let r=Math.sin(t),n=Math.cos(t);return e[0]=n,e[1]=r,e[2]=0,e[3]=0,e[4]=-r,e[5]=n,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e};Ji.exports=I5});var rc=u((CM,tc)=>{var G5=e=>e[0]===1&&e[1]===0&&e[2]===0&&e[3]===0&&e[4]===0&&e[5]===1&&e[6]===0&&e[7]===0&&e[8]===0&&e[9]===0&&e[10]===1&&e[11]===0&&e[12]===0&&e[13]===0&&e[14]===0&&e[15]===1;tc.exports=G5});var sc=u((zM,nc)=>{var{EPSILON:D5}=Fr(),X5=e=>de(e[1])&&de(e[2])&&de(e[3])&&de(e[4])&&de(e[6])&&de(e[7])&&de(e[8])&&de(e[9])&&de(e[11])&&e[15]===1,de=e=>Math.abs(e)<D5;nc.exports=X5});var ic=u((IM,oc)=>{var Y5=Te(),$5=Ye(),Wr=Xr(),L5=e=>{let t=Wr(e[0],e[4],e[8]),r=Wr(e[1],e[5],e[9]),n=Wr(e[2],e[6],e[10]);return $5(Y5(t,t,r),n)<0};oc.exports=L5});var ac=u((GM,cc)=>{var Z5=(e,t)=>{let[r,n,s,o]=t;return e[0]=1-2*r*r,e[1]=-2*n*r,e[2]=-2*s*r,e[3]=0,e[4]=-2*r*n,e[5]=1-2*n*n,e[6]=-2*s*n,e[7]=0,e[8]=-2*r*s,e[9]=-2*n*s,e[10]=1-2*s*s,e[11]=0,e[12]=2*r*o,e[13]=2*n*o,e[14]=2*s*o,e[15]=1,e};cc.exports=Z5});var uc=u((DM,lc)=>{var H5=(e,t,r)=>{let n=t[0],s=t[1],o=t[2],i=t[3],c=t[4],a=t[5],l=t[6],h=t[7],f=t[8],d=t[9],q=t[10],g=t[11],p=t[12],m=t[13],v=t[14],x=t[15],y=r[0],b=r[1],w=r[2],E=r[3];return e[0]=y*n+b*c+w*f+E*p,e[1]=y*s+b*a+w*d+E*m,e[2]=y*o+b*l+w*q+E*v,e[3]=y*i+b*h+w*g+E*x,y=r[4],b=r[5],w=r[6],E=r[7],e[4]=y*n+b*c+w*f+E*p,e[5]=y*s+b*a+w*d+E*m,e[6]=y*o+b*l+w*q+E*v,e[7]=y*i+b*h+w*g+E*x,y=r[8],b=r[9],w=r[10],E=r[11],e[8]=y*n+b*c+w*f+E*p,e[9]=y*s+b*a+w*d+E*m,e[10]=y*o+b*l+w*q+E*v,e[11]=y*i+b*h+w*g+E*x,y=r[12],b=r[13],w=r[14],E=r[15],e[12]=y*n+b*c+w*f+E*p,e[13]=y*s+b*a+w*d+E*m,e[14]=y*o+b*l+w*q+E*v,e[15]=y*i+b*h+w*g+E*x,e};lc.exports=H5});var hc=u((XM,fc)=>{var _5=Rr(),W5=(e,t,r,n)=>{let[s,o,i]=n,c=Math.sqrt(s*s+o*o+i*i);if(Math.abs(c)<1e-6)return _5(e,t);c=1/c,s*=c,o*=c,i*=c;let a=Math.sin(r),l=Math.cos(r),h=1-l,f=t[0],d=t[1],q=t[2],g=t[3],p=t[4],m=t[5],v=t[6],x=t[7],y=t[8],b=t[9],w=t[10],E=t[11],P=s*s*h+l,k=o*s*h+i*a,A=i*s*h-o*a,M=s*o*h-i*a,S=o*o*h+l,T=i*o*h+s*a,F=s*i*h+o*a,N=o*i*h-s*a,$=i*i*h+l;return e[0]=f*P+p*k+y*A,e[1]=d*P+m*k+b*A,e[2]=q*P+v*k+w*A,e[3]=g*P+x*k+E*A,e[4]=f*M+p*S+y*T,e[5]=d*M+m*S+b*T,e[6]=q*M+v*S+w*T,e[7]=g*M+x*S+E*T,e[8]=f*F+p*N+y*$,e[9]=d*F+m*N+b*$,e[10]=q*F+v*N+w*$,e[11]=g*F+x*N+E*$,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e};fc.exports=W5});var pc=u((YM,dc)=>{var U5=(e,t,r)=>{let n=Math.sin(r),s=Math.cos(r),o=t[4],i=t[5],c=t[6],a=t[7],l=t[8],h=t[9],f=t[10],d=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=o*s+l*n,e[5]=i*s+h*n,e[6]=c*s+f*n,e[7]=a*s+d*n,e[8]=l*s-o*n,e[9]=h*s-i*n,e[10]=f*s-c*n,e[11]=d*s-a*n,e};dc.exports=U5});var gc=u(($M,mc)=>{var j5=(e,t,r)=>{let n=Math.sin(r),s=Math.cos(r),o=t[0],i=t[1],c=t[2],a=t[3],l=t[8],h=t[9],f=t[10],d=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*s-l*n,e[1]=i*s-h*n,e[2]=c*s-f*n,e[3]=a*s-d*n,e[8]=o*n+l*s,e[9]=i*n+h*s,e[10]=c*n+f*s,e[11]=a*n+d*s,e};mc.exports=j5});var vc=u((LM,qc)=>{var K5=(e,t,r)=>{let n=Math.sin(r),s=Math.cos(r),o=t[0],i=t[1],c=t[2],a=t[3],l=t[4],h=t[5],f=t[6],d=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*s+l*n,e[1]=i*s+h*n,e[2]=c*s+f*n,e[3]=a*s+d*n,e[4]=l*s-o*n,e[5]=h*s-i*n,e[6]=f*s-c*n,e[7]=d*s-a*n,e};qc.exports=K5});var wc=u((ZM,xc)=>{var Q5=(e,t,r)=>{let n=r[0],s=r[1],o=r[2];return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*s,e[5]=t[5]*s,e[6]=t[6]*s,e[7]=t[7]*s,e[8]=t[8]*o,e[9]=t[9]*o,e[10]=t[10]*o,e[11]=t[11]*o,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e};xc.exports=Q5});var Pc=u((HM,yc)=>{var J5=(e,t,r)=>(e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e[3]=t[3]-r[3],e[4]=t[4]-r[4],e[5]=t[5]-r[5],e[6]=t[6]-r[6],e[7]=t[7]-r[7],e[8]=t[8]-r[8],e[9]=t[9]-r[9],e[10]=t[10]-r[10],e[11]=t[11]-r[11],e[12]=t[12]-r[12],e[13]=t[13]-r[13],e[14]=t[14]-r[14],e[15]=t[15]-r[15],e);yc.exports=J5});var Ec=u((_M,bc)=>{var eq=e=>`[${e[0].toFixed(7)}, ${e[1].toFixed(7)}, ${e[2].toFixed(7)}, ${e[3].toFixed(7)}, ${e[4].toFixed(7)}, ${e[5].toFixed(7)}, ${e[6].toFixed(7)}, ${e[7].toFixed(7)}, ${e[8].toFixed(7)}, ${e[9].toFixed(7)}, ${e[10].toFixed(7)}, ${e[11].toFixed(7)}, ${e[12].toFixed(7)}, ${e[13].toFixed(7)}, ${e[14].toFixed(7)}, ${e[15].toFixed(7)}]`;bc.exports=eq});var Mc=u((WM,Ac)=>{var tq=(e,t,r)=>{let n=r[0],s=r[1],o=r[2],i,c,a,l,h,f,d,q,g,p,m,v;return t===e?(e[12]=t[0]*n+t[4]*s+t[8]*o+t[12],e[13]=t[1]*n+t[5]*s+t[9]*o+t[13],e[14]=t[2]*n+t[6]*s+t[10]*o+t[14],e[15]=t[3]*n+t[7]*s+t[11]*o+t[15]):(i=t[0],c=t[1],a=t[2],l=t[3],h=t[4],f=t[5],d=t[6],q=t[7],g=t[8],p=t[9],m=t[10],v=t[11],e[0]=i,e[1]=c,e[2]=a,e[3]=l,e[4]=h,e[5]=f,e[6]=d,e[7]=q,e[8]=g,e[9]=p,e[10]=m,e[11]=v,e[12]=i*n+h*s+g*o+t[12],e[13]=c*n+f*s+p*o+t[13],e[14]=a*n+d*s+m*o+t[14],e[15]=l*n+q*s+v*o+t[15]),e};Ac.exports=tq});var X=u((UM,Sc)=>{Sc.exports={add:No(),clone:Fo(),copy:Rr(),create:zt(),invert:Io(),equals:Do(),fromRotation:Cr(),fromScaling:Zo(),fromTaitBryanRotation:_o(),fromTranslation:Uo(),fromValues:Ko(),fromVectorRotation:Wi(),fromXRotation:ji(),fromYRotation:Qi(),fromZRotation:ec(),identity:Vr(),isIdentity:rc(),isOnlyTransformScale:sc(),isMirroring:ic(),mirrorByPlane:ac(),multiply:uc(),rotate:hc(),rotateX:pc(),rotateY:gc(),rotateZ:vc(),scale:wc(),subtract:Pc(),toString:Ec(),translate:Mc()}});var kc=u((jM,Tc)=>{var rq=(e,t)=>(e[0]=Math.abs(t[0]),e[1]=Math.abs(t[1]),e);Tc.exports=rq});var Bc=u((KM,Oc)=>{var nq=(e,t,r)=>(e[0]=t[0]+r[0],e[1]=t[1]+r[1],e);Oc.exports=nq});var Gt=u((QM,Nc)=>{var sq=e=>Math.atan2(e[1],e[0]);Nc.exports=sq});var Vc=u((JM,Rc)=>{Rc.exports=Gt()});var Cc=u((eS,Fc)=>{var oq=Gt(),iq=e=>oq(e)*57.29577951308232;Fc.exports=iq});var ht=u((tS,zc)=>{var cq=()=>[0,0];zc.exports=cq});var Gc=u((rS,Ic)=>{var aq=ht(),lq=e=>{let t=aq();return t[0]=e[0],t[1]=e[1],t};Ic.exports=lq});var Xc=u((nS,Dc)=>{var uq=(e,t)=>(e[0]=t[0],e[1]=t[1],e);Dc.exports=uq});var $c=u((sS,Yc)=>{var fq=(e,t,r)=>(e[0]=0,e[1]=0,e[2]=t[0]*r[1]-t[1]*r[0],e);Yc.exports=fq});var Zc=u((oS,Lc)=>{var hq=(e,t)=>{let r=t[0]-e[0],n=t[1]-e[1];return Math.hypot(r,n)};Lc.exports=hq});var _c=u((iS,Hc)=>{var dq=(e,t,r)=>(e[0]=t[0]/r[0],e[1]=t[1]/r[1],e);Hc.exports=dq});var Uc=u((cS,Wc)=>{var pq=(e,t)=>e[0]*t[0]+e[1]*t[1];Wc.exports=pq});var Kc=u((aS,jc)=>{var mq=(e,t)=>e[0]===t[0]&&e[1]===t[1];jc.exports=mq});var Ur=u((lS,Qc)=>{var gq=(e,t)=>(e[0]=Math.cos(t),e[1]=Math.sin(t),e);Qc.exports=gq});var ea=u((uS,Jc)=>{var qq=Ur(),vq=(e,t)=>qq(e,Math.PI*t/180);Jc.exports=vq});var ra=u((fS,ta)=>{var xq=(e,t)=>(e[0]=t,e[1]=t,e);ta.exports=xq});var sa=u((hS,na)=>{var wq=ht(),yq=(e,t)=>{let r=wq();return r[0]=e,r[1]=t,r};na.exports=yq});var ia=u((dS,oa)=>{var Pq=e=>Math.hypot(e[0],e[1]);oa.exports=Pq});var aa=u((pS,ca)=>{var bq=(e,t,r,n)=>{let s=t[0],o=t[1];return e[0]=s+n*(r[0]-s),e[1]=o+n*(r[1]-o),e};ca.exports=bq});var ua=u((mS,la)=>{var Eq=(e,t,r)=>(e[0]=Math.max(t[0],r[0]),e[1]=Math.max(t[1],r[1]),e);la.exports=Eq});var ha=u((gS,fa)=>{var Aq=(e,t,r)=>(e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e);fa.exports=Aq});var pa=u((qS,da)=>{var Mq=(e,t,r)=>(e[0]=t[0]*r[0],e[1]=t[1]*r[1],e);da.exports=Mq});var ga=u((vS,ma)=>{var Sq=(e,t)=>(e[0]=-t[0],e[1]=-t[1],e);ma.exports=Sq});var jr=u((xS,qa)=>{var Tq=(e,t,r,n)=>{let s=t[0]-r[0],o=t[1]-r[1],i=Math.cos(n),c=Math.sin(n);return e[0]=s*i-o*c+r[0],e[1]=s*c+o*i+r[1],e};qa.exports=Tq});var xa=u((wS,va)=>{var kq=ht(),Oq=jr(),Bq=(e,t)=>Oq(e,t,kq(),Math.PI/2);va.exports=Bq});var ya=u((yS,wa)=>{var Nq=(e,t)=>{let r=t[0],n=t[1],s=r*r+n*n;return s>0&&(s=1/Math.sqrt(s)),e[0]=r*s,e[1]=n*s,e};wa.exports=Nq});var ba=u((PS,Pa)=>{var Rq=(e,t,r)=>(e[0]=t[0]*r,e[1]=t[1]*r,e);Pa.exports=Rq});var Aa=u((bS,Ea)=>{var Vq=(e,t,r)=>(e[0]=Math.round(t[0]/r)*r+0,e[1]=Math.round(t[1]/r)*r+0,e);Ea.exports=Vq});var Sa=u((ES,Ma)=>{var Fq=(e,t)=>{let r=t[0]-e[0],n=t[1]-e[1];return r*r+n*n};Ma.exports=Fq});var ka=u((AS,Ta)=>{var Cq=e=>{let t=e[0],r=e[1];return t*t+r*r};Ta.exports=Cq});var Ba=u((MS,Oa)=>{var zq=(e,t,r)=>(e[0]=t[0]-r[0],e[1]=t[1]-r[1],e);Oa.exports=zq});var Ra=u((SS,Na)=>{var Iq=e=>`[${e[0].toFixed(7)}, ${e[1].toFixed(7)}]`;Na.exports=Iq});var Fa=u((TS,Va)=>{var Gq=(e,t,r)=>{let n=t[0],s=t[1];return e[0]=r[0]*n+r[4]*s+r[12],e[1]=r[1]*n+r[5]*s+r[13],e};Va.exports=Gq});var I=u((kS,Ca)=>{Ca.exports={abs:kc(),add:Bc(),angle:Vc(),angleDegrees:Cc(),angleRadians:Gt(),clone:Gc(),copy:Xc(),create:ht(),cross:$c(),distance:Zc(),divide:_c(),dot:Uc(),equals:Kc(),fromAngleDegrees:ea(),fromAngleRadians:Ur(),fromScalar:ra(),fromValues:sa(),length:ia(),lerp:aa(),max:ua(),min:ha(),multiply:pa(),negate:ga(),normal:xa(),normalize:ya(),rotate:jr(),scale:ba(),snap:Aa(),squaredDistance:Sa(),squaredLength:ka(),subtract:Ba(),toString:Ra(),transform:Fa()}});var ke=u((OS,za)=>{var Dq=X(),Xq=e=>(e===void 0&&(e=[]),{sides:e,transforms:Dq.create()});za.exports=Xq});var Da=u((BS,Ga)=>{var Yq=X(),Ia=I(),$q=ke(),Lq=e=>{let t=$q();return t.sides=e.sides.map(r=>[Ia.clone(r[0]),Ia.clone(r[1])]),t.transforms=Yq.clone(e.transforms),t};Ga.exports=Lq});var Ya=u((NS,Xa)=>{var Kr=I(),Zq=ke(),Hq=e=>{if(!Array.isArray(e))throw new Error("the given points must be an array");let t=e.length;if(t<3)throw new Error("the given points must define a closed geometry with three or more points");Kr.equals(e[0],e[t-1])&&--t;let r=[],n=e[t-1];for(let s=0;s<t;s++){let o=e[s];r.push([Kr.clone(n),Kr.clone(o)]),n=o}return Zq(r)};Xa.exports=Hq});var Za=u((RS,La)=>{var _q=X(),$a=I(),Wq=ke(),Uq=e=>{if(e[0]!==0)throw new Error("invalid compact binary data");let t=Wq();t.transforms=_q.clone(e.slice(1,17));for(let r=21;r<e.length;r+=4){let n=$a.fromValues(e[r+0],e[r+1]),s=$a.fromValues(e[r+2],e[r+3]);t.sides.push([n,s])}return e[17]>=0&&(t.color=[e[17],e[18],e[19],e[20]]),t};La.exports=Uq});var _a=u((VS,Ha)=>{var jq=e=>!!(e&&typeof e=="object"&&"sides"in e&&"transforms"in e&&Array.isArray(e.sides)&&"length"in e.transforms);Ha.exports=jq});var ja=u((FS,Ua)=>{var Wa=X(),Dt=I(),Kq=e=>(Wa.isIdentity(e.transforms)||(e.sides=e.sides.map(t=>{let r=Dt.transform(Dt.create(),t[0],e.transforms),n=Dt.transform(Dt.create(),t[1],e.transforms);return[r,n]}),e.transforms=Wa.create()),e);Ua.exports=Kq});var $e=u((CS,Ka)=>{var Qq=ja(),Jq=e=>Qq(e).sides;Ka.exports=Jq});var Ja=u((zS,Qa)=>{var e3=ke(),t3=$e(),r3=e=>{let r=t3(e).map(n=>[n[1],n[0]]);return r.reverse(),e3(r)};Qa.exports=r3});var tl=u((IS,el)=>{var Le=I(),n3=$e(),s3=e=>{let t=[],r=s=>{let o=t.findIndex(i=>Le.equals(i,s));return o<0?(t.push(s),s):t[o]},n=[];return e.forEach(s=>{n.push([r(s[0]),r(s[1])])}),n},o3=e=>{let t=new Map;s3(n3(e)).forEach(s=>{t.has(s[0])||t.set(s[0],[]),t.get(s[0]).push(s)});let n=[];for(;;){let s;for(let[a,l]of t){if(s=l.shift(),!s){t.delete(a);continue}break}if(s===void 0)break;let o=[],i=s[0],c=Le.create();for(;;){o.push(s[0]);let a=s[1];if(a===i)break;let l=t.get(a);if(!l)throw new Error("the given geometry is not closed. verify proper construction");let h=-1;if(l.length===1)h=0;else{let d,q=Le.angleDegrees(Le.subtract(c,s[1],s[0]));for(let g=0;g<l.length;g++){let p=l[g],v=Le.angleDegrees(Le.subtract(c,p[1],p[0]))-q;v<-180&&(v+=360),v>=180&&(v-=360),(h<0||v>d)&&(h=g,d=v)}}let f=l[h];l.splice(h,1),l.length===0&&t.delete(a),s=f}o.length>0&&o.push(o.shift()),n.push(o)}return t.clear(),n};el.exports=o3});var nl=u((GS,rl)=>{var i3=$e(),c3=e=>{let r=i3(e).map(n=>n[0]);return r.length>0&&r.push(r.shift()),r};rl.exports=c3});var il=u((DS,ol)=>{var sl=I(),a3=$e(),l3=e=>{let t=a3(e),r="geom2 ("+t.length+` sides):
[
`;return t.forEach(n=>{r+="  ["+sl.toString(n[0])+", "+sl.toString(n[1])+`]
`}),r+=`]
`,r};ol.exports=l3});var al=u((XS,cl)=>{var u3=e=>{let t=e.sides,r=e.transforms,n=[-1,-1,-1,-1];e.color&&(n=e.color);let s=new Float32Array(1+16+4+t.length*4);s[0]=0,s[1]=r[0],s[2]=r[1],s[3]=r[2],s[4]=r[3],s[5]=r[4],s[6]=r[5],s[7]=r[6],s[8]=r[7],s[9]=r[8],s[10]=r[9],s[11]=r[10],s[12]=r[11],s[13]=r[12],s[14]=r[13],s[15]=r[14],s[16]=r[15],s[17]=n[0],s[18]=n[1],s[19]=n[2],s[20]=n[3];for(let o=0;o<t.length;o++){let i=o*4+21,c=t[o][0],a=t[o][1];s[i+0]=c[0],s[i+1]=c[1],s[i+2]=a[0],s[i+3]=a[1]}return s};cl.exports=u3});var fl=u(($S,ul)=>{var ll=X(),YS=ke(),f3=(e,t)=>{let r=ll.multiply(ll.create(),e,t.transforms);return Object.assign({},t,{transforms:r})};ul.exports=f3});var G=u((LS,hl)=>{hl.exports={clone:Da(),create:ke(),fromPoints:Ya(),fromCompactBinary:Za(),isA:_a(),reverse:Ja(),toOutlines:tl(),toPoints:nl(),toSides:$e(),toString:il(),toCompactBinary:al(),transform:fl()}});var Oe=u((ZS,dl)=>{var h3=e=>((e===void 0||e.length<3)&&(e=[]),{vertices:e});dl.exports=h3});var ml=u((HS,pl)=>{var d3=Oe(),p3=R(),m3=(...e)=>{let t,r;return e.length===1?(t=d3(),r=e[0]):(t=e[0],r=e[1]),t.vertices=r.vertices.map(n=>p3.clone(n)),t};pl.exports=m3});var ql=u((_S,gl)=>{var g3=R(),q3=Oe(),v3=e=>{let t=e.map(r=>g3.clone(r));return q3(t)};gl.exports=v3});var xl=u((WS,vl)=>{var x3=Oe(),w3=(e,t)=>{let r=x3(e);return r.plane=t,r};vl.exports=w3});var yl=u((US,wl)=>{var y3=Oe(),P3=e=>{let t=e.vertices.slice().reverse();return y3(t)};wl.exports=P3});var bl=u((jS,Pl)=>{var b3=e=>!!(e&&typeof e=="object"&&"vertices"in e&&Array.isArray(e.vertices));Pl.exports=b3});var dt=u((KS,El)=>{var E3=()=>[0,0,0,0];El.exports=E3});var Qr=u((QS,Al)=>{var A3=dt(),M3=e=>{let t=A3();return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t};Al.exports=M3});var Jr=u((JS,Ml)=>{var S3=(e,t)=>(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e);Ml.exports=S3});var en=u((e9,Sl)=>{var T3=(e,t)=>e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3];Sl.exports=T3});var tn=u((t9,Tl)=>{var k3=(e,t)=>(e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-t[3],e);Tl.exports=k3});var Ol=u((r9,kl)=>{var rn=R(),O3=(e,t,r)=>{let n=rn.normalize(rn.create(),t),s=rn.dot(r,n);return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=s,e};kl.exports=O3});var nn=u((n9,Bl)=>{var B3=dt(),N3=(e,t,r,n)=>{let s=B3();return s[0]=e,s[1]=t,s[2]=r,s[3]=n,s};Bl.exports=N3});var sn=u((s9,Nl)=>{var Be=R(),R3=(e,t,r,n)=>{let s=Be.subtract(Be.create(),r,t),o=Be.subtract(Be.create(),n,t);Be.cross(s,s,o),Be.normalize(s,s);let i=Be.dot(s,t);return e[0]=s[0],e[1]=s[1],e[2]=s[2],e[3]=i,e};Nl.exports=R3});var W=u((o9,Rl)=>{var V3=1e5,F3=1e-5;Rl.exports={EPS:F3,spatialResolution:V3}});var Fl=u((i9,Vl)=>{var{EPS:on}=W(),se=R(),C3=(e,t,r,n)=>{let s=se.subtract(se.create(),r,t),o=se.subtract(se.create(),n,t);se.length(s)<on&&(s=se.orthogonal(s,o)),se.length(o)<on&&(o=se.orthogonal(o,s));let i=se.cross(se.create(),s,o);se.length(i)<on&&(o=se.orthogonal(o,s),i=se.cross(i,s,o)),i=se.normalize(i,i);let c=se.dot(i,t);return e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=c,e};Vl.exports=C3});var zl=u((c9,Cl)=>{var z3=R(),I3=(e,t)=>{let r=t[0]*e[0]+t[1]*e[1]+t[2]*e[2]-e[3],n=t[0]-r*e[0],s=t[1]-r*e[1],o=t[2]-r*e[2];return z3.fromValues(n,s,o)};Cl.exports=I3});var Gl=u((a9,Il)=>{var G3=R(),D3=(e,t)=>G3.dot(e,t)-e[3];Il.exports=D3});var cn=u((l9,Dl)=>{var X3=e=>`(${e[0].toFixed(9)}, ${e[1].toFixed(9)}, ${e[2].toFixed(9)}, ${e[3].toFixed(9)})`;Dl.exports=X3});var Yl=u((u9,Xl)=>{var Y3=X(),oe=R(),$3=sn(),L3=tn(),Z3=(e,t,r)=>{let n=Y3.isMirroring(r),s=oe.orthogonal(oe.create(),t),o=oe.cross(s,t,s),i=oe.cross(oe.create(),t,o),c=oe.fromScalar(oe.create(),t[3]);oe.multiply(c,c,t);let a=oe.add(oe.create(),c,o),l=oe.add(oe.create(),c,i);return c=oe.transform(c,c,r),a=oe.transform(a,a,r),l=oe.transform(l,l,r),$3(e,c,a,l),n&&L3(e,e),e};Xl.exports=Z3});var pe=u((f9,$l)=>{$l.exports={clone:Qr(),copy:Jr(),create:dt(),equals:en(),flip:tn(),fromNormalAndPoint:Ol(),fromValues:nn(),fromPoints:sn(),fromPointsRandom:Fl(),projectionOfPoint:zl(),signedDistanceToPoint:Gl(),toString:cn(),transform:Yl()}});var Hl=u((h9,Zl)=>{var Ll=pe(),Ne=R(),H3=e=>_3(e.vertices),_3=e=>{let t=e.length;if(t>2){let r=Ll.fromPoints(Ll.create(),e[0],e[1],e[2]),n=e[t-2],s=e[t-1];for(let o=0;o<t;o++){let i=e[o];if(!W3(n,s,i,r))return!1;n=s,s=i}}return!0},W3=(e,t,r,n)=>{let s=Ne.cross(Ne.create(),Ne.subtract(Ne.create(),t,e),Ne.subtract(Ne.create(),r,t));return Ne.dot(s,n)>=0};Zl.exports=H3});var Wl=u((d9,_l)=>{var pt=R(),U3=e=>{let t=e.vertices.length;if(t<3)return 0;let r=e.vertices,n=r[0],s=r[1],o=r[2],i=pt.subtract(pt.create(),s,n),c=pt.subtract(pt.create(),o,n),a=pt.cross(i,i,c),l=Math.abs(a[0]),h=Math.abs(a[1]),f=Math.abs(a[2]),d=Math.sqrt(l*l+h*h+f*f),q=3;l>h&&l>f?q=1:h>f&&(q=2);let g=0,p=0,m=1,v=2;switch(q){case 1:for(m=1;m<t;m++)p=m-1,v=(m+1)%t,g+=r[m][1]*(r[v][2]-r[p][2]);g+=r[0][1]*(r[1][2]-r[t-1][2]),g*=d/(2*a[0]);break;case 2:for(m=1;m<t;m++)p=m-1,v=(m+1)%t,g+=r[m][2]*(r[v][0]-r[p][0]);g+=r[0][2]*(r[1][0]-r[t-1][0]),g*=d/(2*a[1]);break;case 3:default:for(m=1;m<t;m++)p=m-1,v=(m+1)%t,g+=r[m][0]*(r[v][1]-r[p][1]);g+=r[0][0]*(r[1][1]-r[t-1][1]),g*=d/(2*a[2]);break}return g};_l.exports=U3});var an=u((p9,Ul)=>{var mt=R(),j3=e=>{let t=e.vertices,r=t.length,n=r===0?mt.create():mt.clone(t[0]),s=mt.clone(n);for(let o=1;o<r;o++)mt.min(n,n,t[o]),mt.max(s,s,t[o]);return[n,s]};Ul.exports=j3});var Kl=u((m9,jl)=>{var ln=R(),K3=an(),Q3=e=>{let t=K3(e),r=t[0];ln.add(r,t[0],t[1]),ln.scale(r,r,.5);let n=ln.distance(r,t[1]);return[r,n]};jl.exports=Q3});var Jl=u((g9,Ql)=>{var un=R(),J3=e=>{let t=0,r=e.vertices,n=un.create();for(let s=0;s<r.length-2;s++)un.cross(n,r[s+1],r[s+2]),t+=un.dot(r[0],n);return t/=6,t};Ql.exports=J3});var r1=u((q9,t1)=>{var e1=pe(),ev=e=>{if(!e.plane){let t=e.vertices;e.plane=e1.fromPoints(e1.create(),t[0],t[1],t[2])}return e.plane};t1.exports=ev});var s1=u((v9,n1)=>{var tv=e=>e.vertices;n1.exports=tv});var i1=u((x9,o1)=>{var rv=R(),nv=e=>{let t="poly3: vertices: [";return e.vertices.forEach(r=>{t+=`${rv.toString(r)}, `}),t+="]",t};o1.exports=nv});var l1=u((w9,a1)=>{var sv=X(),c1=R(),ov=Oe(),iv=(e,t)=>{let r=t.vertices.map(n=>c1.transform(c1.create(),n,e));return sv.isMirroring(e)&&r.reverse(),ov(r)};a1.exports=iv});var D=u((y9,u1)=>{u1.exports={clone:ml(),create:Oe(),fromPoints:ql(),fromPointsAndPlane:xl(),invert:yl(),isA:bl(),isConvex:Hl(),measureArea:Wl(),measureBoundingBox:an(),measureBoundingSphere:Kl(),measureSignedVolume:Jl(),plane:r1(),toPoints:s1(),toString:i1(),transform:l1()}});var Re=u((P9,f1)=>{var cv=X(),av=e=>(e===void 0&&(e=[]),{polygons:e,isRetesselated:!1,transforms:cv.create()});f1.exports=av});var d1=u((b9,h1)=>{var lv=X(),uv=D(),fv=Re(),hv=e=>{let t=fv();return t.polygons=e.polygons.map(r=>uv.clone(r)),t.isRetesselated=e.isRetesselated,t.transforms=lv.clone(e.transforms),t};h1.exports=hv});var m1=u((E9,p1)=>{var dv=D(),pv=Re(),mv=e=>{if(!Array.isArray(e))throw new Error("the given points must be an array");let t=e.map((n,s)=>dv.fromPoints(n));return pv(t)};p1.exports=mv});var q1=u((A9,g1)=>{var gv=R(),qv=X(),vv=D(),xv=Re(),wv=e=>{if(e[0]!==1)throw new Error("invalid compact binary data");let t=xv();t.transforms=qv.clone(e.slice(1,17)),t.isRetesselated=!!e[17];let r=e[22],n=23,s=e.length-r*3;for(;s<e.length;){let o=e[n];n++;let i=[];for(let c=0;c<o;c++)i.push(gv.fromValues(e[s],e[s+1],e[s+2])),s+=3;t.polygons.push(vv.create(i))}return e[18]>=0&&(t.color=[e[18],e[19],e[20],e[21]]),t};g1.exports=wv});var w1=u((M9,x1)=>{var v1=X(),yv=D(),Pv=e=>(v1.isIdentity(e.transforms)||(e.polygons=e.polygons.map(t=>yv.transform(e.transforms,t)),e.transforms=v1.create()),e);x1.exports=Pv});var gt=u((S9,y1)=>{var bv=w1(),Ev=e=>bv(e).polygons;y1.exports=Ev});var b1=u((T9,P1)=>{var Av=D(),Mv=Re(),Sv=gt(),Tv=e=>{let r=Sv(e).map(n=>Av.invert(n));return Mv(r)};P1.exports=Tv});var A1=u((k9,E1)=>{var kv=e=>!!(e&&typeof e=="object"&&"polygons"in e&&"transforms"in e&&Array.isArray(e.polygons)&&"length"in e.transforms);E1.exports=kv});var S1=u((O9,M1)=>{var Ov=D(),Bv=gt(),Nv=e=>Bv(e).map(n=>Ov.toPoints(n));M1.exports=Nv});var k1=u((B9,T1)=>{var Rv=D(),Vv=gt(),Fv=e=>{let t=Vv(e),r="geom3 ("+t.length+` polygons):
`;return t.forEach(n=>{r+="  "+Rv.toString(n)+`
`}),r};T1.exports=Fv});var B1=u((N9,O1)=>{var Cv=D(),zv=e=>{let t=e.polygons,r=e.transforms,n=t.length,s=t.reduce((l,h)=>l+h.vertices.length,0),o=[-1,-1,-1,-1];e.color&&(o=e.color);let i=new Float32Array(1+16+1+4+1+n+s*3);i[0]=1,i[1]=r[0],i[2]=r[1],i[3]=r[2],i[4]=r[3],i[5]=r[4],i[6]=r[5],i[7]=r[6],i[8]=r[7],i[9]=r[8],i[10]=r[9],i[11]=r[10],i[12]=r[11],i[13]=r[12],i[14]=r[13],i[15]=r[14],i[16]=r[15],i[17]=e.isRetesselated?1:0,i[18]=o[0],i[19]=o[1],i[20]=o[2],i[21]=o[3],i[22]=s;let c=23,a=c+n;return t.forEach(l=>{let h=Cv.toPoints(l);i[c]=h.length,c++;for(let f=0;f<h.length;f++){let d=h[f];i[a+0]=d[0],i[a+1]=d[1],i[a+2]=d[2],a+=3}}),i};O1.exports=zv});var V1=u((V9,R1)=>{var N1=X(),R9=Re(),Iv=(e,t)=>{let r=N1.multiply(N1.create(),e,t.transforms);return Object.assign({},t,{transforms:r})};R1.exports=Iv});var z=u((F9,F1)=>{F1.exports={clone:d1(),create:Re(),fromPoints:m1(),fromCompactBinary:q1(),invert:b1(),isA:A1(),toPoints:S1(),toPolygons:gt(),toString:k1(),toCompactBinary:B1(),transform:V1()}});var Ze=u((C9,C1)=>{var Gv=X(),Dv=e=>(e===void 0&&(e=[]),{points:e,isClosed:!1,transforms:Gv.create()});C1.exports=Dv});var Xt=u((z9,z1)=>{var Xv=X(),Yv=I(),$v=Ze(),Lv=e=>{let t=$v();return t.points=e.points.map(r=>Yv.clone(r)),t.isClosed=e.isClosed,t.transforms=Xv.clone(e.transforms),t};z1.exports=Lv});var fn=u((I9,G1)=>{var{EPS:I1}=W(),Zv=I(),Hv=Xt(),_v=e=>{if(e.isClosed)return e;let t=Hv(e);if(t.isClosed=!0,t.points.length>1){let r=t.points,n=r[0],s=r[r.length-1];for(;Zv.distance(n,s)<I1*I1&&(r.pop(),r.length!==1);)s=r[r.length-1]}return t};G1.exports=_v});var qt=u((G9,Y1)=>{var{EPS:D1}=W(),X1=I(),Wv=fn(),Uv=Ze(),jv=(e,t)=>{let r={closed:!1},{closed:n}=Object.assign({},r,e),s=Uv();if(s.points=t.map(o=>X1.clone(o)),s.points.length>1){let o=s.points[0],i=s.points[s.points.length-1];X1.distance(o,i)<D1*D1&&(n=!0)}return n===!0&&(s=Wv(s)),s};Y1.exports=jv});var H1=u((D9,Z1)=>{var $1=X(),L1=I(),Kv=e=>($1.isIdentity(e.transforms)||(e.points=e.points.map(t=>L1.transform(L1.create(),t,e.transforms)),e.transforms=$1.create()),e);Z1.exports=Kv});var me=u((X9,_1)=>{var Qv=H1(),Jv=e=>Qv(e).points;_1.exports=Jv});var U1=u((Y9,W1)=>{var j=I(),ex=qt(),tx=me(),rx=(e,t)=>{let r={radius:[0,0],xaxisrotation:0,clockwise:!1,large:!1,segments:16},{endpoint:n,radius:s,xaxisrotation:o,clockwise:i,large:c,segments:a}=Object.assign({},r,e);if(!Array.isArray(n))throw new Error("endpoint must be an array of X and Y values");if(n.length<2)throw new Error("endpoint must contain X and Y values");if(n=j.clone(n),!Array.isArray(s))throw new Error("radius must be an array of X and Y values");if(s.length<2)throw new Error("radius must contain X and Y values");if(a<4)throw new Error("segments must be four or more");let l=1e5;if(t.isClosed)throw new Error("the given path cannot be closed");let h=tx(t);if(h.length<1)throw new Error("the given path must contain one or more points (as the starting point for the arc)");let f=s[0],d=s[1],q=h[h.length-1];f=Math.round(f*l)/l,d=Math.round(d*l)/l,n=j.fromValues(Math.round(n[0]*l)/l,Math.round(n[1]*l)/l);let g=!i,p=[];if(f===0||d===0)p.push(n);else{f=Math.abs(f),d=Math.abs(d);let v=o,x=Math.cos(v),y=Math.sin(v),b=j.subtract(j.create(),q,n);j.scale(b,b,.5);let w=Math.round((x*b[0]+y*b[1])*l)/l,E=Math.round((-y*b[0]+x*b[1])*l)/l,P=j.fromValues(w,E),k=P[0]*P[0]/(f*f)+P[1]*P[1]/(d*d);if(k>1){let ne=Math.sqrt(k);f*=ne,d*=ne,f=Math.round(f*l)/l,d=Math.round(d*l)/l}let A=Math.sqrt((f*f*d*d-f*f*P[1]*P[1]-d*d*P[0]*P[0])/(f*f*P[1]*P[1]+d*d*P[0]*P[0]));g===c&&(A=-A);let M=j.fromValues(f*P[1]/d,-d*P[0]/f);j.scale(M,M,A);let S=j.fromValues(x*M[0]-y*M[1],y*M[0]+x*M[1]);S=j.add(S,S,j.scale(j.create(),j.add(j.create(),q,n),.5));let T=j.fromValues((P[0]-M[0])/f,(P[1]-M[1])/d),F=j.fromValues((-P[0]-M[0])/f,(-P[1]-M[1])/d),N=j.angleRadians(T),B=j.angleRadians(F)-N;B=B%(2*Math.PI),!g&&B>0?B-=2*Math.PI:g&&B<0&&(B+=2*Math.PI);let J=Math.ceil(Math.abs(B)/(2*Math.PI)*a)+1;J<1&&(J=1);for(let ne=1;ne<J;ne++){let ae=N+ne/J*B,lt=Math.cos(ae),Ft=Math.sin(ae),Xe=j.fromValues(x*f*lt-y*d*Ft,y*f*lt+x*d*Ft);j.add(Xe,Xe,S),p.push(Xe)}J&&p.push(e.endpoint)}return p=h.concat(p),ex({},p)};W1.exports=rx});var hn=u(($9,j1)=>{var nx=qt(),sx=me(),ox=(e,t)=>{if(t.isClosed)throw new Error("cannot append points to a closed path");let r=sx(t);return r=r.concat(e),nx({},r)};j1.exports=ox});var Q1=u((L9,K1)=>{var le=I(),ix=I(),cx=hn(),ax=me(),lx=(e,t)=>{let r={segments:16},{controlPoints:n,segments:s}=Object.assign({},r,e);if(!Array.isArray(n))throw new Error("controlPoints must be an array of one or more points");if(n.length<1)throw new Error("controlPoints must be an array of one or more points");if(s<4)throw new Error("segments must be four or more");if(t.isClosed)throw new Error("the given geometry cannot be closed");let o=ax(t);if(o.length<1)throw new Error("the given path must contain one or more points (as the starting point for the bezier curve)");if(n=n.slice(),n[0]===null){if(n.length<2)throw new Error("a null control point must be passed with one more control points");let E=o[o.length-2];if("lastBezierControlPoint"in t&&(E=t.lastBezierControlPoint),!Array.isArray(E))throw new Error("the given path must contain TWO or more points if given a null control point");let P=le.scale(le.create(),o[o.length-1],2);le.subtract(P,P,E),n[0]=P}n.unshift(o[o.length-1]);let c=n.length-1,a=[],l=1;for(let E=0;E<=c;++E)E>0&&(l*=E),a.push(l);let h=[];for(let E=0;E<=c;++E){let P=a[c]/(a[E]*a[c-E]);h.push(P)}let f=le.create(),d=le.create(),q=ix.create(),g=E=>{let P=1,k=Math.pow(1-E,c),A=E!==1?1/(1-E):1,M=le.create();for(let S=0;S<=c;++S){S===c&&(k=1);let T=h[S]*P*k,F=le.scale(f,n[S],T);le.add(M,M,F),P*=E,k*=A}return M},p=[],m=[],v=c+1;for(let E=0;E<v;++E){let P=E/(v-1),k=g(P);p.push(k),m.push(P)}let x=1,y=Math.PI*2/s,b=Math.sin(y);for(;x<p.length-1;){let E=le.subtract(f,p[x],p[x-1]);le.normalize(E,E);let P=le.subtract(d,p[x+1],p[x]);le.normalize(P,P);let k=le.cross(q,E,P);if(Math.abs(k[2])>b){let A=m[x-1],M=m[x+1],S=A+(M-A)*1/3,T=A+(M-A)*2/3,F=g(S),N=g(T);p.splice(x,1,F,N),m.splice(x,1,S,T),x--,x<1&&(x=1)}else++x}p.shift();let w=cx(p,t);return w.lastBezierControlPoint=n[n.length-2],w};K1.exports=lx});var eu=u((Z9,J1)=>{var ux=qt(),fx=me(),{equals:hx}=I(),dx=(...e)=>{let t=!1;for(let n of e){if(t)throw new Error("Cannot concatenate to a closed path");t=n.isClosed}let r=[];return e.forEach(n=>{let s=fx(n);r.length>0&&s.length>0&&hx(s[0],r[r.length-1])&&s.shift(),r=r.concat(s)}),ux({closed:t},r)};J1.exports=dx});var ru=u((H9,tu)=>{var px=me(),mx=(e,t,r)=>{px(r).forEach(t)};tu.exports=mx});var ou=u((_9,su)=>{var gx=I(),nu=me(),qx=(e,t)=>{if(e.isClosed!==t.isClosed||e.points.length!==t.points.length)return!1;let r=nu(e),n=nu(t),s=r.length,o=0;do{let i=!1;for(let c=0;c<s;c++)if(!gx.equals(r[c],n[(c+o)%s])){i=!0;break}if(i===!1)return!0;if(!e.isClosed)return!1}while(++o<s);return!1};su.exports=qx});var cu=u((W9,iu)=>{var vx=X(),xx=I(),wx=Ze(),yx=e=>{if(e[0]!==2)throw new Error("invalid compact binary data");let t=wx();t.transforms=vx.clone(e.slice(1,17)),t.isClosed=!!e[17];for(let r=22;r<e.length;r+=2){let n=xx.fromValues(e[r],e[r+1]);t.points.push(n)}return e[18]>=0&&(t.color=[e[18],e[19],e[20],e[21]]),t};iu.exports=yx});var lu=u((U9,au)=>{var Px=e=>!!(e&&typeof e=="object"&&"points"in e&&"transforms"in e&&"isClosed"in e&&Array.isArray(e.points)&&"length"in e.transforms);au.exports=Px});var fu=u((j9,uu)=>{var bx=Xt(),Ex=e=>{let t=bx(e);return t.points=e.points.slice().reverse(),t};uu.exports=Ex});var du=u((K9,hu)=>{var Ax=I(),Mx=me(),Sx=e=>{let t=Mx(e),r="path ("+t.length+" points, "+e.isClosed+`):
[
`;return t.forEach(n=>{r+="  "+Ax.toString(n)+`,
`}),r+=`]
`,r};hu.exports=Sx});var mu=u((Q9,pu)=>{var Tx=e=>{let t=e.points,r=e.transforms,n=[-1,-1,-1,-1];e.color&&(n=e.color);let s=new Float32Array(1+16+1+4+t.length*2);s[0]=2,s[1]=r[0],s[2]=r[1],s[3]=r[2],s[4]=r[3],s[5]=r[4],s[6]=r[5],s[7]=r[6],s[8]=r[7],s[9]=r[8],s[10]=r[9],s[11]=r[10],s[12]=r[11],s[13]=r[12],s[14]=r[13],s[15]=r[14],s[16]=r[15],s[17]=e.isClosed?1:0,s[18]=n[0],s[19]=n[1],s[20]=n[2],s[21]=n[3];for(let o=0;o<t.length;o++){let i=o*2+22,c=t[o];s[i]=c[0],s[i+1]=c[1]}return s};pu.exports=Tx});var vu=u((eT,qu)=>{var gu=X(),J9=Ze(),kx=(e,t)=>{let r=gu.multiply(gu.create(),e,t.transforms);return Object.assign({},t,{transforms:r})};qu.exports=kx});var Z=u((tT,xu)=>{xu.exports={appendArc:U1(),appendBezier:Q1(),appendPoints:hn(),clone:Xt(),close:fn(),concat:eu(),create:Ze(),eachPoint:ru(),equals:ou(),fromPoints:qt(),fromCompactBinary:cu(),isA:lu(),reverse:fu(),toPoints:me(),toString:du(),toCompactBinary:mu(),transform:vu()}});var vt=u((rT,wu)=>{var Ox=e=>{let t=0;for(let r=0;r<e.length;r++){let n=(r+1)%e.length;t+=e[r][0]*e[n][1],t-=e[n][0]*e[r][1]}return t/2};wu.exports=Ox});var dn=u((nT,yu)=>{var Bx=vt(),Nx=e=>Bx(e.vertices);yu.exports=Nx});var pn=u((sT,Pu)=>{var Rx=e=>((e===void 0||e.length<3)&&(e=[]),{vertices:e});Pu.exports=Rx});var mn=u((oT,bu)=>{var Vx=pn(),Fx=e=>{let t=e.vertices.slice().reverse();return Vx(t)};bu.exports=Fx});var Au=u((iT,Eu)=>{var Cx=dn(),zx=mn(),Ix=(e,t)=>{if(e.length===0)return 0;let r=t.vertices;return r.length<3?0:(Cx(t)<0&&(t=zx(t)),e.reduce((s,o)=>s+Gx(o,r),0)===e.length?1:0)},Gx=(e,t)=>{let r=t.length,n=e[0],s=e[1],o=t[r-1],i=t[0],c=o[1]>s,a=0,l=0;for(let h=r+1;--h;){let f=i[1]>s;if(c!==f){let d=o[0]>n,q=i[0]>n;(d&&q||i[0]-(i[1]-s)*(o[0]-i[0])/(o[1]-i[1])>=n)&&(a=!a)}c=f,o=i,i=t[++l]}return a};Eu.exports=Ix});var gn=u((cT,Mu)=>{Mu.exports={arePointsInside:Au(),create:pn(),flip:mn(),measureArea:dn()}});var Yt=u((aT,Su)=>{Su.exports={geom2:G(),geom3:z(),path2:Z(),poly2:gn(),poly3:D()}});var $t=u((lT,Tu)=>{var Dx=()=>[0,1,0];Tu.exports=Dx});var Ou=u((uT,ku)=>{var Xx=$t(),Yx=e=>{let t=Xx();return t[0]=e[0],t[1]=e[1],t[2]=e[2],t};ku.exports=Yx});var Lt=u((fT,Bu)=>{var qn=I(),$x=e=>{let t=qn.normal(qn.create(),e);return qn.negate(t,t),t};Bu.exports=$x});var xt=u((hT,Ru)=>{var Nu=I(),Lx=e=>Nu.scale(Nu.create(),e,e[2]);Ru.exports=Lx});var Fu=u((dT,Vu)=>{var Zx=I(),Hx=Lt(),_x=xt(),Wx=(e,t)=>{let r=_x(e),n=Hx(e),s=(n[1]-r[1])/(n[0]-r[0]),o=r[1]-s*r[0],i=-1/s,a=(t[1]-i*t[0]-o)/(s-i),l=s*a+o;return Zx.fromValues(a,l)};Vu.exports=Wx});var vn=u((pT,Cu)=>{var Ux=(e,t)=>(e[0]=t[0],e[1]=t[1],e[2]=t[2],e);Cu.exports=Ux});var Iu=u((mT,zu)=>{var jx=I(),Kx=(e,t)=>{let r=jx.dot(t,e);return r=Math.abs(r-e[2]),r};zu.exports=Kx});var Du=u((gT,Gu)=>{var Qx=(e,t)=>e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2];Gu.exports=Qx});var xn=u((qT,Xu)=>{var wt=I(),Jx=(e,t,r)=>{let n=wt.subtract(wt.create(),r,t);wt.normal(n,n),wt.normalize(n,n);let s=wt.dot(t,n);return e[0]=n[0],e[1]=n[1],e[2]=s,e};Xu.exports=Jx});var wn=u((vT,Yu)=>{var ew=$t(),tw=(e,t,r)=>{let n=ew();return n[0]=e,n[1]=t,n[2]=r,n};Yu.exports=tw});var Pn=u((xT,$u)=>{var yn=1e-13,rw=(e,t)=>Math.abs(e[0]-t[0])<=yn&&Math.abs(e[1]-t[1])<=yn&&Math.abs(e[2]-t[2])<=yn;$u.exports=rw});var bn=u((wT,Lu)=>{var nw=(e,t,r)=>{let n=r-e[1],s=t[1]-e[1];s<0&&(n=-n,s=-s);let o;return n<=0?o=0:n>=s?o=1:s<1e-10?o=.5:o=n/s,e[0]+o*(t[0]-e[0])};Lu.exports=nw});var En=u((yT,Zu)=>{var sw=(e,t,r,n)=>{if(e[0]===t[0]&&e[1]===t[1]||r[0]===n[0]&&r[1]===n[1])return;let s=(n[1]-r[1])*(t[0]-e[0])-(n[0]-r[0])*(t[1]-e[1]);if(Math.abs(s)<Number.MIN_VALUE)return;let o=((n[0]-r[0])*(e[1]-r[1])-(n[1]-r[1])*(e[0]-r[0]))/s,i=((t[0]-e[0])*(e[1]-r[1])-(t[1]-e[1])*(e[0]-r[0]))/s;if(o<0||o>1||i<0||i>1)return;let c=e[0]+o*(t[0]-e[0]),a=e[1]+o*(t[1]-e[1]);return[c,a]};Zu.exports=sw});var _u=u((PT,Hu)=>{var ow=(e,t,r,n,s,o)=>{let i=e*n-t*r,c=1/i,a=s*n-t*o,l=-s*r+e*o;return a*=c,l*=c,[a,l]};Hu.exports=ow});var yt=u((bT,Wu)=>{Wu.exports={aboutEqualNormals:Pn(),area:vt(),interpolateBetween2DPointsForY:bn(),intersect:En(),solve2Linear:_u()}});var ju=u((ET,Uu)=>{var iw=I(),{solve2Linear:cw}=yt(),aw=(e,t)=>{let r=cw(e[0],e[1],t[0],t[1],e[2],t[2]);return iw.clone(r)};Uu.exports=aw});var Ju=u((AT,Qu)=>{var Ku=I(),lw=vn(),uw=wn(),fw=(e,t)=>{let r=Ku.negate(Ku.create(),t),n=-t[2];return lw(e,uw(r[0],r[1],n))};Qu.exports=fw});var t0=u((MT,e0)=>{var hw=e=>`line2: (${e[0].toFixed(7)}, ${e[1].toFixed(7)}, ${e[2].toFixed(7)})`;e0.exports=hw});var s0=u((ST,n0)=>{var r0=I(),dw=xn(),pw=xt(),mw=Lt(),gw=(e,t,r)=>{let n=pw(t),s=mw(t);return r0.transform(n,n,r),r0.transform(s,s,r),dw(e,n,s)};n0.exports=gw});var i0=u((TT,o0)=>{var qw=xt(),vw=(e,t)=>{let r=(e[2]-e[1]*t)/e[0];return Number.isNaN(r)&&(r=qw(e)[0]),r};o0.exports=vw});var Zt=u((kT,c0)=>{c0.exports={clone:Ou(),closestPoint:Fu(),copy:vn(),create:$t(),direction:Lt(),distanceToPoint:Iu(),equals:Du(),fromPoints:xn(),fromValues:wn(),intersectPointOfLines:ju(),origin:xt(),reverse:Ju(),toString:t0(),transform:s0(),xAtY:i0()}});var An=u((OT,l0)=>{var a0=R(),xw=()=>[a0.fromValues(0,0,0),a0.fromValues(0,0,1)];l0.exports=xw});var h0=u((BT,f0)=>{var u0=R(),ww=An(),yw=e=>{let t=ww();return u0.copy(t[0],e[0]),u0.copy(t[1],e[1]),t};f0.exports=yw});var Mn=u((NT,d0)=>{var Ve=R(),Pw=(e,t)=>{let r=e[0],n=e[1],s=Ve.dot(Ve.subtract(Ve.create(),t,r),n),o=Ve.dot(n,n),i=s/o,c=Ve.scale(Ve.create(),n,i);return Ve.add(c,c,r),c};d0.exports=Pw});var g0=u((RT,m0)=>{var p0=R(),bw=(e,t)=>(p0.copy(e[0],t[0]),p0.copy(e[1],t[1]),e);m0.exports=bw});var v0=u((VT,q0)=>{var Ew=e=>e[1];q0.exports=Ew});var w0=u((FT,x0)=>{var Sn=R(),Aw=Mn(),Mw=(e,t)=>{let r=Aw(e,t),n=Sn.subtract(Sn.create(),t,r);return Sn.length(n)};x0.exports=Mw});var b0=u((CT,P0)=>{var y0=R(),Sw=(e,t)=>!(!y0.equals(e[1],t[1])||!y0.equals(e[0],t[0]));P0.exports=Sw});var He=u((zT,E0)=>{var Ht=R(),Tw=(e,t,r)=>{let n=Ht.normalize(Ht.create(),r);return Ht.copy(e[0],t),Ht.copy(e[1],n),e};E0.exports=Tw});var M0=u((IT,A0)=>{var Fe=R(),{solve2Linear:Tn}=yt(),{EPS:kw}=W(),Ow=He(),Bw=(e,t,r)=>{let n=Fe.cross(Fe.create(),t,r),s=Fe.length(n);if(s<kw)throw new Error("parallel planes do not intersect");s=1/s,n=Fe.scale(n,n,s);let o=Math.abs(n[0]),i=Math.abs(n[1]),c=Math.abs(n[2]),a,l;return o>=i&&o>=c?(l=Tn(t[1],t[2],r[1],r[2],t[3],r[3]),a=Fe.fromValues(0,l[0],l[1])):i>=o&&i>=c?(l=Tn(t[0],t[2],r[0],r[2],t[3],r[3]),a=Fe.fromValues(l[0],0,l[1])):(l=Tn(t[0],t[1],r[0],r[1],t[3],r[3]),a=Fe.fromValues(l[0],l[1],0)),Ow(e,a,n)};A0.exports=Bw});var k0=u((GT,T0)=>{var S0=R(),Nw=He(),Rw=(e,t,r)=>{let n=S0.subtract(S0.create(),r,t);return Nw(e,t,n)};T0.exports=Rw});var B0=u((DT,O0)=>{var _e=R(),Vw=(e,t)=>{let r=t,n=t[3],s=e[0],o=e[1],i=(n-_e.dot(r,s))/_e.dot(r,o);return _e.add(_e.create(),s,_e.scale(_e.create(),o,i))};O0.exports=Vw});var R0=u((XT,N0)=>{var Fw=e=>e[0];N0.exports=Fw});var F0=u((YT,V0)=>{var kn=R(),Cw=He(),zw=(e,t)=>{let r=kn.clone(t[0]),n=kn.negate(kn.create(),t[1]);return Cw(e,r,n)};V0.exports=zw});var z0=u(($T,C0)=>{var Iw=e=>{let t=e[0],r=e[1];return`line3: point: (${t[0].toFixed(7)}, ${t[1].toFixed(7)}, ${t[2].toFixed(7)}) direction: (${r[0].toFixed(7)}, ${r[1].toFixed(7)}, ${r[2].toFixed(7)})`};C0.exports=Iw});var G0=u((LT,I0)=>{var We=R(),Gw=He(),Dw=(e,t,r)=>{let n=t[0],s=t[1],o=We.add(We.create(),n,s),i=We.transform(We.create(),n,r),c=We.transform(o,o,r),a=We.subtract(c,c,i);return Gw(e,i,a)};I0.exports=Dw});var On=u((ZT,D0)=>{D0.exports={clone:h0(),closestPoint:Mn(),copy:g0(),create:An(),direction:v0(),distanceToPoint:w0(),equals:b0(),fromPlanes:M0(),fromPointAndDirection:He(),fromPoints:k0(),intersectPointOfLineAndPlane:B0(),origin:R0(),reverse:F0(),toString:z0(),transform:G0()}});var Y0=u((HT,X0)=>{var Xw=(e,t)=>e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3];X0.exports=Xw});var L0=u((_T,$0)=>{var Yw=(e,t)=>(e[0]=t,e[1]=t,e[2]=t,e[3]=t,e);$0.exports=Yw});var H0=u((WT,Z0)=>{var $w=(e,t,r)=>{let[n,s,o,i]=t;return e[0]=r[0]*n+r[4]*s+r[8]*o+r[12]*i,e[1]=r[1]*n+r[5]*s+r[9]*o+r[13]*i,e[2]=r[2]*n+r[6]*s+r[10]*o+r[14]*i,e[3]=r[3]*n+r[7]*s+r[11]*o+r[15]*i,e};Z0.exports=$w});var W0=u((UT,_0)=>{_0.exports={clone:Qr(),copy:Jr(),create:dt(),dot:Y0(),equals:en(),fromScalar:L0(),fromValues:nn(),toString:cn(),transform:H0()}});var j0=u((jT,U0)=>{U0.exports={constants:W(),line2:Zt(),line3:On(),mat4:X(),plane:pe(),utils:yt(),vec2:I(),vec3:R(),vec4:W0()}});var Bn=u((KT,J0)=>{var Lw=C(),K0=G(),Q0=z(),Zw=Z(),Hw=D(),_t=new WeakMap,_w=()=>0,Ww=e=>{let t=_t.get(e);return t||(t=K0.toSides(e).reduce((n,s)=>n+(s[0][0]*s[1][1]-s[0][1]*s[1][0]),0),t*=.5,_t.set(e,t),t)},Uw=e=>{let t=_t.get(e);return t||(t=Q0.toPolygons(e).reduce((n,s)=>n+Hw.measureArea(s),0),_t.set(e,t),t)},jw=(...e)=>{if(e=Lw(e),e.length===0)throw new Error("wrong number of arguments");let t=e.map(r=>Zw.isA(r)?_w(r):K0.isA(r)?Ww(r):Q0.isA(r)?Uw(r):0);return t.length===1?t[0]:t};J0.exports=jw});var tf=u((QT,ef)=>{var Kw=C(),Qw=Bn(),Jw=(...e)=>{if(e=Kw(e),e.length===0)throw new Error("measureAggregateArea: no geometries supplied");let t=Qw(e);if(e.length===1)return t;let r=0;return t.reduce((n,s)=>n+s,r)};ef.exports=Jw});var Ce=u((JT,ff)=>{var ey=C(),ie=I(),ge=R(),Wt=X(),rf=G(),nf=z(),sf=Z(),of=D(),ue=new WeakMap,cf=e=>{let t=ue.get(e);if(t)return t;let r;e.length===0?r=ie.create():r=ie.clone(e[0]);let n=ie.clone(r);return e.forEach(s=>{ie.min(r,r,s),ie.max(n,n,s)}),t=[[r[0],r[1],0],[n[0],n[1],0]],ue.set(e,t),t},ty=e=>{let t=ue.get(e);return t||(Wt.isOnlyTransformScale(e.transforms)?t=Nn(cf(e.points),e.transforms):t=cf(sf.toPoints(e)),ue.set(e,t),t)},af=({points:e,sides:t})=>{let r=e||t,n=ue.get(r);if(n)return n;let s,o;return e?(e.length===0?s=ie.create():s=ie.clone(e[0]),o=ie.clone(s),e.forEach(i=>{ie.min(s,s,i),ie.max(o,o,i)})):(t.length===0?s=ie.create():s=ie.clone(t[0][0]),o=ie.clone(s),t.forEach(i=>{ie.min(s,s,i[0]),ie.max(o,o,i[0])})),n=[[s[0],s[1],0],[o[0],o[1],0]],ue.set(r,n),n},ry=e=>{let t=ue.get(e);return t||(Wt.isOnlyTransformScale(e.transforms)?t=Nn(af(e),e.transforms):t=af({points:rf.toPoints(e)}),ue.set(e,t),t)},lf=e=>{let t=ue.get(e);if(t)return t;let r=ge.create();if(e.length>0){let s=of.toPoints(e[0]);ge.copy(r,s[0])}let n=ge.clone(r);return e.forEach(s=>{of.toPoints(s).forEach(o=>{ge.min(r,r,o),ge.max(n,n,o)})}),t=[[r[0],r[1],r[2]],[n[0],n[1],n[2]]],ue.set(e,t),t},ny=e=>{let t=ue.get(e);return t||(Wt.isOnlyTransformScale(e.transforms)?t=Nn(lf(e.polygons),e.transforms):t=lf(nf.toPolygons(e)),ue.set(e,t),t)},Nn=(e,t)=>t&&!Wt.isIdentity(t)?[ge.transform(ge.create(),e[0],t),ge.transform(ge.create(),e[1],t)]:e,uf=(...e)=>{if(e=ey(e),e.length===0)throw new Error("wrong number of arguments");let t=e.map(r=>sf.isA(r)?ty(r):rf.isA(r)?ry(r):nf.isA(r)?ny(r):[[0,0,0],[0,0,0]]);return t.length===1?t[0]:t};uf.setCache=(e,t)=>ue.set(e,t);ff.exports=uf});var Ut=u((ek,hf)=>{var sy=C(),oy=Lr(),iy=$r(),cy=Ce(),ay=(...e)=>{if(e=sy(e),e.length===0)throw new Error("measureAggregateBoundingBox: no geometries supplied");let t=cy(e);if(e.length===1)return t;let r=[[Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE],[-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE]];return t.reduce((n,s)=>(n=[oy(n[0],n[0],s[0]),iy(n[1],n[1],s[1])],n),r)};hf.exports=ay});var Rn=u((tk,df)=>{var{EPS:ly}=W(),uy=(e,t)=>{let r=0;for(let n=0;n<t;n++)r+=e[1][n]-e[0][n];return ly*r/t};df.exports=uy});var mf=u((rk,pf)=>{var fy=C(),hy=Ut(),dy=Rn(),{geom2:py,geom3:my,path2:gy}=Yt(),qy=(...e)=>{if(e=fy(e),e.length===0)throw new Error("measureAggregateEpsilon: no geometries supplied");let t=hy(e),r=0;return r=e.reduce((n,s)=>gy.isA(s)||py.isA(s)?Math.max(n,2):my.isA(s)?Math.max(n,3):0,r),dy(t,r)};pf.exports=qy});var Vn=u((nk,vf)=>{var vy=C(),xy=G(),gf=z(),wy=Z(),yy=D(),qf=new WeakMap,Py=()=>0,by=()=>0,Ey=e=>{let t=qf.get(e);return t||(t=gf.toPolygons(e).reduce((n,s)=>n+yy.measureSignedVolume(s),0),qf.set(e,t),t)},Ay=(...e)=>{if(e=vy(e),e.length===0)throw new Error("wrong number of arguments");let t=e.map(r=>wy.isA(r)?Py(r):xy.isA(r)?by(r):gf.isA(r)?Ey(r):0);return t.length===1?t[0]:t};vf.exports=Ay});var wf=u((sk,xf)=>{var My=C(),Sy=Vn(),Ty=(...e)=>{if(e=My(e),e.length===0)throw new Error("measureAggregateVolume: no geometries supplied");let t=Sy(e);if(e.length===1)return t;let r=0;return t.reduce((n,s)=>n+s,r)};xf.exports=Ty});var qe=u((ok,yf)=>{var ky=C(),{geom2:Oy,geom3:By,path2:Ny}=Yt(),Fn=Rn(),Cn=Ce(),Ry=e=>Fn(Cn(e),2),Vy=e=>Fn(Cn(e),2),Fy=e=>Fn(Cn(e),3),Cy=(...e)=>{if(e=ky(e),e.length===0)throw new Error("wrong number of arguments");let t=e.map(r=>Ny.isA(r)?Ry(r):Oy.isA(r)?Vy(r):By.isA(r)?Fy(r):0);return t.length===1?t[0]:t};yf.exports=Cy});var bf=u((ik,Pf)=>{Pf.exports={measureAggregateArea:tf(),measureAggregateBoundingBox:Ut(),measureAggregateEpsilon:mf(),measureAggregateVolume:wf(),measureArea:Bn(),measureBoundingBox:Ce(),measureEpsilon:qe(),measureVolume:Vn()}});var Q=u((ck,Ef)=>{var zy=(e,t)=>Array.isArray(e)&&e.length>=t?e.every(r=>Number.isFinite(r)):!1,Iy=(e,t)=>Number.isFinite(e)&&e>t,Gy=(e,t)=>Number.isFinite(e)&&e>=t;Ef.exports={isNumberArray:zy,isGT:Iy,isGTE:Gy}});var Sf=u((ak,Mf)=>{var{EPS:Af}=W(),ve=I(),Dy=Z(),{isGT:Xy,isGTE:zn,isNumberArray:Yy}=Q(),$y=e=>{let t={center:[0,0],radius:1,startAngle:0,endAngle:Math.PI*2,makeTangent:!1,segments:32},{center:r,radius:n,startAngle:s,endAngle:o,makeTangent:i,segments:c}=Object.assign({},t,e);if(!Yy(r,2))throw new Error("center must be an array of X and Y values");if(!Xy(n,0))throw new Error("radius must be greater than zero");if(!zn(s,0))throw new Error("startAngle must be positive");if(!zn(o,0))throw new Error("endAngle must be positive");if(!zn(c,4))throw new Error("segments must be four or more");s=s%(Math.PI*2),o=o%(Math.PI*2);let a=Math.PI*2;s<o&&(a=o-s),s>o&&(a=o+(Math.PI*2-s));let l=Math.acos((n*n+n*n-Af*Af)/(2*n*n)),h=ve.clone(r),f,d=[];if(a<l)f=ve.fromAngleRadians(ve.create(),s),ve.scale(f,f,n),ve.add(f,f,h),d.push(f);else{let q=Math.max(1,Math.floor(c*(a/(Math.PI*2))))+1,g=q*.5/a;g>.25&&(g=.25);let p=i?q+2:q;for(let m=0;m<=p;m++){let v=m;i&&(v=(m-1)*(q-2*g)/q+g,v<0&&(v=0),v>q&&(v=q));let x=s+v*(a/q);f=ve.fromAngleRadians(ve.create(),x),ve.scale(f,f,n),ve.add(f,f,h),d.push(f)}}return Dy.fromPoints({close:!1},d)};Mf.exports=$y});var Dn=u((lk,Of)=>{var{EPS:Tf}=W(),In=I(),Ly=G(),{isGTE:Gn,isNumberArray:kf}=Q(),Zy=e=>{let t={center:[0,0],radius:[1,1],startAngle:0,endAngle:Math.PI*2,segments:32},{center:r,radius:n,startAngle:s,endAngle:o,segments:i}=Object.assign({},t,e);if(!kf(r,2))throw new Error("center must be an array of X and Y values");if(!kf(n,2))throw new Error("radius must be an array of X and Y values");if(!n.every(q=>q>0))throw new Error("radius values must be greater than zero");if(!Gn(s,0))throw new Error("startAngle must be positive");if(!Gn(o,0))throw new Error("endAngle must be positive");if(!Gn(i,3))throw new Error("segments must be three or more");s=s%(Math.PI*2),o=o%(Math.PI*2);let c=Math.PI*2;s<o&&(c=o-s),s>o&&(c=o+(Math.PI*2-s));let a=Math.min(n[0],n[1]),l=Math.acos((a*a+a*a-Tf*Tf)/(2*a*a));if(c<l)throw new Error("startAngle and endAngle do not define a significant rotation");i=Math.floor(i*(c/(Math.PI*2)));let h=In.clone(r),f=c/i,d=[];i=c<Math.PI*2?i+1:i;for(let q=0;q<i;q++){let g=f*q+s,p=In.fromValues(n[0]*Math.cos(g),n[1]*Math.sin(g));In.add(p,h,p),d.push(p)}return c<Math.PI*2&&d.push(h),Ly.fromPoints(d)};Of.exports=Zy});var Xn=u((uk,Bf)=>{var Hy=Dn(),{isGT:_y}=Q(),Wy=e=>{let t={center:[0,0],radius:1,startAngle:0,endAngle:Math.PI*2,segments:32},{center:r,radius:n,startAngle:s,endAngle:o,segments:i}=Object.assign({},t,e);if(!_y(n,0))throw new Error("radius must be greater than zero");return n=[n,n],Hy({center:r,radius:n,startAngle:s,endAngle:o,segments:i})};Bf.exports=Wy});var Yn=u((fk,Rf)=>{var Uy=z(),jy=D(),{isNumberArray:Nf}=Q(),Ky=e=>{let t={center:[0,0,0],size:[2,2,2]},{center:r,size:n}=Object.assign({},t,e);if(!Nf(r,3))throw new Error("center must be an array of X, Y and Z values");if(!Nf(n,3))throw new Error("size must be an array of width, depth and height values");if(!n.every(o=>o>0))throw new Error("size values must be greater than zero");return Uy.create([[[0,4,6,2],[-1,0,0]],[[1,3,7,5],[1,0,0]],[[0,1,5,4],[0,-1,0]],[[2,6,7,3],[0,1,0]],[[0,2,3,1],[0,0,-1]],[[4,5,7,6],[0,0,1]]].map(o=>{let i=o[0].map(c=>[r[0]+n[0]/2*(2*!!(c&1)-1),r[1]+n[1]/2*(2*!!(c&2)-1),r[2]+n[2]/2*(2*!!(c&4)-1)]);return jy.fromPoints(i)}))};Rf.exports=Ky});var Ff=u((hk,Vf)=>{var Qy=Yn(),{isGT:Jy}=Q(),e4=e=>{let t={center:[0,0,0],size:2},{center:r,size:n}=Object.assign({},t,e);if(!Jy(n,0))throw new Error("size must be greater than zero");return n=[n,n,n],Qy({center:r,size:n})};Vf.exports=e4});var Zn=u((dk,zf)=>{var{EPS:Cf}=W(),ee=R(),t4=z(),r4=D(),{isGT:n4,isGTE:$n,isNumberArray:Ln}=Q(),s4=e=>{let t={center:[0,0,0],height:2,startRadius:[1,1],startAngle:0,endRadius:[1,1],endAngle:Math.PI*2,segments:32},{center:r,height:n,startRadius:s,startAngle:o,endRadius:i,endAngle:c,segments:a}=Object.assign({},t,e);if(!Ln(r,3))throw new Error("center must be an array of X, Y and Z values");if(!n4(n,0))throw new Error("height must be greater then zero");if(!Ln(s,2))throw new Error("startRadius must be an array of X and Y values");if(!s.every(A=>A>0))throw new Error("startRadius values must be greater than zero");if(!Ln(i,2))throw new Error("endRadius must be an array of X and Y values");if(!i.every(A=>A>0))throw new Error("endRadius values must be greater than zero");if(!$n(o,0))throw new Error("startAngle must be positive");if(!$n(c,0))throw new Error("endAngle must be positive");if(!$n(a,4))throw new Error("segments must be four or more");o=o%(Math.PI*2),c=c%(Math.PI*2);let l=Math.PI*2;o<c&&(l=c-o),o>c&&(l=c+(Math.PI*2-o));let h=Math.min(s[0],s[1],i[0],i[1]),f=Math.acos((h*h+h*h-Cf*Cf)/(2*h*h));if(l<f)throw new Error("startAngle and endAngle do not define a significant rotation");let d=Math.floor(a*(l/(Math.PI*2))),q=ee.fromValues(0,0,-(n/2)),g=ee.fromValues(0,0,n/2),p=ee.subtract(ee.create(),g,q),m=ee.fromValues(1,0,0),v=ee.fromValues(0,1,0),x=ee.create(),y=ee.create(),b=ee.create(),w=(A,M,S)=>{let T=M*l+o;return ee.scale(x,m,S[0]*Math.cos(T)),ee.scale(y,v,S[1]*Math.sin(T)),ee.add(x,x,y),ee.scale(b,p,A),ee.add(b,b,q),ee.add(ee.create(),x,b)},E=(...A)=>{let M=A.map(S=>ee.add(ee.create(),S,r));return r4.fromPoints(M)},P=[];for(let A=0;A<d;A++){let M=A/d,S=(A+1)/d;i[0]===s[0]&&i[1]===s[1]?(P.push(E(q,w(0,S,i),w(0,M,i))),P.push(E(w(0,S,i),w(1,S,i),w(1,M,i),w(0,M,i))),P.push(E(g,w(1,M,i),w(1,S,i)))):(s[0]>0&&(P.push(E(q,w(0,S,s),w(0,M,s))),P.push(E(w(0,M,s),w(0,S,s),w(1,M,i)))),i[0]>0&&(P.push(E(g,w(1,M,i),w(1,S,i))),P.push(E(w(1,M,i),w(0,S,s),w(1,S,i)))))}return l<Math.PI*2&&(P.push(E(q,w(0,0,s),g)),P.push(E(w(0,0,s),w(1,0,i),g)),P.push(E(q,g,w(0,1,s))),P.push(E(w(0,1,s),g,w(1,1,i)))),t4.create(P)};zf.exports=s4});var Gf=u((pk,If)=>{var o4=Zn(),{isGT:i4}=Q(),c4=e=>{let t={center:[0,0,0],height:2,radius:1,segments:32},{center:r,height:n,radius:s,segments:o}=Object.assign({},t,e);if(!i4(s,0))throw new Error("radius must be greater than zero");return o4({center:r,height:n,startRadius:[s,s],endRadius:[s,s],segments:o})};If.exports=c4});var Hn=u((mk,Yf)=>{var V=R(),a4=z(),Df=D(),l4=Ce(),{isGTE:u4,isNumberArray:Xf}=Q(),f4=e=>{let t={center:[0,0,0],radius:[1,1,1],segments:32,axes:[[1,0,0],[0,-1,0],[0,0,1]]},r=!e||!e.axes,{center:n,radius:s,segments:o,axes:i}=Object.assign({},t,e);if(!Xf(n,3))throw new Error("center must be an array of X, Y and Z values");if(!Xf(s,3))throw new Error("radius must be an array of X, Y and Z values");if(!s.every(m=>m>0))throw new Error("radius values must be greater than zero");if(!u4(o,4))throw new Error("segments must be four or more");let c=V.scale(V.create(),V.normalize(V.create(),i[0]),s[0]),a=V.scale(V.create(),V.normalize(V.create(),i[1]),s[1]),l=V.scale(V.create(),V.normalize(V.create(),i[2]),s[2]),h=Math.round(o/4),f,d=[],q=V.create(),g=V.create();for(let m=0;m<=o;m++){let v=Math.PI*2*m/o,x=V.add(V.create(),V.scale(q,c,Math.cos(v)),V.scale(g,a,Math.sin(v)));if(m>0){let y,b;for(let w=0;w<=h;w++){let E=.5*Math.PI*w/h,P=Math.cos(E),k=Math.sin(E);if(w>0){let A=[],M;M=V.subtract(V.create(),V.scale(q,f,y),V.scale(g,l,b)),A.push(V.add(M,M,n)),M=V.subtract(V.create(),V.scale(q,x,y),V.scale(g,l,b)),A.push(V.add(M,M,n)),w<h&&(M=V.subtract(V.create(),V.scale(q,x,P),V.scale(g,l,k)),A.push(V.add(M,M,n))),M=V.subtract(V.create(),V.scale(q,f,P),V.scale(g,l,k)),A.push(V.add(M,M,n)),d.push(Df.fromPoints(A)),A=[],M=V.add(V.create(),V.scale(q,f,y),V.scale(g,l,b)),A.push(V.add(V.create(),n,M)),M=V.add(M,V.scale(q,x,y),V.scale(g,l,b)),A.push(V.add(V.create(),n,M)),w<h&&(M=V.add(M,V.scale(q,x,P),V.scale(g,l,k)),A.push(V.add(V.create(),n,M))),M=V.add(M,V.scale(q,f,P),V.scale(g,l,k)),A.push(V.add(V.create(),n,M)),A.reverse(),d.push(Df.fromPoints(A))}y=P,b=k}}f=x}let p=a4.create(d);if(r){let m=[s.map((v,x)=>-v+n[x]),s.map((v,x)=>v+n[x])];l4.setCache(p,m)}return p};Yf.exports=f4});var _n=u((gk,Lf)=>{var h4=z(),d4=D(),{isNumberArray:$f}=Q(),p4=e=>{let t={points:[],faces:[],colors:void 0,orientation:"outward"},{points:r,faces:n,colors:s,orientation:o}=Object.assign({},t,e);if(!(Array.isArray(r)&&Array.isArray(n)))throw new Error("points and faces must be arrays");if(r.length<3)throw new Error("three or more points are required");if(n.length<1)throw new Error("one or more faces are required");if(s){if(!Array.isArray(s))throw new Error("colors must be an array");if(s.length!==n.length)throw new Error("faces and colors must have the same length")}r.forEach((c,a)=>{if(!$f(c,3))throw new Error(`point ${a} must be an array of X, Y, Z values`)}),n.forEach((c,a)=>{if(c.length<3)throw new Error(`face ${a} must contain 3 or more indexes`);if(!$f(c,c.length))throw new Error(`face ${a} must be an array of numbers`)}),o!=="outward"&&n.forEach(c=>c.reverse());let i=n.map((c,a)=>{let l=d4.fromPoints(c.map(h=>r[h]));return s&&s[a]&&(l.color=s[a]),l});return h4.create(i)};Lf.exports=p4});var _f=u((qk,Hf)=>{var Zf=X(),m4=z(),g4=_n(),{isGT:q4,isGTE:v4}=Q(),x4=e=>{let t={radius:1,frequency:6},{radius:r,frequency:n}=Object.assign({},t,e);if(!q4(r,0))throw new Error("radius must be greater than zero");if(!v4(n,6))throw new Error("frequency must be six or more");n=Math.floor(n/6);let s=[[.850651,0,-.525731],[.850651,-0,.525731],[-.850651,-0,.525731],[-.850651,0,-.525731],[0,-.525731,.850651],[0,.525731,.850651],[0,.525731,-.850651],[0,-.525731,-.850651],[-.525731,-.850651,-0],[.525731,-.850651,-0],[.525731,.850651,0],[-.525731,.850651,0]],o=[[0,9,1],[1,10,0],[6,7,0],[10,6,0],[7,9,0],[5,1,4],[4,1,9],[5,10,1],[2,8,3],[3,11,2],[2,5,4],[4,8,2],[2,11,5],[3,7,6],[6,11,3],[8,7,3],[9,8,4],[11,10,5],[10,11,6],[8,9,7]],i=(d,q,g)=>{let p=d[0],m=d[1],v=d[2],x=g,y=[],b=[];for(let w=0;w<q;w++)for(let E=0;E<q-w;E++){let P=w/q,k=(w+1)/q,A=E/(q-w),M=(E+1)/(q-w),S=q-w-1?E/(q-w-1):1,T=[];T[0]=c(c(p,m,A),v,P),T[1]=c(c(p,m,M),v,P),T[2]=c(c(p,m,S),v,k);for(let F=0;F<3;F++){let N=Math.sqrt(T[F][0]*T[F][0]+T[F][1]*T[F][1]+T[F][2]*T[F][2]);for(let $=0;$<3;$++)T[F][$]/=N}if(y.push(T[0],T[1],T[2]),b.push([x,x+1,x+2]),x+=3,E<q-w-1){let F=q-w-1?(E+1)/(q-w-1):1;T[0]=c(c(p,m,M),v,P),T[1]=c(c(p,m,F),v,k),T[2]=c(c(p,m,S),v,k);for(let N=0;N<3;N++){let $=Math.sqrt(T[N][0]*T[N][0]+T[N][1]*T[N][1]+T[N][2]*T[N][2]);for(let B=0;B<3;B++)T[N][B]/=$}y.push(T[0],T[1],T[2]),b.push([x,x+1,x+2]),x+=3}}return{points:y,triangles:b,offset:x}},c=(d,q,g)=>{let p=1-g,m=[];for(let v=0;v<3;v++)m[v]=d[v]*p+q[v]*g;return m},a=[],l=[],h=0;for(let d=0;d<o.length;d++){let q=i([s[o[d][0]],s[o[d][1]],s[o[d][2]]],n,h);a=a.concat(q.points),l=l.concat(q.triangles),h=q.offset}let f=g4({points:a,faces:l,orientation:"inward"});return r!==1&&(f=m4.transform(Zf.fromScaling(Zf.create(),[r,r,r]),f)),f};Hf.exports=x4});var Uf=u((vk,Wf)=>{var w4=Z(),y4=e=>{if(!Array.isArray(e))throw new Error("points must be an array");return w4.fromPoints({},e)};Wf.exports=y4});var Kf=u((xk,jf)=>{var Wn=G(),P4=e=>{let t={points:[],paths:[]},{points:r,paths:n}=Object.assign({},t,e);if(!(Array.isArray(r)&&Array.isArray(n)))throw new Error("points and paths must be arrays");let s=r;Array.isArray(r[0])&&(Array.isArray(r[0][0])||(s=[r])),s.forEach((a,l)=>{if(!Array.isArray(a))throw new Error("list of points "+l+" must be an array");if(a.length<3)throw new Error("list of points "+l+" must contain three or more points");a.forEach((h,f)=>{if(!Array.isArray(h))throw new Error("list of points "+l+", point "+f+" must be an array");if(h.length<2)throw new Error("list of points "+l+", point "+f+" must contain by X and Y values")})});let o=n;if(n.length===0){let a=0;o=s.map(l=>l.map(h=>a++))}let i=[];s.forEach(a=>a.forEach(l=>i.push(l)));let c=[];return o.forEach(a=>{let l=a.map(f=>i[f]),h=Wn.fromPoints(l);c=c.concat(Wn.toSides(h))}),Wn.create(c)};jf.exports=P4});var Un=u((wk,Jf)=>{var be=I(),b4=G(),{isNumberArray:Qf}=Q(),E4=e=>{let t={center:[0,0],size:[2,2]},{center:r,size:n}=Object.assign({},t,e);if(!Qf(r,2))throw new Error("center must be an array of X and Y values");if(!Qf(n,2))throw new Error("size must be an array of X and Y values");if(!n.every(c=>c>0))throw new Error("size values must be greater than zero");let s=[n[0]/2,n[1]/2],o=[s[0],-s[1]],i=[be.subtract(be.create(),r,s),be.add(be.create(),r,o),be.add(be.create(),r,s),be.subtract(be.create(),r,o)];return b4.fromPoints(i)};Jf.exports=E4});var oh=u((yk,sh)=>{var{EPS:jt}=W(),jn=I(),U=R(),A4=z(),Ue=D(),{isGT:M4,isGTE:S4,isNumberArray:eh}=Q(),th=(e,t,r,n,s,o)=>{let i=Math.PI/2*s/n,c=Math.cos(i),a=Math.sin(i),l=n-s,h=r*c,f=t[2]-(r-r*a);o||(f=r-r*a-t[2]),h=h>jt?h:0;let d=U.add(U.create(),e,[t[0]-r,t[1]-r,f]),q=U.add(U.create(),e,[r-t[0],t[1]-r,f]),g=U.add(U.create(),e,[r-t[0],r-t[1],f]),p=U.add(U.create(),e,[t[0]-r,r-t[1],f]),m=[],v=[],x=[],y=[];for(let b=0;b<=l;b++){let w=l>0?Math.PI/2*b/l:0,E=jn.fromAngleRadians(jn.create(),w);jn.scale(E,E,h);let P=U.fromVec2(U.create(),E);m.push(U.add(U.create(),d,P)),U.rotateZ(P,P,[0,0,0],Math.PI/2),v.push(U.add(U.create(),q,P)),U.rotateZ(P,P,[0,0,0],Math.PI/2),x.push(U.add(U.create(),g,P)),U.rotateZ(P,P,[0,0,0],Math.PI/2),y.push(U.add(U.create(),p,P))}return o?[m,v,x,y]:(m.reverse(),v.reverse(),x.reverse(),y.reverse(),[y,x,v,m])},rh=(e,t)=>{let r=[];for(let n=0;n<e.length;n++){let s=e[n],o=t[n];for(let i=0;i<s.length-1;i++)r.push(Ue.fromPoints([s[i],s[i+1],o[i]])),i<o.length-1&&r.push(Ue.fromPoints([o[i],s[i+1],o[i+1]]))}return r},nh=(e,t)=>{let r=[];for(let n=0;n<e.length;n++){let s=e[n],o=t[n],i=s[s.length-1],c=o[o.length-1],a=(n+1)%e.length;s=e[a],o=t[a];let l=s[0],h=o[0];r.push(Ue.fromPoints([i,l,h,c]))}return r},T4=(e,t)=>{e=[e[3],e[2],e[1],e[0]],e=e.map(o=>o.slice().reverse());let r=[];e.forEach(o=>{o.forEach(i=>r.push(i))});let n=[];t.forEach(o=>{o.forEach(i=>n.push(i))});let s=[];for(let o=0;o<n.length;o++){let i=(o+1)%n.length;s.push(Ue.fromPoints([r[o],r[i],n[i],n[o]]))}return s},k4=e=>{let t={center:[0,0,0],size:[2,2,2],roundRadius:.2,segments:32},{center:r,size:n,roundRadius:s,segments:o}=Object.assign({},t,e);if(!eh(r,3))throw new Error("center must be an array of X, Y and Z values");if(!eh(n,3))throw new Error("size must be an array of X, Y and Z values");if(!n.every(l=>l>0))throw new Error("size values must be greater than zero");if(!M4(s,0))throw new Error("roundRadius must be greater than zero");if(!S4(o,4))throw new Error("segments must be four or more");if(n=n.map(l=>l/2),s>n[0]-jt||s>n[1]-jt||s>n[2]-jt)throw new Error("roundRadius must be smaller then the radius of all dimensions");o=Math.floor(o/4);let i=null,c=null,a=[];for(let l=0;l<=o;l++){let h=th(r,n,s,o,l,!0),f=th(r,n,s,o,l,!1);if(l===0&&(a=a.concat(T4(f,h))),i&&(a=a.concat(rh(i,h),nh(i,h))),c&&(a=a.concat(rh(c,f),nh(c,f))),l===o){let d=h.map(q=>q[0]);a.push(Ue.fromPoints(d)),d=f.map(q=>q[0]),a.push(Ue.fromPoints(d))}i=h,c=f}return A4.create(a)};sh.exports=k4});var ah=u((Pk,ch)=>{var{EPS:ih}=W(),O=R(),O4=z(),B4=D(),{isGT:Kn,isGTE:N4,isNumberArray:R4}=Q(),V4=e=>{let t={center:[0,0,0],height:2,radius:1,roundRadius:.2,segments:32},{center:r,height:n,radius:s,roundRadius:o,segments:i}=Object.assign({},t,e);if(!R4(r,3))throw new Error("center must be an array of X, Y and Z values");if(!Kn(n,0))throw new Error("height must be greater then zero");if(!Kn(s,0))throw new Error("radius must be greater then zero");if(!Kn(o,0))throw new Error("roundRadius must be greater then zero");if(o>s-ih)throw new Error("roundRadius must be smaller then the radius");if(!N4(i,4))throw new Error("segments must be four or more");let c=[0,0,-(n/2)],a=[0,0,n/2],l=O.subtract(O.create(),a,c),h=O.length(l);if(2*o>h-ih)throw new Error("height must be larger than twice roundRadius");let f;Math.abs(l[0])>Math.abs(l[1])?f=O.fromValues(0,1,0):f=O.fromValues(1,0,0);let d=O.scale(O.create(),O.normalize(O.create(),l),o),q=O.scale(O.create(),O.normalize(O.create(),O.cross(O.create(),d,f)),s),g=O.scale(O.create(),O.normalize(O.create(),O.cross(O.create(),q,d)),s);O.add(c,c,d),O.subtract(a,a,d);let p=Math.floor(.25*i),m=E=>{let P=E.map(k=>O.add(k,k,r));return B4.fromPoints(P)},v=[],x=O.create(),y=O.create(),b;for(let E=0;E<=i;E++){let P=Math.PI*2*E/i,k=O.add(O.create(),O.scale(x,q,Math.cos(P)),O.scale(y,g,Math.sin(P)));if(E>0){let A=[];A.push(O.add(O.create(),c,k)),A.push(O.add(O.create(),c,b)),A.push(O.add(O.create(),a,b)),A.push(O.add(O.create(),a,k)),v.push(m(A));let M,S;for(let T=0;T<=p;T++){let F=.5*Math.PI*T/p,N=Math.cos(F),$=Math.sin(F);if(T>0){A=[];let B;B=O.add(O.create(),c,O.subtract(x,O.scale(x,b,M),O.scale(y,d,S))),A.push(B),B=O.add(O.create(),c,O.subtract(x,O.scale(x,k,M),O.scale(y,d,S))),A.push(B),T<p&&(B=O.add(O.create(),c,O.subtract(x,O.scale(x,k,N),O.scale(y,d,$))),A.push(B)),B=O.add(O.create(),c,O.subtract(x,O.scale(x,b,N),O.scale(y,d,$))),A.push(B),v.push(m(A)),A=[],B=O.add(O.create(),O.scale(x,b,M),O.scale(y,d,S)),O.add(B,B,a),A.push(B),B=O.add(O.create(),O.scale(x,k,M),O.scale(y,d,S)),O.add(B,B,a),A.push(B),T<p&&(B=O.add(O.create(),O.scale(x,k,N),O.scale(y,d,$)),O.add(B,B,a),A.push(B)),B=O.add(O.create(),O.scale(x,b,N),O.scale(y,d,$)),O.add(B,B,a),A.push(B),A.reverse(),v.push(m(A))}M=N,S=$}}b=k}return O4.create(v)};ch.exports=V4});var hh=u((bk,fh)=>{var{EPS:lh}=W(),H=I(),F4=G(),{isGT:C4,isGTE:z4,isNumberArray:uh}=Q(),I4=e=>{let t={center:[0,0],size:[2,2],roundRadius:.2,segments:32},{center:r,size:n,roundRadius:s,segments:o}=Object.assign({},t,e);if(!uh(r,2))throw new Error("center must be an array of X and Y values");if(!uh(n,2))throw new Error("size must be an array of X and Y values");if(!n.every(p=>p>0))throw new Error("size values must be greater than zero");if(!C4(s,0))throw new Error("roundRadius must be greater than zero");if(!z4(o,4))throw new Error("segments must be four or more");if(n=n.map(p=>p/2),s>n[0]-lh||s>n[1]-lh)throw new Error("roundRadius must be smaller then the radius of all dimensions");let i=Math.floor(o/4),c=H.add(H.create(),r,[n[0]-s,n[1]-s]),a=H.add(H.create(),r,[s-n[0],n[1]-s]),l=H.add(H.create(),r,[s-n[0],s-n[1]]),h=H.add(H.create(),r,[n[0]-s,s-n[1]]),f=[],d=[],q=[],g=[];for(let p=0;p<=i;p++){let m=Math.PI/2*p/i,v=H.fromAngleRadians(H.create(),m);H.scale(v,v,s),f.push(H.add(H.create(),c,v)),H.rotate(v,v,H.create(),Math.PI/2),d.push(H.add(H.create(),a,v)),H.rotate(v,v,H.create(),Math.PI/2),q.push(H.add(H.create(),l,v)),H.rotate(v,v,H.create(),Math.PI/2),g.push(H.add(H.create(),h,v))}return F4.fromPoints(f.concat(d,q,g))};fh.exports=I4});var Qn=u((Ek,dh)=>{var G4=Hn(),{isGT:D4}=Q(),X4=e=>{e=Object.assign({},{center:[0,0,0],radius:1,segments:32},e);let{radius:r}=e;if(!D4(r,0))throw new Error("radius must be greater than zero");return e.radius=[r,r,r],G4(e)};dh.exports=X4});var mh=u((Ak,ph)=>{var Y4=Un(),{isGT:$4}=Q(),L4=e=>{let t={center:[0,0],size:2},{center:r,size:n}=Object.assign({},t,e);if(!$4(n,0))throw new Error("size must be greater than zero");return n=[n,n],Y4({center:r,size:n})};ph.exports=L4});var vh=u((Mk,qh)=>{var Pt=I(),Z4=G(),{isGT:H4,isGTE:Kt,isNumberArray:_4}=Q(),W4=(e,t)=>e>0&&t>1&&t<e/2?Math.cos(Math.PI*t/e)/Math.cos(Math.PI*(t-1)/e):0,gh=(e,t,r,n)=>{let s=Math.PI*2/e,o=[];for(let i=0;i<e;i++){let c=Pt.fromAngleRadians(Pt.create(),s*i+r);Pt.scale(c,c,t),Pt.add(c,n,c),o.push(c)}return o},U4=e=>{let t={center:[0,0],vertices:5,outerRadius:1,innerRadius:0,density:2,startAngle:0},{center:r,vertices:n,outerRadius:s,innerRadius:o,density:i,startAngle:c}=Object.assign({},t,e);if(!_4(r,2))throw new Error("center must be an array of X and Y values");if(!Kt(n,2))throw new Error("vertices must be two or more");if(!H4(s,0))throw new Error("outerRadius must be greater than zero");if(!Kt(o,0))throw new Error("innerRadius must be greater than zero");if(!Kt(c,0))throw new Error("startAngle must be greater than zero");if(n=Math.floor(n),i=Math.floor(i),c=c%(Math.PI*2),o===0){if(!Kt(i,2))throw new Error("density must be two or more");o=s*W4(n,i)}let a=Pt.clone(r),l=gh(n,s,c,a),h=gh(n,o,c+Math.PI/n,a),f=[];for(let d=0;d<n;d++)f.push(l[d]),f.push(h[d]);return Z4.fromPoints(f)};qh.exports=U4});var je=u((Sk,Eh)=>{var j4=C(),xh=X(),wh=pe(),yh=G(),Ph=z(),bh=Z(),Qt=(e,...t)=>{let r={origin:[0,0,0],normal:[0,0,1]},{origin:n,normal:s}=Object.assign({},r,e);if(t=j4(t),t.length===0)throw new Error("wrong number of arguments");let o=wh.fromNormalAndPoint(wh.create(),s,n);if(Number.isNaN(o[0]))throw new Error("the given origin and normal do not define a proper plane");let i=xh.mirrorByPlane(xh.create(),o),c=t.map(a=>bh.isA(a)?bh.transform(i,a):yh.isA(a)?yh.transform(i,a):Ph.isA(a)?Ph.transform(i,a):a);return c.length===1?c[0]:c},K4=(...e)=>Qt({normal:[1,0,0]},e),Q4=(...e)=>Qt({normal:[0,1,0]},e),J4=(...e)=>Qt({normal:[0,0,1]},e);Eh.exports={mirror:Qt,mirrorX:K4,mirrorY:Q4,mirrorZ:J4}});var Jn=u((Tk,Mh)=>{var Ah=pe(),Ke=R(),eP=e=>{let t=e.edges;if(t.length<3)throw new Error("slices must have 3 or more edges to calculate a plane");let r=t.reduce((i,c)=>Ke.add(Ke.create(),i,c[0]),Ke.create());Ke.scale(r,r,1/t.length);let n,s=0;t.forEach(i=>{let c=Ke.squaredDistance(r,i[0]);c>s&&(n=i,s=c)});let o=t.find(i=>Ke.equals(i[1],n[0]));return Ah.fromPoints(Ah.create(),o[0],n[0],n[1])};Mh.exports=eP});var ze=u((kk,Sh)=>{var tP=e=>(e||(e=[]),{edges:e});Sh.exports=tP});var Oh=u((Ok,kh)=>{var rP=ze(),Th=R(),nP=(...e)=>{let t,r;return e.length===1?(t=rP(),r=e[0]):(t=e[0],r=e[1]),t.edges=r.edges.map(n=>[Th.clone(n[0]),Th.clone(n[1])]),t};kh.exports=nP});var Nh=u((Bk,Bh)=>{var sP=R(),oP=(e,t)=>{let r=e.edges,n=t.edges;return r.length!==n.length?!1:r.reduce((o,i,c)=>{let a=n[c],l=sP.squaredDistance(i[0],a[0]);return o&&l<Number.EPSILON},!0)};Bh.exports=oP});var Vh=u((Nk,Rh)=>{var Jt=R(),iP=ze(),cP=e=>{if(!Array.isArray(e))throw new Error("the given points must be an array");if(e.length<3)throw new Error("the given points must contain THREE or more points");let t=[],r=e[e.length-1];return e.forEach(n=>{n.length===2&&t.push([Jt.fromVec2(Jt.create(),r),Jt.fromVec2(Jt.create(),n)]),n.length===3&&t.push([r,n]),r=n}),iP(t)};Rh.exports=cP});var Ch=u((Rk,Fh)=>{var er=R(),aP=ze(),lP=e=>{if(!Array.isArray(e))throw new Error("the given sides must be an array");let t=[];return e.forEach(r=>{t.push([er.fromVec2(er.create(),r[0]),er.fromVec2(er.create(),r[1])])}),aP(t)};Fh.exports=lP});var Ih=u((Vk,zh)=>{var uP=e=>!!(e&&typeof e=="object"&&"edges"in e&&Array.isArray(e.edges));zh.exports=uP});var Dh=u((Fk,Gh)=>{var fP=ze(),hP=(...e)=>{let t,r;return e.length===1?(t=fP(),r=e[0]):(t=e[0],r=e[1]),t.edges=r.edges.map(n=>[n[1],n[0]]),t};Gh.exports=hP});var Yh=u((Ck,Xh)=>{var dP=e=>e.edges;Xh.exports=dP});var tr=u((zk,Lh)=>{var{EPS:Qe}=W(),$h=Ce(),pP=(e,t)=>{if(e.polygons.length===0||t.polygons.length===0)return!1;let r=$h(e),n=r[0],s=r[1],o=$h(t),i=o[0],c=o[1];return!(i[0]-s[0]>Qe||n[0]-c[0]>Qe||i[1]-s[1]>Qe||n[1]-c[1]>Qe||i[2]-s[2]>Qe||n[2]-c[2]>Qe)};Lh.exports=pP});var _h=u((Ik,Hh)=>{var Zh=pe(),mP=D(),bt=class{constructor(t){this.plane=null,this.front=null,this.back=null,this.polygontreenodes=[],this.parent=t}invert(){let t=[this],r;for(let n=0;n<t.length;n++){r=t[n],r.plane&&(r.plane=Zh.flip(Zh.create(),r.plane)),r.front&&t.push(r.front),r.back&&t.push(r.back);let s=r.front;r.front=r.back,r.back=s}}clipPolygons(t,r){let n={node:this,polygontreenodes:t},s,o=[];do{if(s=n.node,t=n.polygontreenodes,s.plane){let i=[],c=[],a=r?i:c,l=s.plane,h=t.length;for(let d=0;d<h;d++){let q=t[d];q.isRemoved()||q.splitByPlane(l,a,i,c,i)}s.front&&c.length>0&&o.push({node:s.front,polygontreenodes:c});let f=i.length;if(s.back&&f>0)o.push({node:s.back,polygontreenodes:i});else for(let d=0;d<f;d++)i[d].remove()}n=o.pop()}while(n!==void 0)}clipTo(t,r){let n=this,s=[];do n.polygontreenodes.length>0&&t.rootnode.clipPolygons(n.polygontreenodes,r),n.front&&s.push(n.front),n.back&&s.push(n.back),n=s.pop();while(n!==void 0)}addPolygonTreeNodes(t){let r={node:this,polygontreenodes:t},n=[];do{let s=r.node,o=r.polygontreenodes;if(o.length===0){r=n.pop();continue}if(!s.plane){let l=0;l=Math.floor(o.length/2);let h=o[l].getPolygon();s.plane=mP.plane(h)}let i=[],c=[],a=o.length;for(let l=0;l<a;++l)o[l].splitByPlane(s.plane,s.polygontreenodes,c,i,c);i.length>0&&(s.front||(s.front=new bt(s)),a===i.length&&c.length===0?s.front.polygontreenodes=i:n.push({node:s.front,polygontreenodes:i})),c.length>0&&(s.back||(s.back=new bt(s)),a===c.length&&i.length===0?s.back.polygontreenodes=c:n.push({node:s.back,polygontreenodes:c})),r=n.pop()}while(r!==void 0)}getParentPlaneNormals(t,r){r>0&&this.parent&&(t.push(this.parent.plane.normal),this.parent.getParentPlaneNormals(t,r-1))}};Hh.exports=bt});var Uh=u((Gk,Wh)=>{var Je=R(),gP=(e,t,r)=>{let n=Je.subtract(Je.create(),r,t),s=(e[3]-Je.dot(e,t))/Je.dot(e,n);return Number.isNaN(s)&&(s=0),s>1&&(s=1),s<0&&(s=0),Je.scale(n,n,s),Je.add(n,t,n),n};Wh.exports=gP});var Kh=u((Dk,jh)=>{var{EPS:rr}=W(),qP=pe(),nr=R(),es=D(),vP=Uh(),xP=(e,t)=>{let r={type:null,front:null,back:null},n=t.vertices,s=n.length,o=es.plane(t);if(qP.equals(o,e))r.type=0;else{let i=!1,c=!1,a=[],l=-rr;for(let h=0;h<s;h++){let f=nr.dot(e,n[h])-e[3],d=f<0;a.push(d),f>rr&&(i=!0),f<l&&(c=!0)}if(!i&&!c){let h=nr.dot(e,o);r.type=h>=0?0:1}else if(!c)r.type=2;else if(!i)r.type=3;else{r.type=4;let h=[],f=[],d=a[0];for(let g=0;g<s;g++){let p=n[g],m=g+1;m>=s&&(m=0);let v=a[m];if(d===v)d?f.push(p):h.push(p);else{let x=p,y=n[m],b=vP(e,x,y);d?(f.push(p),f.push(b),h.push(b)):(h.push(p),h.push(b),f.push(b))}d=v}let q=rr*rr;if(f.length>=3){let g=f[f.length-1];for(let p=0;p<f.length;p++){let m=f[p];nr.squaredDistance(m,g)<q&&(f.splice(p,1),p--),g=m}}if(h.length>=3){let g=h[h.length-1];for(let p=0;p<h.length;p++){let m=h[p];nr.squaredDistance(m,g)<q&&(h.splice(p,1),p--),g=m}}h.length>=3&&(r.front=es.fromPointsAndPlane(h,o)),f.length>=3&&(r.back=es.fromPointsAndPlane(f,o))}}return r};jh.exports=xP});var e2=u((Xk,Jh)=>{var{EPS:wP}=W(),yP=R(),Qh=D(),PP=Kh(),sr=class{constructor(){this.parent=null,this.children=[],this.polygon=null,this.removed=!1}addPolygons(t){if(!this.isRootNode())throw new Error("Assertion failed");let r=this;t.forEach(n=>{r.addChild(n)})}remove(){if(!this.removed){this.removed=!0;let t=this.parent.children,r=t.indexOf(this);if(r<0)throw new Error("Assertion failed");t.splice(r,1),this.parent.recursivelyInvalidatePolygon()}}isRemoved(){return this.removed}isRootNode(){return!this.parent}invert(){if(!this.isRootNode())throw new Error("Assertion failed");this.invertSub()}getPolygon(){if(!this.polygon)throw new Error("Assertion failed");return this.polygon}getPolygons(t){let r=[this],n=[r],s,o,i,c;for(s=0;s<n.length;++s)for(r=n[s],o=0,i=r.length;o<i;o++)c=r[o],c.polygon?t.push(c.polygon):c.children.length>0&&n.push(c.children)}splitByPlane(t,r,n,s,o){if(this.children.length){let i=[this.children],c,a,l,h,f;for(c=0;c<i.length;c++)for(f=i[c],a=0,l=f.length;a<l;a++)h=f[a],h.children.length>0?i.push(h.children):h._splitByPlane(t,r,n,s,o)}else this._splitByPlane(t,r,n,s,o)}_splitByPlane(t,r,n,s,o){let i=this.polygon;if(i){let c=Qh.measureBoundingSphere(i),a=c[1]+wP,l=c[0],h=yP.dot(t,l)-t[3];if(h>a)s.push(this);else if(h<-a)o.push(this);else{let f=PP(t,i);switch(f.type){case 0:r.push(this);break;case 1:n.push(this);break;case 2:s.push(this);break;case 3:o.push(this);break;case 4:if(f.front){let d=this.addChild(f.front);s.push(d)}if(f.back){let d=this.addChild(f.back);o.push(d)}break}}}}addChild(t){let r=new sr;return r.parent=this,r.polygon=t,this.children.push(r),r}invertSub(){let t=[this],r=[t],n,s,o,i;for(n=0;n<r.length;n++)for(t=r[n],s=0,o=t.length;s<o;s++)i=t[s],i.polygon&&(i.polygon=Qh.invert(i.polygon)),i.children.length>0&&r.push(i.children)}recursivelyInvalidatePolygon(){let t=this;for(;t.polygon;)t.polygon=null,t.parent&&(t=t.parent)}clear(){let t=[this],r=[t];for(let n=0;n<r.length;++n){t=r[n];let s=t.length;for(let o=0;o<s;o++){let i=t[o];i.polygon&&(i.polygon=null),i.parent&&(i.parent=null),i.children.length>0&&r.push(i.children),i.children=[]}}}toString(){let t="",r=[this],n=[r],s,o,i,c;for(s=0;s<n.length;++s){r=n[s];let a=" ".repeat(s);for(o=0,i=r.length;o<i;o++)c=r[o],t+=`${a}PolygonTreeNode (${c.isRootNode()}): ${c.children.length}`,c.polygon?t+=`
 ${a}poly3
`:t+=`
`,c.children.length>0&&n.push(c.children)}return t}};Jh.exports=sr});var n2=u((Yk,r2)=>{var bP=_h(),EP=e2(),t2=class{constructor(t){this.polygonTree=new EP,this.rootnode=new bP(null),t&&this.addPolygons(t)}invert(){this.polygonTree.invert(),this.rootnode.invert()}clipTo(t,r){r=!!r,this.rootnode.clipTo(t,r)}allPolygons(){let t=[];return this.polygonTree.getPolygons(t),t}addPolygons(t){let r=new Array(t.length);for(let n=0;n<t.length;n++)r[n]=this.polygonTree.addChild(t[n]);this.rootnode.addPolygonTreeNodes(r)}clear(){this.polygonTree.clear()}toString(){return"Tree: "+this.polygonTree.toString("")}};r2.exports=t2});var or=u(($k,s2)=>{s2.exports={Tree:n2()}});var ts=u((Lk,i2)=>{var ir=z(),AP=tr(),{Tree:o2}=or(),MP=(e,t)=>{if(!AP(e,t))return ir.create();let r=new o2(ir.toPolygons(e)),n=new o2(ir.toPolygons(t));r.invert(),n.clipTo(r),n.invert(),r.clipTo(n),n.clipTo(r),r.addPolygons(n.allPolygons()),r.invert();let s=r.allPolygons();return ir.create(s)};i2.exports=MP});var a2=u((Zk,c2)=>{var L=R(),rs=z(),ns=D(),SP=ts(),TP=Jn(),kP=(e,t)=>{let r=[L.subtract(L.create(),t[0],e),L.subtract(L.create(),t[1],e),L.add(L.create(),t[1],e),L.add(L.create(),t[0],e)];return ns.fromPoints(r)},OP=e=>{let t=TP(e),r=e.edges,n=r.reduce((x,y)=>L.add(L.create(),x,y[0]),L.create());L.scale(n,n,1/r.length);let s=[[NaN,NaN,NaN],[NaN,NaN,NaN]],o=0;r.forEach(x=>{let y=L.squaredDistance(n,x[0]);y>o&&(s=x,o=y)});let i=L.subtract(L.create(),s[0],n),c=L.cross(L.create(),t,i),a=L.add(L.create(),n,i);L.add(a,a,i);let l=L.add(L.create(),n,c);L.add(l,l,c);let h=L.subtract(L.create(),n,i);L.subtract(h,h,i);let f=L.subtract(L.create(),n,c);L.subtract(f,f,c);let d=ns.fromPoints([a,l,h,f]),q=rs.create([d]),g=r.map(x=>kP(t,x)),p=rs.create(g),m=SP(q,p),v=rs.toPolygons(m);return v=v.filter(x=>{let y=L.angle(t,ns.plane(x));return Math.abs(y)<Math.PI/90}),v};c2.exports=OP});var f2=u((Hk,u2)=>{var l2=R(),BP=e=>e.reduce((t,r)=>t+=`[${l2.toString(r[0])}, ${l2.toString(r[1])}], `,""),NP=e=>`[${BP(e.edges)}]`;u2.exports=NP});var d2=u((_k,h2)=>{var cr=R(),RP=ze(),VP=(e,t)=>{let r=t.edges.map(n=>[cr.transform(cr.create(),n[0],e),cr.transform(cr.create(),n[1],e)]);return RP(r)};h2.exports=VP});var et=u((Wk,p2)=>{p2.exports={calculatePlane:Jn(),clone:Oh(),create:ze(),equals:Nh(),fromPoints:Vh(),fromSides:Ch(),isA:Ih(),reverse:Dh(),toEdges:Yh(),toPolygons:a2(),toString:f2(),transform:d2()}});var w2=u((Uk,x2)=>{var{EPS:m2}=W(),tt=R(),ar=D(),g2=et(),ss=(e,t)=>e===t?e:e<t?ss(t,e):t===1?1:t===0?e:ss(t,e%t),FP=(e,t)=>e*t/ss(e,t),q2=(e,t)=>{let r=e/t.length;if(r===1)return t;let n=tt.fromValues(r,r,r),s=[];return t.forEach(o=>{let i=tt.subtract(tt.create(),o[1],o[0]);tt.divide(i,i,n);let c=o[0];for(let a=1;a<=r;++a){let l=tt.add(tt.create(),c,i);s.push([c,l]),c=l}}),s},v2=m2*m2/2*Math.sin(Math.PI/3),CP=(e,t)=>{let r=g2.toEdges(e),n=g2.toEdges(t);if(r.length!==n.length){let o=FP(r.length,n.length);o!==r.length&&(r=q2(o,r)),o!==n.length&&(n=q2(o,n))}let s=[];return r.forEach((o,i)=>{let c=n[i],a=ar.fromPoints([o[0],o[1],c[1]]),l=ar.measureArea(a);Number.isFinite(l)&&l>v2&&s.push(a);let h=ar.fromPoints([o[0],c[1],c[0]]),f=ar.measureArea(h);Number.isFinite(f)&&f>v2&&s.push(h)}),s};x2.exports=CP});var lr=u((jk,A2)=>{var y2=X(),P2=G(),zP=z(),b2=D(),xe=et(),E2=w2(),IP=(e,t,r)=>{let n=null;return P2.isA(r)&&(n=xe.fromSides(P2.toSides(r))),b2.isA(r)&&(n=xe.fromPoints(b2.toPoints(r))),e===0||e===1?xe.transform(y2.fromTranslation(y2.create(),[0,0,e]),n):null},GP=(e,t)=>{let r={numberOfSlices:2,capStart:!0,capEnd:!0,close:!1,callback:IP},{numberOfSlices:n,capStart:s,capEnd:o,close:i,callback:c}=Object.assign({},r,e);if(n<2)throw new Error("numberOfSlices must be 2 or more");let a=n-1,l=null,h=null,f=null,d=[];for(let q=0;q<n;q++){let g=c(q/a,q,t);if(g){if(!xe.isA(g))throw new Error("the callback function must return slice objects");if(xe.toEdges(g).length===0)throw new Error("the callback function must return slices with one or more edges");f&&(d=d.concat(E2(f,g))),q===0&&(l=g),q===n-1&&(h=g),f=g}}if(o){let q=xe.toPolygons(h);d=d.concat(q)}if(s){xe.reverse(l,l);let q=xe.toPolygons(l);d=d.concat(q)}return!s&&!o&&i&&!xe.equals(h,l)&&(d=d.concat(E2(h,l))),zP.create(d)};A2.exports=GP});var is=u((Kk,M2)=>{var Et=X(),{mirrorX:DP}=je(),At=G(),os=et(),XP=lr(),YP=(e,t)=>{let r={segments:12,startAngle:0,angle:Math.PI*2,overflow:"cap"},{segments:n,startAngle:s,angle:o,overflow:i}=Object.assign({},r,e);if(n<3)throw new Error("segments must be greater then 3");s=Math.abs(s)>Math.PI*2?s%(Math.PI*2):s,o=Math.abs(o)>Math.PI*2?o%(Math.PI*2):o;let c=s+o;if(c=Math.abs(c)>Math.PI*2?c%(Math.PI*2):c,c<s){let x=s;s=c,c=x}let a=c-s;if(a<=0&&(a=Math.PI*2),Math.abs(a)<Math.PI*2){let x=Math.PI*2/n;n=Math.floor(Math.abs(a)/x),Math.abs(a)>n*x&&n++}let l=At.toSides(t);if(l.length===0)throw new Error("the given geometry cannot be empty");let h=l.filter(x=>x[0][0]<0),f=l.filter(x=>x[0][0]>=0);h.length>0&&f.length>0&&i==="cap"&&(h.length>f.length?(l=l.map(x=>{let y=x[0],b=x[1];return y=[Math.min(y[0],0),y[1]],b=[Math.min(b[0],0),b[1]],[y,b]}),t=At.reverse(At.create(l)),t=DP(t)):f.length>=h.length&&(l=l.map(x=>{let y=x[0],b=x[1];return y=[Math.max(y[0],0),y[1]],b=[Math.max(b[0],0),b[1]],[y,b]}),t=At.create(l)));let q=a/n,g=Math.abs(a)<Math.PI*2,p=os.fromSides(At.toSides(t));os.reverse(p,p);let m=Et.create(),v=(x,y,b)=>{let w=q*y+s;return Et.multiply(m,Et.fromZRotation(m,w),Et.fromXRotation(Et.create(),Math.PI/2)),os.transform(m,b)};return e={numberOfSlices:n+1,capStart:g,capEnd:g,close:!g,callback:v},XP(e,p)};M2.exports=YP});var rt=u((Qk,B2)=>{var $P=C(),S2=X(),T2=G(),k2=z(),O2=Z(),ur=(e,...t)=>{if(!Array.isArray(e))throw new Error("angles must be an array");if(t=$P(t),t.length===0)throw new Error("wrong number of arguments");for(e=e.slice();e.length<3;)e.push(0);let r=e[2],n=e[1],s=e[0],o=S2.fromTaitBryanRotation(S2.create(),r,n,s),i=t.map(c=>O2.isA(c)?O2.transform(o,c):T2.isA(c)?T2.transform(o,c):k2.isA(c)?k2.transform(o,c):c);return i.length===1?i[0]:i},LP=(e,...t)=>ur([e,0,0],t),ZP=(e,...t)=>ur([0,e,0],t),HP=(e,...t)=>ur([0,0,e],t);B2.exports={rotate:ur,rotateX:LP,rotateY:ZP,rotateZ:HP}});var Ee=u((Jk,C2)=>{var _P=C(),N2=X(),R2=G(),V2=z(),F2=Z(),fr=(e,...t)=>{if(!Array.isArray(e))throw new Error("offset must be an array");if(t=_P(t),t.length===0)throw new Error("wrong number of arguments");for(e=e.slice();e.length<3;)e.push(0);let r=N2.fromTranslation(N2.create(),e),n=t.map(s=>F2.isA(s)?F2.transform(r,s):R2.isA(s)?R2.transform(r,s):V2.isA(s)?V2.transform(r,s):s);return n.length===1?n[0]:n},WP=(e,...t)=>fr([e,0,0],t),UP=(e,...t)=>fr([0,e,0],t),jP=(e,...t)=>fr([0,0,e],t);C2.exports={translate:fr,translateX:WP,translateY:UP,translateZ:jP}});var I2=u((eO,z2)=>{var KP=is(),{rotate:QP}=rt(),{translate:JP}=Ee(),eb=Xn(),{isGT:cs,isGTE:as}=Q(),tb=e=>{let t={innerRadius:1,innerSegments:32,outerRadius:4,outerSegments:32,innerRotation:0,startAngle:0,outerRotation:Math.PI*2},{innerRadius:r,innerSegments:n,outerRadius:s,outerSegments:o,innerRotation:i,startAngle:c,outerRotation:a}=Object.assign({},t,e);if(!cs(r,0))throw new Error("innerRadius must be greater than zero");if(!as(n,3))throw new Error("innerSegments must be three or more");if(!cs(s,0))throw new Error("outerRadius must be greater than zero");if(!as(o,3))throw new Error("outerSegments must be three or more");if(!as(c,0))throw new Error("startAngle must be positive");if(!cs(a,0))throw new Error("outerRotation must be greater than zero");if(r>=s)throw new Error("inner circle is two large to rotate about the outer circle");let l=eb({radius:r,segments:n});return i!==0&&(l=QP([0,0,i],l)),l=JP([s,0],l),KP({startAngle:c,angle:a,segments:o},l)};z2.exports=tb});var D2=u((tO,G2)=>{G2.exports={arc:Sf(),circle:Xn(),cube:Ff(),cuboid:Yn(),cylinder:Gf(),cylinderElliptic:Zn(),ellipse:Dn(),ellipsoid:Hn(),geodesicSphere:_f(),line:Uf(),polygon:Kf(),polyhedron:_n(),rectangle:Un(),roundedCuboid:oh(),roundedCylinder:ah(),roundedRectangle:hh(),sphere:Qn(),square:mh(),star:vh(),torus:I2()}});var Y2=u((rO,X2)=>{X2.exports={height:14,32:[16],33:[10,5,21,5,7,void 0,5,2,4,1,5,0,6,1,5,2],34:[16,4,21,4,14,void 0,12,21,12,14],35:[21,11,25,4,-7,void 0,17,25,10,-7,void 0,4,12,18,12,void 0,3,6,17,6],36:[20,8,25,8,-4,void 0,12,25,12,-4,void 0,17,18,15,20,12,21,8,21,5,20,3,18,3,16,4,14,5,13,7,12,13,10,15,9,16,8,17,6,17,3,15,1,12,0,8,0,5,1,3,3],37:[24,21,21,3,0,void 0,8,21,10,19,10,17,9,15,7,14,5,14,3,16,3,18,4,20,6,21,8,21,10,20,13,19,16,19,19,20,21,21,void 0,17,7,15,6,14,4,14,2,16,0,18,0,20,1,21,3,21,5,19,7,17,7],38:[26,23,12,23,13,22,14,21,14,20,13,19,11,17,6,15,3,13,1,11,0,7,0,5,1,4,2,3,4,3,6,4,8,5,9,12,13,13,14,14,16,14,18,13,20,11,21,9,20,8,18,8,16,9,13,11,10,16,3,18,1,20,0,22,0,23,1,23,2],39:[10,5,19,4,20,5,21,6,20,6,18,5,16,4,15],40:[14,11,25,9,23,7,20,5,16,4,11,4,7,5,2,7,-2,9,-5,11,-7],41:[14,3,25,5,23,7,20,9,16,10,11,10,7,9,2,7,-2,5,-5,3,-7],42:[16,8,21,8,9,void 0,3,18,13,12,void 0,13,18,3,12],43:[26,13,18,13,0,void 0,4,9,22,9],44:[10,6,1,5,0,4,1,5,2,6,1,6,-1,5,-3,4,-4],45:[26,4,9,22,9],46:[10,5,2,4,1,5,0,6,1,5,2],47:[22,20,25,2,-7],48:[20,9,21,6,20,4,17,3,12,3,9,4,4,6,1,9,0,11,0,14,1,16,4,17,9,17,12,16,17,14,20,11,21,9,21],49:[20,6,17,8,18,11,21,11,0],50:[20,4,16,4,17,5,19,6,20,8,21,12,21,14,20,15,19,16,17,16,15,15,13,13,10,3,0,17,0],51:[20,5,21,16,21,10,13,13,13,15,12,16,11,17,8,17,6,16,3,14,1,11,0,8,0,5,1,4,2,3,4],52:[20,13,21,3,7,18,7,void 0,13,21,13,0],53:[20,15,21,5,21,4,12,5,13,8,14,11,14,14,13,16,11,17,8,17,6,16,3,14,1,11,0,8,0,5,1,4,2,3,4],54:[20,16,18,15,20,12,21,10,21,7,20,5,17,4,12,4,7,5,3,7,1,10,0,11,0,14,1,16,3,17,6,17,7,16,10,14,12,11,13,10,13,7,12,5,10,4,7],55:[20,17,21,7,0,void 0,3,21,17,21],56:[20,8,21,5,20,4,18,4,16,5,14,7,13,11,12,14,11,16,9,17,7,17,4,16,2,15,1,12,0,8,0,5,1,4,2,3,4,3,7,4,9,6,11,9,12,13,13,15,14,16,16,16,18,15,20,12,21,8,21],57:[20,16,14,15,11,13,9,10,8,9,8,6,9,4,11,3,14,3,15,4,18,6,20,9,21,10,21,13,20,15,18,16,14,16,9,15,4,13,1,10,0,8,0,5,1,4,3],58:[10,5,14,4,13,5,12,6,13,5,14,void 0,5,2,4,1,5,0,6,1,5,2],59:[10,5,14,4,13,5,12,6,13,5,14,void 0,6,1,5,0,4,1,5,2,6,1,6,-1,5,-3,4,-4],60:[24,20,18,4,9,20,0],61:[26,4,12,22,12,void 0,4,6,22,6],62:[24,4,18,20,9,4,0],63:[18,3,16,3,17,4,19,5,20,7,21,11,21,13,20,14,19,15,17,15,15,14,13,13,12,9,10,9,7,void 0,9,2,8,1,9,0,10,1,9,2],64:[27,18,13,17,15,15,16,12,16,10,15,9,14,8,11,8,8,9,6,11,5,14,5,16,6,17,8,void 0,12,16,10,14,9,11,9,8,10,6,11,5,void 0,18,16,17,8,17,6,19,5,21,5,23,7,24,10,24,12,23,15,22,17,20,19,18,20,15,21,12,21,9,20,7,19,5,17,4,15,3,12,3,9,4,6,5,4,7,2,9,1,12,0,15,0,18,1,20,2,21,3,void 0,19,16,18,8,18,6,19,5],65:[18,9,21,1,0,void 0,9,21,17,0,void 0,4,7,14,7],66:[21,4,21,4,0,void 0,4,21,13,21,16,20,17,19,18,17,18,15,17,13,16,12,13,11,void 0,4,11,13,11,16,10,17,9,18,7,18,4,17,2,16,1,13,0,4,0],67:[21,18,16,17,18,15,20,13,21,9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5],68:[21,4,21,4,0,void 0,4,21,11,21,14,20,16,18,17,16,18,13,18,8,17,5,16,3,14,1,11,0,4,0],69:[19,4,21,4,0,void 0,4,21,17,21,void 0,4,11,12,11,void 0,4,0,17,0],70:[18,4,21,4,0,void 0,4,21,17,21,void 0,4,11,12,11],71:[21,18,16,17,18,15,20,13,21,9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,18,8,void 0,13,8,18,8],72:[22,4,21,4,0,void 0,18,21,18,0,void 0,4,11,18,11],73:[8,4,21,4,0],74:[16,12,21,12,5,11,2,10,1,8,0,6,0,4,1,3,2,2,5,2,7],75:[21,4,21,4,0,void 0,18,21,4,7,void 0,9,12,18,0],76:[17,4,21,4,0,void 0,4,0,16,0],77:[24,4,21,4,0,void 0,4,21,12,0,void 0,20,21,12,0,void 0,20,21,20,0],78:[22,4,21,4,0,void 0,4,21,18,0,void 0,18,21,18,0],79:[22,9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,19,8,19,13,18,16,17,18,15,20,13,21,9,21],80:[21,4,21,4,0,void 0,4,21,13,21,16,20,17,19,18,17,18,14,17,12,16,11,13,10,4,10],81:[22,9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,19,8,19,13,18,16,17,18,15,20,13,21,9,21,void 0,12,4,18,-2],82:[21,4,21,4,0,void 0,4,21,13,21,16,20,17,19,18,17,18,15,17,13,16,12,13,11,4,11,void 0,11,11,18,0],83:[20,17,18,15,20,12,21,8,21,5,20,3,18,3,16,4,14,5,13,7,12,13,10,15,9,16,8,17,6,17,3,15,1,12,0,8,0,5,1,3,3],84:[16,8,21,8,0,void 0,1,21,15,21],85:[22,4,21,4,6,5,3,7,1,10,0,12,0,15,1,17,3,18,6,18,21],86:[18,1,21,9,0,void 0,17,21,9,0],87:[24,2,21,7,0,void 0,12,21,7,0,void 0,12,21,17,0,void 0,22,21,17,0],88:[20,3,21,17,0,void 0,17,21,3,0],89:[18,1,21,9,11,9,0,void 0,17,21,9,11],90:[20,17,21,3,0,void 0,3,21,17,21,void 0,3,0,17,0],91:[14,4,25,4,-7,void 0,5,25,5,-7,void 0,4,25,11,25,void 0,4,-7,11,-7],92:[14,0,21,14,-3],93:[14,9,25,9,-7,void 0,10,25,10,-7,void 0,3,25,10,25,void 0,3,-7,10,-7],94:[16,6,15,8,18,10,15,void 0,3,12,8,17,13,12,void 0,8,17,8,0],95:[16,0,-2,16,-2],96:[10,6,21,5,20,4,18,4,16,5,15,6,16,5,17],97:[19,15,14,15,0,void 0,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3],98:[19,4,21,4,0,void 0,4,11,6,13,8,14,11,14,13,13,15,11,16,8,16,6,15,3,13,1,11,0,8,0,6,1,4,3],99:[18,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3],100:[19,15,21,15,0,void 0,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3],101:[18,3,8,15,8,15,10,14,12,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3],102:[12,10,21,8,21,6,20,5,17,5,0,void 0,2,14,9,14],103:[19,15,14,15,-2,14,-5,13,-6,11,-7,8,-7,6,-6,void 0,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3],104:[19,4,21,4,0,void 0,4,10,7,13,9,14,12,14,14,13,15,10,15,0],105:[8,3,21,4,20,5,21,4,22,3,21,void 0,4,14,4,0],106:[10,5,21,6,20,7,21,6,22,5,21,void 0,6,14,6,-3,5,-6,3,-7,1,-7],107:[17,4,21,4,0,void 0,14,14,4,4,void 0,8,8,15,0],108:[8,4,21,4,0],109:[30,4,14,4,0,void 0,4,10,7,13,9,14,12,14,14,13,15,10,15,0,void 0,15,10,18,13,20,14,23,14,25,13,26,10,26,0],110:[19,4,14,4,0,void 0,4,10,7,13,9,14,12,14,14,13,15,10,15,0],111:[19,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3,16,6,16,8,15,11,13,13,11,14,8,14],112:[19,4,14,4,-7,void 0,4,11,6,13,8,14,11,14,13,13,15,11,16,8,16,6,15,3,13,1,11,0,8,0,6,1,4,3],113:[19,15,14,15,-7,void 0,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3],114:[13,4,14,4,0,void 0,4,8,5,11,7,13,9,14,12,14],115:[17,14,11,13,13,10,14,7,14,4,13,3,11,4,9,6,8,11,7,13,6,14,4,14,3,13,1,10,0,7,0,4,1,3,3],116:[12,5,21,5,4,6,1,8,0,10,0,void 0,2,14,9,14],117:[19,4,14,4,4,5,1,7,0,10,0,12,1,15,4,void 0,15,14,15,0],118:[16,2,14,8,0,void 0,14,14,8,0],119:[22,3,14,7,0,void 0,11,14,7,0,void 0,11,14,15,0,void 0,19,14,15,0],120:[17,3,14,14,0,void 0,14,14,3,0],121:[16,2,14,8,0,void 0,14,14,8,0,6,-4,4,-6,2,-7,1,-7],122:[17,14,14,3,0,void 0,3,14,14,14,void 0,3,0,14,0],123:[14,9,25,7,24,6,23,5,21,5,19,6,17,7,16,8,14,8,12,6,10,void 0,7,24,6,22,6,20,7,18,8,17,9,15,9,13,8,11,4,9,8,7,9,5,9,3,8,1,7,0,6,-2,6,-4,7,-6,void 0,6,8,8,6,8,4,7,2,6,1,5,-1,5,-3,6,-5,7,-6,9,-7],124:[8,4,25,4,-7],125:[14,5,25,7,24,8,23,9,21,9,19,8,17,7,16,6,14,6,12,8,10,void 0,7,24,8,22,8,20,7,18,6,17,5,15,5,13,6,11,10,9,6,7,5,5,5,3,6,1,7,0,8,-2,8,-4,7,-6,void 0,8,8,6,6,6,4,7,2,8,1,9,-1,9,-3,8,-5,7,-6,5,-7],126:[24,3,6,3,8,4,11,6,12,8,12,10,11,14,8,16,7,18,7,20,8,21,10,void 0,3,8,4,10,6,11,8,11,10,10,14,7,16,6,18,6,20,7,21,10,21,12]}});var ls=u((nO,$2)=>{var rb=Y2(),nb={xOffset:0,yOffset:0,input:"?",align:"left",font:rb,height:14,lineSpacing:2.142857142857143,letterSpacing:1,extrudeOffset:0},sb=(e,t)=>{!t&&typeof e=="string"&&(e={input:e}),e=e||{};let r=Object.assign({},nb,e);return r.input=t||r.input,r};$2.exports=sb});var us=u((sO,L2)=>{var ob=ls(),ib=(e,t)=>{let{xOffset:r,yOffset:n,input:s,font:o,height:i,extrudeOffset:c}=ob(e,t),a=s.charCodeAt(0);(!a||!o[a])&&(a=63);let l=[].concat(o[a]),h=(i-c)/o.height,f=c/2,d=l.shift()*h,q=[],g=[];for(let p=0,m=l.length;p<m;p+=2){let v=h*l[p]+r,x=h*l[p+1]+n+f;if(l[p]!==void 0){g.push([v,x]);continue}q.push(g),g=[],p--}return g.length&&q.push(g),{width:d,height:i,segments:q}};L2.exports=ib});var _2=u((oO,H2)=>{var cb=us(),ab=ls(),Z2=(e,t)=>{let{x:r,y:n}=Object.assign({x:0,y:0},e||{}),s=t.segments,o=null,i=null;for(let c=0,a=s.length;c<a;c++){o=s[c];for(let l=0,h=o.length;l<h;l++)i=o[l],o[l]=[i[0]+r,i[1]+n]}return t},lb=(e,t)=>{let{xOffset:r,yOffset:n,input:s,font:o,height:i,align:c,extrudeOffset:a,lineSpacing:l,letterSpacing:h}=ab(e,t),[f,d]=[r,n],[q,g,p,m,v,x]=[],y={width:0,segments:[]},b=[],w=[],E=0,P=f,k=()=>{b.push(y),E=Math.max(E,y.width),y={width:0,segments:[]}};for(q=0,g=s.length;q<g;q++){if(p=s[q],m=cb({xOffset:f,yOffset:d,font:o,height:i,extrudeOffset:a},p),p===`
`){f=P,d-=m.height*l,k();continue}v=m.width*h,y.width+=v,f+=v,p!==" "&&(y.segments=y.segments.concat(m.segments))}for(y.segments.length&&k(),q=0,g=b.length;q<g;q++)y=b[q],E>y.width&&(x=E-y.width,c==="right"?y=Z2({x},y):c==="center"&&(y=Z2({x:x/2},y))),w=w.concat(y.segments);return w};H2.exports=lb});var U2=u((iO,W2)=>{W2.exports={vectorChar:us(),vectorText:_2()}});var nt=u((cO,j2)=>{var ub=G(),fb=z(),hb=Z(),db=e=>{let t;return e.forEach(r=>{let n=0;if(ub.isA(r)&&(n=1),fb.isA(r)&&(n=2),hb.isA(r)&&(n=3),t&&n!==t)return!1;t=n}),!0};j2.exports=db});var Q2=u((aO,K2)=>{var pb=e=>e*.017453292519943295;K2.exports=pb});var fs=u((lO,J2)=>{var mb=(e,t)=>e-t;J2.exports=mb});var td=u((uO,ed)=>{var gb=(e,t,r)=>{let n=0,s=e.length;for(;s>n;){let o=Math.floor((n+s)/2),i=e[o];r(t,i)>0?n=o+1:s=o}e.splice(n,0,t)};ed.exports=gb});var nd=u((fO,rd)=>{var qb=(e,t,r)=>{let n=t>0?e*2*Math.PI/t:0,s=r>0?Math.PI*2/r:0;return Math.ceil(Math.max(n,s,4))};rd.exports=qb});var od=u((hO,sd)=>{var vb=e=>e*57.29577951308232;sd.exports=vb});var hs=u((dO,id)=>{id.exports={areAllShapesTheSameType:nt(),degToRad:Q2(),flatten:C(),fnNumberSort:fs(),insertSorted:td(),radiusToSegments:nd(),radToDeg:od()}});var hr=u((pO,ad)=>{var cd=I(),xb=G(),wb=(e,t)=>{if(t.vertices.length<4)return null;let r=[],n=t.vertices.filter((i,c)=>i[2]>0?(r.push(c),!0):!1);if(n.length!==2)throw new Error("Assertion failed: fromFakePolygon: not enough points found");let s=n.map(i=>{let c=Math.round(i[0]/e)*e+0,a=Math.round(i[1]/e)*e+0;return cd.fromValues(c,a)});if(cd.equals(s[0],s[1]))return null;let o=r[1]-r[0];if(o===1||o===3)o===1&&s.reverse();else throw new Error("Assertion failed: fromFakePolygon: unknown index ordering");return s},yb=(e,t)=>{let r=t.map(n=>wb(e,n)).filter(n=>n!==null);return xb.create(r)};ad.exports=yb});var dr=u((mO,ld)=>{var Ae=R(),Pb=G(),bb=z(),Eb=D(),Ab=(e,t,r)=>{let n=[Ae.fromVec2(Ae.create(),r[0],e),Ae.fromVec2(Ae.create(),r[1],e),Ae.fromVec2(Ae.create(),r[1],t),Ae.fromVec2(Ae.create(),r[0],t)];return Eb.fromPoints(n)},Mb=(e,t)=>{let n=Pb.toSides(t).map(o=>Ab(e.z0,e.z1,o));return bb.create(n)};ld.exports=Mb});var hd=u((gO,fd)=>{var ud=X(),Sb=I(),K=R(),Ie=function(e,t){arguments.length<2&&(t=K.orthogonal(K.create(),e)),this.v=K.normalize(K.create(),K.cross(K.create(),e,t)),this.u=K.cross(K.create(),this.v,e),this.plane=e,this.planeorigin=K.scale(K.create(),e,e[3])};Ie.GetCartesian=function(e,t){let r=e+"/"+t,n,s;if(r==="X/Y")n=[0,0,1],s=[1,0,0];else if(r==="Y/-X")n=[0,0,1],s=[0,1,0];else if(r==="-X/-Y")n=[0,0,1],s=[-1,0,0];else if(r==="-Y/X")n=[0,0,1],s=[0,-1,0];else if(r==="-X/Y")n=[0,0,-1],s=[-1,0,0];else if(r==="-Y/-X")n=[0,0,-1],s=[0,-1,0];else if(r==="X/-Y")n=[0,0,-1],s=[1,0,0];else if(r==="Y/X")n=[0,0,-1],s=[0,1,0];else if(r==="X/Z")n=[0,-1,0],s=[1,0,0];else if(r==="Z/-X")n=[0,-1,0],s=[0,0,1];else if(r==="-X/-Z")n=[0,-1,0],s=[-1,0,0];else if(r==="-Z/X")n=[0,-1,0],s=[0,0,-1];else if(r==="-X/Z")n=[0,1,0],s=[-1,0,0];else if(r==="-Z/-X")n=[0,1,0],s=[0,0,-1];else if(r==="X/-Z")n=[0,1,0],s=[1,0,0];else if(r==="Z/X")n=[0,1,0],s=[0,0,1];else if(r==="Y/Z")n=[1,0,0],s=[0,1,0];else if(r==="Z/-Y")n=[1,0,0],s=[0,0,1];else if(r==="-Y/-Z")n=[1,0,0],s=[0,-1,0];else if(r==="-Z/Y")n=[1,0,0],s=[0,0,-1];else if(r==="-Y/Z")n=[-1,0,0],s=[0,-1,0];else if(r==="-Z/-Y")n=[-1,0,0],s=[0,0,-1];else if(r==="Y/-Z")n=[-1,0,0],s=[0,1,0];else if(r==="Z/Y")n=[-1,0,0],s=[0,0,1];else throw new Error("OrthoNormalBasis.GetCartesian: invalid combination of axis identifiers. Should pass two string arguments from [X,Y,Z,-X,-Y,-Z], being two different axes.");return new Ie(new Plane(new Vector3D(n),0),new Vector3D(s))};Ie.Z0Plane=function(){let e=new Plane(new Vector3D([0,0,1]),0);return new Ie(e,new Vector3D([1,0,0]))};Ie.prototype={getProjectionMatrix:function(){return ud.fromValues(this.u[0],this.v[0],this.plane[0],0,this.u[1],this.v[1],this.plane[1],0,this.u[2],this.v[2],this.plane[2],0,0,0,-this.plane[3],1)},getInverseProjectionMatrix:function(){let e=K.scale(K.create(),this.plane,this.plane[3]);return ud.fromValues(this.u[0],this.u[1],this.u[2],0,this.v[0],this.v[1],this.v[2],0,this.plane[0],this.plane[1],this.plane[2],0,e[0],e[1],e[2],1)},to2D:function(e){return Sb.fromValues(K.dot(e,this.u),K.dot(e,this.v))},to3D:function(e){let t=K.scale(K.create(),this.u,e[0]),r=K.scale(K.create(),this.v,e[1]),n=K.add(t,t,this.planeorigin);return K.add(r,r,n)},line3Dto2D:function(e){let t=e.point,r=e.direction.plus(t),n=this.to2D(t),s=this.to2D(r);return Line2D.fromPoints(n,s)},line2Dto3D:function(e){let t=e.origin(),r=e.direction().plus(t),n=this.to3D(t),s=this.to3D(r);return Line3D.fromPoints(n,s)},transform:function(e){let t=this.plane.transform(e),r=this.u.transform(e),n=new Vector3D(0,0,0).transform(e),s=r.minus(n);return new Ie(t,s)}};fd.exports=Ie});var md=u((qO,pd)=>{var{EPS:we}=W(),Me=Zt(),fe=I(),Tb=hd(),st=bn(),{insertSorted:kb,fnNumberSort:Ob}=hs(),dd=D(),Bb=e=>{if(e.length<2)return e;let t=[],r=e.length,n=dd.plane(e[0]),s=new Tb(n),o=[],i=[],c={},a={},l={},h=1/we*10;for(let g=0;g<r;g++){let p=e[g],m=[],v=p.vertices.length,x=-1;if(v>0){let y,b;for(let w=0;w<v;w++){let E=s.to2D(p.vertices[w]),P=Math.floor(E[1]*h),k;P in l?k=l[P]:P+1 in l?k=l[P+1]:P-1 in l?k=l[P-1]:(k=E[1],l[P]=E[1]),E=fe.fromValues(E[0],k),m.push(E);let A=E[1];(w===0||A<y)&&(y=A,x=w),(w===0||A>b)&&(b=A),A in a||(a[A]={}),a[A][g]=!0}y>=b?(m=[],v=0,x=-1):(y in c||(c[y]=[]),c[y].push(g))}m.reverse(),x=v-x-1,o.push(m),i.push(x)}let f=[];for(let g in a)f.push(g);f.sort(Ob);let d=[],q=[];for(let g=0;g<f.length;g++){let p=[],m=f[g],v=Number(m),x=a[m];for(let b=0;b<d.length;++b){let w=d[b],E=w.polygonindex;if(x[E]){let P=o[E],k=P.length,A=w.leftvertexindex,M=w.rightvertexindex;for(;;){let T=A+1;if(T>=k&&(T=0),P[T][1]!==v)break;A=T}let S=M-1;if(S<0&&(S=k-1),P[S][1]===v&&(M=S),A!==w.leftvertexindex&&A===M)d.splice(b,1),--b;else{w.leftvertexindex=A,w.rightvertexindex=M,w.topleft=P[A],w.topright=P[M];let T=A+1;T>=k&&(T=0),w.bottomleft=P[T];let F=M-1;F<0&&(F=k-1),w.bottomright=P[F]}}}let y;if(g>=f.length-1)d=[],y=null;else{y=Number(f[g+1]);let b=.5*(v+y),w=c[m];for(let E in w){let P=w[E],k=o[P],A=k.length,M=i[P],S=M;for(;;){let B=S+1;if(B>=A&&(B=0),k[B][1]!==v||B===M)break;S=B}let T=M;for(;;){let B=T-1;if(B<0&&(B=A-1),k[B][1]!==v||B===S)break;T=B}let F=S+1;F>=A&&(F=0);let N=T-1;N<0&&(N=A-1);let $={polygonindex:P,leftvertexindex:S,rightvertexindex:T,topleft:k[S],topright:k[T],bottomleft:k[F],bottomright:k[N]};kb(d,$,(B,J)=>{let ne=st(B.topleft,B.bottomleft,b),ae=st(J.topleft,J.bottomleft,b);return ne>ae?1:ne<ae?-1:0})}}for(let b in d){let w=d[b],E=st(w.topleft,w.bottomleft,v),P=fe.fromValues(E,v);E=st(w.topright,w.bottomright,v);let k=fe.fromValues(E,v);E=st(w.topleft,w.bottomleft,y);let A=fe.fromValues(E,y);E=st(w.topright,w.bottomright,y);let M=fe.fromValues(E,y),S={topleft:P,topright:k,bottomleft:A,bottomright:M,leftline:Me.fromPoints(Me.create(),P,A),rightline:Me.fromPoints(Me.create(),M,k)};if(p.length>0){let T=p[p.length-1],F=fe.distance(S.topleft,T.topright),N=fe.distance(S.bottomleft,T.bottomright);F<we&&N<we&&(S.topleft=T.topleft,S.leftline=T.leftline,S.bottomleft=T.bottomleft,p.splice(p.length-1,1))}p.push(S)}if(g>0){let b={},w={};for(let E=0;E<p.length;E++){let P=p[E];for(let k=0;k<q.length;k++)if(!w[k]){let A=q[k];if(fe.distance(A.bottomleft,P.topleft)<we&&fe.distance(A.bottomright,P.topright)<we){w[k]=!0;let M=Me.direction(P.leftline),S=Me.direction(A.leftline),T=M[0]-S[0],F=Me.direction(P.rightline),N=Me.direction(A.rightline),$=F[0]-N[0],B=Math.abs(T)<we,J=Math.abs($)<we,ne=B||T>=0,ae=J||$>=0;ne&&ae&&(P.outpolygon=A.outpolygon,P.leftlinecontinues=B,P.rightlinecontinues=J,b[k]=!0);break}}}for(let E=0;E<q.length;E++)if(!b[E]){let P=q[E];P.outpolygon.rightpoints.push(P.bottomright),fe.distance(P.bottomright,P.bottomleft)>we&&P.outpolygon.leftpoints.push(P.bottomleft),P.outpolygon.leftpoints.reverse();let A=P.outpolygon.rightpoints.concat(P.outpolygon.leftpoints).map(S=>s.to3D(S)),M=dd.fromPointsAndPlane(A,n);M.vertices.length&&t.push(M)}}for(let b=0;b<p.length;b++){let w=p[b];w.outpolygon?(w.leftlinecontinues||w.outpolygon.leftpoints.push(w.topleft),w.rightlinecontinues||w.outpolygon.rightpoints.push(w.topright)):(w.outpolygon={leftpoints:[],rightpoints:[]},w.outpolygon.leftpoints.push(w.topleft),fe.distance(w.topleft,w.topright)>we&&w.outpolygon.rightpoints.push(w.topright))}q=p}return t};pd.exports=Bb});var Mt=u((vO,vd)=>{var gd=z(),qd=D(),Nb=md(),ds=1e-13,Rb=(e,t)=>Math.abs(e[0]-t[0])<=ds&&Math.abs(e[1]-t[1])<=ds&&Math.abs(e[2]-t[2])<=ds,Vb=(e,t)=>Math.abs(e[3]-t[3])<15e-8?Rb(e,t):!1,Fb=e=>{if(e.isRetesselated)return e;let t=gd.toPolygons(e),r=[];t.forEach(o=>{let i=r.find(c=>Vb(c[0],qd.plane(o)));i?i[1].push(o):r.push([qd.plane(o),[o]])});let n=[];r.forEach(o=>{let i=o[1],c=Nb(i);n=n.concat(c)});let s=gd.create(n);return s.isRetesselated=!0,s};vd.exports=Fb});var ps=u((xO,xd)=>{var Cb=C(),zb=Mt(),Ib=ts(),Gb=(...e)=>{e=Cb(e);let t=e.shift();return e.forEach(r=>{t=Ib(t,r)}),t=zb(t),t};xd.exports=Gb});var yd=u((wO,wd)=>{var Db=C(),Xb=z(),Yb=qe(),$b=hr(),Lb=dr(),Zb=ps(),Hb=(...e)=>{e=Db(e);let t=e.map(s=>Lb({z0:-1,z1:1},s)),r=Zb(t),n=Yb(r);return $b(n,Xb.toPolygons(r))};wd.exports=Hb});var bd=u((yO,Pd)=>{var _b=C(),Wb=nt(),Ub=G(),jb=z(),Kb=yd(),Qb=ps(),Jb=(...e)=>{if(e=_b(e),e.length===0)throw new Error("wrong number of arguments");if(!Wb(e))throw new Error("only intersect of the types are supported");let t=e[0];return Ub.isA(t)?Kb(e):jb.isA(t)?Qb(e):t};Pd.exports=Jb});var Md=u((PO,Ad)=>{var ms=R(),eE=qe(),Ed=z(),tE=e=>e.sort((t,r)=>t-r).filter((t,r,n)=>!r||t!==n[r-1]),rE=(e,t,r)=>{let n=`${t}`,s=e.get(n);s===void 0?e.set(n,[r]):s.push(r)},nE=(e,t)=>{let r=`${t}`;return e.get(r)},sE=e=>{let t=eE(e),r=Ed.toPolygons(e),n=r.length,s=new Map,o=ms.create();r.forEach((h,f)=>{h.vertices.forEach(d=>{rE(s,ms.snap(o,d,t),f)})});let i=r.map(h=>{let f=[];return h.vertices.forEach(d=>{f=f.concat(nE(s,ms.snap(o,d,t)))}),{e:1,d:tE(f)}});s.clear();let c=0,a=i.length;for(let h=0;h<a;h++){let f=i[h];if(f.e>0){let d=new Array(n);d[h]=!0;do c=0,d.forEach((q,g)=>{let p=i[g];if(p.e>0){p.e=-1;for(let m=0;m<p.d.length;m++)d[p.d[m]]=!0;c++}});while(c>0);f.indexes=d}}let l=[];for(let h=0;h<a;h++)if(i[h].indexes){let f=[];i[h].indexes.forEach((d,q)=>f.push(r[q])),l.push(Ed.create(f))}return l};Ad.exports=sE});var Td=u((bO,Sd)=>{var oE=C(),iE=z(),cE=Md(),aE=(...e)=>{if(e=oE(e),e.length===0)throw new Error("wrong number of arguments");let t=e.map(r=>iE.isA(r)?cE(r):r);return t.length===1?t[0]:t};Sd.exports=aE});var Bd=u((EO,Od)=>{var pr=z(),lE=tr(),{Tree:kd}=or(),uE=(e,t)=>{if(!lE(e,t))return pr.clone(e);let r=new kd(pr.toPolygons(e)),n=new kd(pr.toPolygons(t));r.invert(),r.clipTo(n),n.clipTo(r,!0),r.addPolygons(n.allPolygons()),r.invert();let s=r.allPolygons();return pr.create(s)};Od.exports=uE});var gs=u((AO,Nd)=>{var fE=C(),hE=Mt(),dE=Bd(),pE=(...e)=>{e=fE(e);let t=e.shift();return e.forEach(r=>{t=dE(t,r)}),t=hE(t),t};Nd.exports=pE});var Vd=u((MO,Rd)=>{var mE=C(),gE=z(),qE=qe(),vE=hr(),xE=dr(),wE=gs(),yE=(...e)=>{e=mE(e);let t=e.map(s=>xE({z0:-1,z1:1},s)),r=wE(t),n=qE(r);return vE(n,gE.toPolygons(r))};Rd.exports=yE});var Cd=u((SO,Fd)=>{var PE=C(),bE=nt(),EE=G(),AE=z(),ME=Vd(),SE=gs(),TE=(...e)=>{if(e=PE(e),e.length===0)throw new Error("wrong number of arguments");if(!bE(e))throw new Error("only subtract of the types are supported");let t=e[0];return EE.isA(t)?ME(e):AE.isA(t)?SE(e):t};Fd.exports=TE});var qs=u((TO,Id)=>{var ot=z(),kE=tr(),{Tree:zd}=or(),OE=(e,t)=>{if(!kE(e,t))return BE(e,t);let r=new zd(ot.toPolygons(e)),n=new zd(ot.toPolygons(t));r.clipTo(n,!1),n.clipTo(r),n.invert(),n.clipTo(r),n.invert();let s=r.allPolygons().concat(n.allPolygons());return ot.create(s)},BE=(e,t)=>{let r=ot.toPolygons(e);return r=r.concat(ot.toPolygons(t)),ot.create(r)};Id.exports=OE});var mr=u((kO,Gd)=>{var NE=C(),RE=Mt(),VE=qs(),FE=(...e)=>{e=NE(e);let t;for(t=1;t<e.length;t+=2)e.push(VE(e[t-1],e[t]));let r=e[t-1];return r=RE(r),r};Gd.exports=FE});var vs=u((OO,Dd)=>{var CE=C(),zE=z(),IE=qe(),GE=hr(),DE=dr(),XE=mr(),YE=(...e)=>{e=CE(e);let t=e.map(s=>DE({z0:-1,z1:1},s)),r=XE(t),n=IE(r);return GE(n,zE.toPolygons(r))};Dd.exports=YE});var gr=u((BO,Xd)=>{var $E=C(),LE=nt(),ZE=G(),HE=z(),_E=vs(),WE=mr(),UE=(...e)=>{if(e=$E(e),e.length===0)throw new Error("wrong number of arguments");if(!LE(e))throw new Error("only unions of the same type are supported");let t=e[0];return ZE.isA(t)?_E(e):HE.isA(t)?WE(e):t};Xd.exports=UE});var $d=u((NO,Yd)=>{Yd.exports={intersect:bd(),scission:Td(),subtract:Cd(),union:gr()}});var Tt=u((RO,Zd)=>{var{EPS:jE}=W(),Ld=En(),St=Zt(),_=I(),KE=vt(),QE=(e,t)=>{let r={delta:1,corners:"edge",closed:!1,segments:16},{delta:n,corners:s,closed:o,segments:i}=Object.assign({},r,e);if(Math.abs(n)<jE)return t;let c=e.closed?KE(t):1;c===0&&(c=1);let a=c>0&&n>=0||c<0&&n<0;n=Math.abs(n);let l=null,h=[],f=[],d=_.create(),q=t.length;for(let g=0;g<q;g++){let p=(g+1)%q,m=t[g],v=t[p];a?_.subtract(d,m,v):_.subtract(d,v,m),_.normal(d,d),_.normalize(d,d),_.scale(d,d,n);let x=_.add(_.create(),m,d),y=_.add(_.create(),v,d),b=[x,y];if(l!=null&&(o||!o&&p!==0)){let w=Ld(l[0],l[1],b[0],b[1]);w?(h.pop(),b[0]=w):f.push({c:m,s0:l,s1:b})}l=[x,y],!(p===0&&!o)&&(h.push(b[0]),h.push(b[1]))}if(o&&l!=null){let g=h[0],p=h[1],m=Ld(l[0],l[1],g,p);if(m)h[0]=m,h.pop();else{let v=t[0],x=[g,p];f.push({c:v,s0:l,s1:x})}}if(s==="edge"){let g=St.create(),p=St.create();f.forEach(m=>{St.fromPoints(g,m.s0[0],m.s0[1]),St.fromPoints(p,m.s1[0],m.s1[1]);let v=St.intersectPointOfLines(g,p);if(Number.isFinite(v[0])&&Number.isFinite(v[1])){let x=m.s0[1],y=h.findIndex(b=>_.equals(x,b));y=(y+1)%h.length,h.splice(y,0,v)}else{let x=m.s1[0],y=h.findIndex(b=>_.equals(x,b));h.splice(y,1)}})}if(s==="round"){let g=Math.floor(i/4),p=_.create();f.forEach(m=>{let v=_.angle(_.subtract(p,m.s1[0],m.c));if(v-=_.angle(_.subtract(p,m.s0[1],m.c)),a&&v<0&&(v=v+Math.PI,v<0&&(v=v+Math.PI)),!a&&v>0&&(v=v-Math.PI,v>0&&(v=v-Math.PI)),v!==0){g=Math.floor(i*(Math.abs(v)/(2*Math.PI)));let x=v/g,y=_.angle(_.subtract(p,m.s0[1],m.c)),b=[];for(let w=1;w<g;w++){let E=y+x*w,P=_.fromAngleRadians(_.create(),E);_.scale(P,P,n),_.add(P,P,m.c),b.push(P)}if(b.length>0){let w=m.s0[1],E=h.findIndex(P=>_.equals(w,P));E=(E+1)%h.length,h.splice(E,0,...b)}}else{let x=m.s1[0],y=h.findIndex(b=>_.equals(x,b));h.splice(y,1)}})}return h};Zd.exports=QE});var _d=u((VO,Hd)=>{var qr=G(),JE=Tt(),e8=(e,t)=>{let r={delta:1,corners:"edge",segments:16},{delta:n,corners:s,segments:o}=Object.assign({},r,e);if(!(s==="edge"||s==="chamfer"||s==="round"))throw new Error('corners must be "edge", "chamfer", or "round"');let a=qr.toOutlines(t).map(l=>(e={delta:n,corners:s,closed:!0,segments:o},JE(e,l))).reduce((l,h)=>l.concat(qr.toSides(qr.fromPoints(h))),[]);return qr.create(a)};Hd.exports=e8});var jd=u((FO,Ud)=>{var Wd=X(),t8=R(),r8=z(),kt=D(),n8=(e,t)=>{t8.dot(kt.plane(t),e)>0&&(t=kt.invert(t));let n=[t],s=kt.transform(Wd.fromTranslation(Wd.create(),e),t),o=t.vertices.length;for(let i=0;i<o;i++){let c=[],a=i<o-1?i+1:0;c.push(t.vertices[i]),c.push(s.vertices[i]),c.push(s.vertices[a]),c.push(t.vertices[a]);let l=kt.fromPoints(c);n.push(l)}return n.push(kt.invert(s)),r8.create(n)};Ud.exports=n8});var Jd=u((CO,Qd)=>{var{EPS:s8}=W(),Kd=X(),Y=R(),o8=fs(),xs=z(),Ge=D(),i8=Qn(),c8=Mt(),ws=qs(),a8=jd(),l8=(e,t,r)=>{let n=e.findIndex(o=>Y.equals(o[0],t));if(n<0){let o=[t,[r]];return e.push(o),e.length}return e[n][1].push(r),n},u8=(e,t,r)=>{let n=e.findIndex(o=>Y.equals(o[0],t[0])&&Y.equals(o[1],t[1])||Y.equals(o[0],t[1])&&Y.equals(o[1],t[0]));if(n<0){let o=[t,[r]];return e.push(o),e.length}return e[n][1].push(r),n},ys=(e,t)=>{let r=e.findIndex(n=>n===t);return r<0?(e.push(t),e.length):r},f8=(e,t)=>{let r={delta:1,segments:12},{delta:n,segments:s}=Object.assign({},r,e),o=xs.create(),i=[],c=[],a=Y.create(),l=Y.create();return xs.toPolygons(t).forEach((f,d)=>{let q=Y.scale(Y.create(),Ge.plane(f),2*n),g=Ge.transform(Kd.fromTranslation(Kd.create(),Y.scale(Y.create(),q,-.5)),f),p=a8(q,g);o=ws(o,p);let m=f.vertices;for(let v=0;v<m.length;v++){l8(i,m[v],Ge.plane(f));let x=(v+1)%m.length,y=[m[v],m[x]];u8(c,y,Ge.plane(f))}}),c.forEach(f=>{let d=f[0],q=f[1],g=d[0],p=d[1],m=Y.subtract(Y.create(),p,g);Y.normalize(m,m);let v=q[0],x=Y.cross(Y.create(),v,m),y=[];for(let S=0;S<s;S++)ys(y,S*Math.PI*2/s);for(let S=0,T=q.length;S<T;S++){let F=q[S],N=Y.dot(x,F),$=Y.dot(v,F),B=Math.atan2(N,$);B<0&&(B+=Math.PI*2),ys(y,B),B=Math.atan2(-N,-$),B<0&&(B+=Math.PI*2),ys(y,B)}y=y.sort(o8);let b=y.length,w,E,P=[],k=[],A=[];for(let S=-1;S<b;S++){let T=y[S<0?S+b:S],F=Math.sin(T),N=Math.cos(T);Y.scale(a,v,N*n),Y.scale(l,x,F*n),Y.add(a,a,l);let $=Y.add(Y.create(),g,a),B=Y.add(Y.create(),p,a),J=!1;if(S>=0&&Y.distance($,w)<s8&&(J=!0),!J){if(S>=0){P.push($),k.push(B);let ne=[E,B,$,w],ae=Ge.fromPoints(ne);A.push(ae)}w=$,E=B}}k.reverse(),A.push(Ge.fromPoints(P)),A.push(Ge.fromPoints(k));let M=xs.create(A);o=ws(o,M)}),i.forEach(f=>{let d=f[0],q=f[1],g=q[0],p=null,m=0;for(let b=1;b<q.length;b++){let w=q[b],E=Y.cross(a,g,w),P=Y.length(E);P>.05&&P>m&&(m=P,p=w)}p||(p=Y.orthogonal(a,g));let v=Y.cross(a,g,p);Y.normalize(v,v);let x=Y.cross(l,v,g),y=i8({center:[d[0],d[1],d[2]],radius:n,segments:s,axes:[g,v,x]});o=ws(o,y)}),c8(o)};Qd.exports=f8});var tp=u((zO,ep)=>{var h8=z(),d8=gr(),p8=Jd(),m8=(e,t)=>{let r={delta:1,corners:"round",segments:12},{delta:n,corners:s,segments:o}=Object.assign({},r,e);if(s!=="round")throw new Error('corners must be "round" for 3D geometries');if(h8.toPolygons(t).length===0)throw new Error("the given geometry cannot be empty");e={delta:n,corners:s,segments:o};let c=p8(e,t);return d8(t,c)};ep.exports=m8});var sp=u((IO,np)=>{var g8=vt(),ce=I(),it=G(),Ot=Z(),rp=Tt(),q8=e=>{let{external:t,internal:r}=e;g8(t)<0?t=t.reverse():r=r.reverse();let n=Ot.fromPoints({closed:!0},t),s=Ot.fromPoints({closed:!0},r),o=it.toSides(it.fromPoints(Ot.toPoints(n))),i=it.toSides(it.fromPoints(Ot.toPoints(s)));return o.push(...i),it.create(o)},v8=(e,t,r,n)=>{let{points:s,external:o,internal:i}=e,c=Math.floor(t/2),a=[],l=[];if(r==="round"&&c>0){let f=Math.PI/c,d=s[s.length-1],q=ce.angle(ce.subtract(ce.create(),o[o.length-1],d)),g=s[0],p=ce.angle(ce.subtract(ce.create(),i[0],g));for(let m=1;m<c;m++){let v=q+f*m,x=ce.fromAngleRadians(ce.create(),v);ce.scale(x,x,n),ce.add(x,x,d),a.push(x),v=p+f*m,x=ce.fromAngleRadians(ce.create(),v),ce.scale(x,x,n),ce.add(x,x,g),l.push(x)}}let h=[];return h.push(...o,...a,...i.reverse(),...l),it.fromPoints(h)},x8=(e,t)=>{e=Object.assign({},{delta:1,corners:"edge",segments:16},e);let{delta:n,corners:s,segments:o}=e;if(n<=0)throw new Error("the given delta must be positive for paths");if(!(s==="edge"||s==="chamfer"||s==="round"))throw new Error('corners must be "edge", "chamfer", or "round"');let i=t.isClosed,c=Ot.toPoints(t);if(c.length===0)throw new Error("the given geometry cannot be empty");let a={points:c,external:rp({delta:n,corners:s,segments:o,closed:i},c),internal:rp({delta:-n,corners:s,segments:o,closed:i},c)};return t.isClosed?q8(a):v8(a,o,s,n)};np.exports=x8});var vr=u((GO,op)=>{var w8=C(),y8=G(),P8=z(),b8=Z(),E8=_d(),A8=tp(),M8=sp(),S8=(e,...t)=>{if(t=w8(t),t.length===0)throw new Error("wrong number of arguments");let r=t.map(n=>b8.isA(n)?M8(e,n):y8.isA(n)?E8(e,n):P8.isA(n)?A8(e,n):n);return r.length===1?r[0]:r};op.exports=S8});var ap=u((DO,cp)=>{var xr=G(),ip=gn(),T8=Tt(),k8=(e,t)=>{let r={delta:1,corners:"edge",segments:0},{delta:n,corners:s,segments:o}=Object.assign({},r,e);if(!(s==="edge"||s==="chamfer"||s==="round"))throw new Error('corners must be "edge", "chamfer", or "round"');let i=xr.toOutlines(t),a=i.map(l=>(e={delta:i.reduce((d,q)=>d+ip.arePointsInside(l,ip.create(q)),0)%2==0?n:-n,corners:s,closed:!0,segments:o},T8(e,l))).reduce((l,h)=>l.concat(xr.toSides(xr.fromPoints(h))),[]);return xr.create(a)};cp.exports=k8});var fp=u((XO,up)=>{var lp=Z(),O8=Tt(),B8=(e,t)=>{let r={delta:1,corners:"edge",closed:t.isClosed,segments:16},{delta:n,corners:s,closed:o,segments:i}=Object.assign({},r,e);if(!(s==="edge"||s==="chamfer"||s==="round"))throw new Error('corners must be "edge", "chamfer", or "round"');e={delta:n,corners:s,closed:o,segments:i};let c=O8(e,lp.toPoints(t));return lp.fromPoints({closed:o},c)};up.exports=B8});var dp=u((YO,hp)=>{var N8=C(),R8=G(),V8=Z(),F8=ap(),C8=fp(),z8=(e,...t)=>{if(t=N8(t),t.length===0)throw new Error("wrong number of arguments");let r=t.map(n=>V8.isA(n)?C8(e,n):R8.isA(n)?F8(e,n):n);return r.length===1?r[0]:r};hp.exports=z8});var mp=u(($O,pp)=>{pp.exports={expand:vr(),offset:dp()}});var wr=u((LO,gp)=>{var Bt=X(),Ps=R(),I8=G(),bs=et(),G8=lr(),D8=(e,t)=>{let r={offset:[0,0,1],twistAngle:0,twistSteps:12},{offset:n,twistAngle:s,twistSteps:o}=Object.assign({},r,e);if(o<1)throw new Error("twistSteps must be 1 or more");s===0&&(o=1);let i=Ps.clone(n),c=I8.toSides(t);if(c.length===0)throw new Error("the given geometry cannot be empty");let a=bs.fromSides(c);i[2]<0&&bs.reverse(a,a);let l=Bt.create(),h=(f,d,q)=>{let g=d/o*s,p=Ps.scale(Ps.create(),i,d/o);return Bt.multiply(l,Bt.fromZRotation(l,g),Bt.fromTranslation(Bt.create(),p)),bs.transform(l,q)};return e={numberOfSlices:o+1,capStart:!0,capEnd:!0,callback:h},G8(e,a)};gp.exports=D8});var vp=u((ZO,qp)=>{var X8=C(),Y8=G(),$8=wr(),L8=(e,...t)=>{let r={height:1,twistAngle:0,twistSteps:1},{height:n,twistAngle:s,twistSteps:o}=Object.assign({},r,e);if(t=X8(t),t.length===0)throw new Error("wrong number of arguments");e={offset:[0,0,n],twistAngle:s,twistSteps:o};let i=t.map(c=>Y8.isA(c)?$8(e,c):c);return i.length===1?i[0]:i};qp.exports=L8});var wp=u((HO,xp)=>{var Z8=Z(),H8=vr(),_8=wr(),W8=(e,t)=>{let r={size:1,height:1},{size:n,height:s}=Object.assign({},r,e);if(e.delta=n,e.offset=[0,0,s],Z8.toPoints(t).length===0)throw new Error("the given geometry cannot be empty");let i=H8(e,t);return _8(e,i)};xp.exports=W8});var Pp=u((_O,yp)=>{var{area:U8}=yt(),Es=G(),j8=Z(),K8=vr(),Q8=wr(),J8=(e,t)=>{let r={size:1,height:1},{size:n,height:s}=Object.assign({},r,e);e.delta=n,e.offset=[0,0,s];let o=Es.toOutlines(t);if(o.length===0)throw new Error("the given geometry cannot be empty");let c=o.map(l=>(U8(l)<0&&l.reverse(),K8(e,j8.fromPoints({closed:!0},l)))).reduce((l,h)=>l.concat(Es.toSides(h)),[]),a=Es.create(c);return Q8(e,a)};yp.exports=J8});var Ep=u((WO,bp)=>{var e6=C(),t6=G(),r6=Z(),n6=wp(),s6=Pp(),o6=(e,...t)=>{let r={size:1,height:1},{size:n,height:s}=Object.assign({},r,e);if(t=e6(t),t.length===0)throw new Error("wrong number of arguments");if(n<=0)throw new Error("size must be positive");if(s<=0)throw new Error("height must be positive");let o=t.map(i=>r6.isA(i)?n6(e,i):t6.isA(i)?s6(e,i):i);return o.length===1?o[0]:o};bp.exports=o6});var kp=u((UO,Tp)=>{var i6=C(),Ap=Pn(),As=pe(),Mp=X(),Sp=G(),Nt=z(),yr=D(),c6=qe(),a6=vs(),l6=mr(),u6=(e,t)=>{let r=As.fromNormalAndPoint(As.create(),e.axis,e.origin);if(Number.isNaN(r[0])||Number.isNaN(r[1])||Number.isNaN(r[2])||Number.isNaN(r[3]))throw new Error("project: invalid axis or origin");let n=c6(t),s=n*n*Math.sqrt(3)/4;if(n===0)return Sp.create();let o=Nt.toPolygons(t),i=[];for(let l=0;l<o.length;l++){let h=o[l].vertices.map(q=>As.projectionOfPoint(r,q)),f=yr.create(h);if(yr.measureArea(f)<s)continue;let d=yr.plane(f);!Ap(r,d)||i.push(f)}let c=Nt.create(i);if(c=l6(c,c),!Ap(r,[0,0,1])){let l=Mp.fromVectorRotation(Mp.create(),r,[0,0,1]);c=Nt.transform(l,c)}let a=Nt.toPolygons(c).map(l=>Sp.fromPoints(yr.toPoints(l)));return c=a6(a),c},f6=(e,...t)=>{let r={axis:[0,0,1],origin:[0,0,0]},{axis:n,origin:s}=Object.assign({},r,e);if(t=i6(t),t.length===0)throw new Error("wrong number of arguments");e={axis:n,origin:s};let o=t.map(i=>Nt.isA(i)?u6(e,i):i);return o.length===1?o[0]:o};Tp.exports=f6});var Bp=u((jO,Op)=>{Op.exports={extrudeFromSlices:lr(),extrudeLinear:vp(),extrudeRectangular:Ep(),extrudeRotate:is(),project:kp(),slice:et()}});var Ms=u((KO,Np)=>{var h6=I(),d6=(e,t)=>Math.atan2(t[1]-e[1],t[0]-e[0]),p6=(e,t)=>e.angle<t.angle?-1:e.angle>t.angle?1:e.distance<t.distance?-1:e.distance>t.distance?1:0,m6=e=>{if(e.length<3)return e;let t=0;e.forEach((f,d)=>{let q=e[t];f[1]===q[1]?f[0]<q[0]&&(t=d):f[1]<q[1]&&(t=d)});let r=[],n=0,s=0;for(let f=0;f<e.length;f++)f!==t&&(n=d6(e[t],e[f]),n<0&&(n+=Math.PI),s=h6.squaredDistance(e[t],e[f]),r.push({index:f,angle:n,distance:s}));r.sort((f,d)=>p6(f,d));let o=new Array(e.length+1),i=2;for(let f=0;f<e.length;f++)f!==t&&(o[i]=r[i-2].index,i++);o[0]=o[e.length],o[1]=t;let c=(f,d,q)=>(e[d][0]-e[f][0])*(e[q][1]-e[f][1])-(e[d][1]-e[f][1])*(e[q][0]-e[f][0]),a,l=2;for(let f=3;f<=e.length;f++){for(;c(o[l-1],o[l],o[f])<Number.EPSILON;)l--;l++,a=o[f],o[f]=o[l],o[l]=a}let h=new Array(l);for(let f=0;f<l;f++)h[f]=o[f+1];return h},g6=e=>{let t=m6(e),r=[];return Array.isArray(t)&&(r=t.map(n=>e[n])),r};Np.exports=g6});var Fp=u((QO,Vp)=>{var q6=C(),v6=I(),Rp=Z(),x6=Ms(),w6=(...e)=>{e=q6(e);let t=[];e.forEach(n=>{Rp.toPoints(n).forEach(o=>{t.findIndex(c=>v6.equals(c,o))<0&&t.push(o)})});let r=x6(t);return Rp.fromPoints({closed:!0},r)};Vp.exports=w6});var zp=u((JO,Cp)=>{var y6=C(),Ss=G(),P6=Ms(),b6=(...e)=>{e=y6(e);let t=[],r=new Map;for(let s=0;s<e.length;s++){let o=Ss.toSides(e[s]);for(let i=0;i<o.length;i++){let a=o[i][0],l=`${a[0]},${a[1]}`;r.has(l)||(t.push(a),r.set(l,!0))}}r.clear();let n=P6(t);return n.length<3?Ss.create():Ss.fromPoints(n)};Cp.exports=b6});var Xp=u((eB,Dp)=>{var E6=Te(),Ip=ft(),Gp=_r(),A6=(e,t,r)=>{let n=[],s=[],o=[];Ip(n,r,t),Ip(s,e,t);let i=Gp(E6(o,s,n)),c=Gp(n);if(c===0)throw Error("a and b are the same point");return i/c},M6=(e,t,r)=>Math.sqrt(A6(e,t,r));Dp.exports=M6});var Lp=u((tB,$p)=>{var S6=Te(),T6=It(),Yp=ft(),k6=(e,t,r,n)=>{let s=[0,0,0];return Yp(e,t,r),Yp(s,r,n),S6(e,e,s),T6(e,e)};$p.exports=k6});var _p=u((rB,Hp)=>{var Zp=class{constructor(){this.head=null,this.tail=null}clear(){this.head=this.tail=null}insertBefore(t,r){r.prev=t.prev,r.next=t,r.prev?r.prev.next=r:this.head=r,t.prev=r}insertAfter(t,r){r.prev=t,r.next=t.next,r.next?r.next.prev=r:this.tail=r,t.next=r}add(t){this.head?this.tail.next=t:this.head=t,t.prev=this.tail,t.next=null,this.tail=t}addAll(t){for(this.head?this.tail.next=t:this.head=t,t.prev=this.tail;t.next;)t=t.next;this.tail=t}remove(t){t.prev?t.prev.next=t.next:this.head=t.next,t.next?t.next.prev=t.prev:this.tail=t.prev}removeChain(t,r){t.prev?t.prev.next=r.next:this.head=r.next,r.next?r.next.prev=t.prev:this.tail=t.prev}first(){return this.head}isEmpty(){return!this.head}};Hp.exports=Zp});var jp=u((nB,Up)=>{var Wp=class{constructor(t,r){this.point=t,this.index=r,this.next=null,this.prev=null,this.face=null}};Up.exports=Wp});var Jp=u((sB,Qp)=>{var O6=Dr(),B6=Hr(),Kp=class{constructor(t,r){this.vertex=t,this.face=r,this.next=null,this.prev=null,this.opposite=null}head(){return this.vertex}tail(){return this.prev?this.prev.vertex:null}length(){return this.tail()?O6(this.tail().point,this.head().point):-1}lengthSquared(){return this.tail()?B6(this.tail().point,this.head().point):-1}setOpposite(t){this.opposite=t,t.opposite=this}};Qp.exports=Kp});var rm=u((oB,tm)=>{var Ts=Ir(),N6=Gr(),R6=Te(),ks=Ye(),V6=Yr(),F6=It(),Pr=Zr(),Os=ft(),Bs=Jp(),em=0,C6=1,Ns=2,br=class{constructor(){this.normal=[],this.centroid=[],this.offset=0,this.outside=null,this.mark=em,this.edge=null,this.nVertices=0}getEdge(t){if(typeof t!="number")throw Error("requires a number");let r=this.edge;for(;t>0;)r=r.next,t-=1;for(;t<0;)r=r.prev,t+=1;return r}computeNormal(){let t=this.edge,r=t.next,n=r.next,s=Os([],r.head().point,t.head().point),o=[],i=[];for(this.nVertices=2,this.normal=[0,0,0];n!==t;)N6(i,s),Os(s,n.head().point,t.head().point),Ts(this.normal,this.normal,R6(o,i,s)),n=n.next,this.nVertices+=1;this.area=V6(this.normal),this.normal=Pr(this.normal,this.normal,1/this.area)}computeNormalMinArea(t){if(this.computeNormal(),this.area<t){let r,n=0,s=this.edge;do{let h=s.lengthSquared();h>n&&(r=s,n=h),s=s.next}while(s!==this.edge);let o=r.tail().point,i=r.head().point,c=Os([],i,o),a=Math.sqrt(n);Pr(c,c,1/a);let l=ks(this.normal,c);Pr(c,c,-l),Ts(this.normal,this.normal,c),F6(this.normal,this.normal)}}computeCentroid(){this.centroid=[0,0,0];let t=this.edge;do Ts(this.centroid,this.centroid,t.head().point),t=t.next;while(t!==this.edge);Pr(this.centroid,this.centroid,1/this.nVertices)}computeNormalAndCentroid(t){typeof t!="undefined"?this.computeNormalMinArea(t):this.computeNormal(),this.computeCentroid(),this.offset=ks(this.normal,this.centroid)}distanceToPlane(t){return ks(this.normal,t)-this.offset}connectHalfEdges(t,r){let n;if(t.opposite.face===r.opposite.face){let s=r.opposite.face,o;t===this.edge&&(this.edge=r),s.nVertices===3?(o=r.opposite.prev.opposite,s.mark=Ns,n=s):(o=r.opposite.next,s.edge===o.prev&&(s.edge=o),o.prev=o.prev.prev,o.prev.next=o),r.prev=t.prev,r.prev.next=r,r.setOpposite(o),s.computeNormalAndCentroid()}else t.next=r,r.prev=t;return n}mergeAdjacentFaces(t,r){let n=t.opposite,s=n.face;r.push(s),s.mark=Ns;let o=t.prev,i=t.next,c=n.prev,a=n.next;for(;o.opposite.face===s;)o=o.prev,a=a.next;for(;i.opposite.face===s;)i=i.next,c=c.prev;let l;for(l=a;l!==c.next;l=l.next)l.face=this;this.edge=i;let h;return h=this.connectHalfEdges(c,i),h&&r.push(h),h=this.connectHalfEdges(o,a),h&&r.push(h),this.computeNormalAndCentroid(),r}collectIndices(){let t=[],r=this.edge;do t.push(r.head().index),r=r.next;while(r!==this.edge);return t}static createTriangle(t,r,n,s=0){let o=new br,i=new Bs(t,o),c=new Bs(r,o),a=new Bs(n,o);return i.next=a.prev=c,c.next=i.prev=a,a.next=c.prev=i,o.edge=i,o.computeNormalAndCentroid(s),o}};tm.exports={VISIBLE:em,NON_CONVEX:C6,DELETED:Ns,Face:br}});var am=u((iB,cm)=>{var Rs=Ye(),z6=Xp(),I6=Lp(),nm=_p(),G6=jp(),{Face:ye,VISIBLE:ct,NON_CONVEX:sm,DELETED:D6}=rm(),X6=1,om=2,im=class{constructor(t){if(!Array.isArray(t))throw TypeError("input is not a valid array");if(t.length<4)throw Error("cannot build a simplex out of <4 points");this.tolerance=-1,this.nFaces=0,this.nPoints=t.length,this.faces=[],this.newFaces=[],this.claimed=new nm,this.unclaimed=new nm,this.vertices=[];for(let r=0;r<t.length;r+=1)this.vertices.push(new G6(t[r],r));this.discardedFaces=[],this.vertexPointIndices=[]}addVertexToFace(t,r){t.face=r,r.outside?this.claimed.insertBefore(r.outside,t):this.claimed.add(t),r.outside=t}removeVertexFromFace(t,r){t===r.outside&&(t.next&&t.next.face===r?r.outside=t.next:r.outside=null),this.claimed.remove(t)}removeAllVerticesFromFace(t){if(t.outside){let r=t.outside;for(;r.next&&r.next.face===t;)r=r.next;return this.claimed.removeChain(t.outside,r),r.next=null,t.outside}}deleteFaceVertices(t,r){let n=this.removeAllVerticesFromFace(t);if(n)if(!r)this.unclaimed.addAll(n);else{let s;for(let o=n;o;o=s)s=o.next,r.distanceToPlane(o.point)>this.tolerance?this.addVertexToFace(o,r):this.unclaimed.add(o)}}resolveUnclaimedPoints(t){let r=this.unclaimed.first();for(let n=r;n;n=r){r=n.next;let s=this.tolerance,o;for(let i=0;i<t.length;i+=1){let c=t[i];if(c.mark===ct){let a=c.distanceToPlane(n.point);if(a>s&&(s=a,o=c),s>1e3*this.tolerance)break}}o&&this.addVertexToFace(n,o)}}computeExtremes(){let t=[],r=[],n=[],s=[],o,i;for(o=0;o<3;o+=1)n[o]=s[o]=this.vertices[0];for(o=0;o<3;o+=1)t[o]=r[o]=this.vertices[0].point[o];for(o=1;o<this.vertices.length;o+=1){let c=this.vertices[o],a=c.point;for(i=0;i<3;i+=1)a[i]<t[i]&&(t[i]=a[i],n[i]=c);for(i=0;i<3;i+=1)a[i]>r[i]&&(r[i]=a[i],s[i]=c)}return this.tolerance=3*Number.EPSILON*(Math.max(Math.abs(t[0]),Math.abs(r[0]))+Math.max(Math.abs(t[1]),Math.abs(r[1]))+Math.max(Math.abs(t[2]),Math.abs(r[2]))),[n,s]}createInitialSimplex(){let t=this.vertices,[r,n]=this.computeExtremes(),s,o,i,c,a=0,l=0;for(i=0;i<3;i+=1){let p=n[i].point[i]-r[i].point[i];p>a&&(a=p,l=i)}let h=r[l],f=n[l];for(a=0,i=0;i<this.vertices.length;i+=1){let p=this.vertices[i];if(p!==h&&p!==f){let m=z6(p.point,h.point,f.point);m>a&&(a=m,s=p)}}let d=I6([],h.point,f.point,s.point),q=Rs(h.point,d);for(a=-1,i=0;i<this.vertices.length;i+=1){let p=this.vertices[i];if(p!==h&&p!==f&&p!==s){let m=Math.abs(Rs(d,p.point)-q);m>a&&(a=m,o=p)}}let g=[];if(Rs(o.point,d)-q<0)for(g.push(ye.createTriangle(h,f,s),ye.createTriangle(o,f,h),ye.createTriangle(o,s,f),ye.createTriangle(o,h,s)),i=0;i<3;i+=1){let p=(i+1)%3;g[i+1].getEdge(2).setOpposite(g[0].getEdge(p)),g[i+1].getEdge(1).setOpposite(g[p+1].getEdge(0))}else for(g.push(ye.createTriangle(h,s,f),ye.createTriangle(o,h,f),ye.createTriangle(o,f,s),ye.createTriangle(o,s,h)),i=0;i<3;i+=1){let p=(i+1)%3;g[i+1].getEdge(2).setOpposite(g[0].getEdge((3-i)%3)),g[i+1].getEdge(0).setOpposite(g[p+1].getEdge(1))}for(i=0;i<4;i+=1)this.faces.push(g[i]);for(i=0;i<t.length;i+=1){let p=t[i];if(p!==h&&p!==f&&p!==s&&p!==o){a=this.tolerance;let m;for(c=0;c<4;c+=1){let v=g[c].distanceToPlane(p.point);v>a&&(a=v,m=g[c])}m&&this.addVertexToFace(p,m)}}}reindexFaceAndVertices(){let t=[];for(let r=0;r<this.faces.length;r+=1){let n=this.faces[r];n.mark===ct&&t.push(n)}this.faces=t}collectFaces(t){let r=[];for(let n=0;n<this.faces.length;n+=1){if(this.faces[n].mark!==ct)throw Error("attempt to include a destroyed face in the hull");let s=this.faces[n].collectIndices();if(t)r.push(s);else for(let o=0;o<s.length-2;o+=1)r.push([s[0],s[o+1],s[o+2]])}return r}nextVertexToAdd(){if(!this.claimed.isEmpty()){let t,r,n=0,s=this.claimed.first().face;for(r=s.outside;r&&r.face===s;r=r.next){let o=s.distanceToPlane(r.point);o>n&&(n=o,t=r)}return t}}computeHorizon(t,r,n,s){this.deleteFaceVertices(n),n.mark=D6;let o;r?o=r.next:o=r=n.getEdge(0);do{let i=o.opposite,c=i.face;c.mark===ct&&(c.distanceToPlane(t)>this.tolerance?this.computeHorizon(t,i,c,s):s.push(o)),o=o.next}while(o!==r)}addAdjoiningFace(t,r){let n=ye.createTriangle(t,r.tail(),r.head());return this.faces.push(n),n.getEdge(-1).setOpposite(r.opposite),n.getEdge(0)}addNewFaces(t,r){this.newFaces=[];let n,s;for(let o=0;o<r.length;o+=1){let i=r[o],c=this.addAdjoiningFace(t,i);n?c.next.setOpposite(s):n=c,this.newFaces.push(c.face),s=c}n.next.setOpposite(s)}oppositeFaceDistance(t){return t.face.distanceToPlane(t.opposite.face.centroid)}doAdjacentMerge(t,r){let n=t.edge,s=!0,o=0;do{if(o>=t.nVertices)throw Error("merge recursion limit exceeded");let i=n.opposite.face,c=!1;if(r===om?(this.oppositeFaceDistance(n)>-this.tolerance||this.oppositeFaceDistance(n.opposite)>-this.tolerance)&&(c=!0):t.area>i.area?this.oppositeFaceDistance(n)>-this.tolerance?c=!0:this.oppositeFaceDistance(n.opposite)>-this.tolerance&&(s=!1):this.oppositeFaceDistance(n.opposite)>-this.tolerance?c=!0:this.oppositeFaceDistance(n)>-this.tolerance&&(s=!1),c){let a=t.mergeAdjacentFaces(n,[]);for(let l=0;l<a.length;l+=1)this.deleteFaceVertices(a[l],t);return!0}n=n.next,o+=1}while(n!==t.edge);return s||(t.mark=sm),!1}addVertexToHull(t){let r=[];this.unclaimed.clear(),this.removeVertexFromFace(t,t.face),this.computeHorizon(t.point,null,t.face,r),this.addNewFaces(t,r);for(let n=0;n<this.newFaces.length;n+=1){let s=this.newFaces[n];if(s.mark===ct)for(;this.doAdjacentMerge(s,X6););}for(let n=0;n<this.newFaces.length;n+=1){let s=this.newFaces[n];if(s.mark===sm)for(s.mark=ct;this.doAdjacentMerge(s,om););}this.resolveUnclaimedPoints(this.newFaces)}build(){let t;for(this.createInitialSimplex();t=this.nextVertexToAdd();)this.addVertexToHull(t);this.reindexFaceAndVertices()}};cm.exports=im});var um=u((cB,lm)=>{var Y6=am(),$6=(e,t={})=>{let r=new Y6(e);return r.build(),r.collectFaces(t.skipTriangulation)};lm.exports=$6});var dm=u((aB,hm)=>{var L6=C(),fm=z(),Z6=D(),H6=um(),_6=(...e)=>{if(e=L6(e),e.length===1)return e[0];let t=[],r=new Map;for(let o=0;o<e.length;++o){let i=fm.toPolygons(e[o]);for(let c=0;c<i.length;++c){let a=i[c].vertices;for(let l=0;l<a.length;++l){let h=`${a[l]}`;r.has(h)||(t.push(a[l]),r.set(h,!0))}}}r.clear();let s=H6(t,{skipTriangulation:!0}).map(o=>{let i=o.map(c=>t[c]);return Z6.create(i)});return fm.create(s)};hm.exports=_6});var Vs=u((lB,pm)=>{var W6=C(),U6=nt(),j6=G(),K6=z(),Q6=Z(),J6=Fp(),eA=zp(),tA=dm(),rA=(...e)=>{if(e=W6(e),e.length===0)throw new Error("wrong number of arguments");if(!U6(e))throw new Error("only hulls of the same type are supported");let t=e[0];return Q6.isA(t)?J6(e):j6.isA(t)?eA(e):K6.isA(t)?tA(e):t};pm.exports=rA});var gm=u((uB,mm)=>{var nA=C(),sA=gr(),oA=Vs(),iA=(...e)=>{if(e=nA(e),e.length<2)throw new Error("wrong number of arguments");let t=[];for(let r=1;r<e.length;r++)t.push(oA(e[r-1],e[r]));return sA(t)};mm.exports=iA});var vm=u((fB,qm)=>{qm.exports={hull:Vs(),hullChain:gm()}});var Cs=u((hB,wm)=>{var Fs=R(),xm=D(),cA=(e,t)=>{let r=xm.measureArea(t);return Number.isFinite(r)&&r>e},aA=(e,t)=>{let r=t.map(s=>{let o=s.vertices.map(a=>Fs.snap(Fs.create(),a,e)),i=[];for(let a=0;a<o.length;a++){let l=(a+1)%o.length;Fs.equals(o[a],o[l])||i.push(o[a])}let c=xm.create(i);return s.color&&(c.color=s.color),c}),n=e*e*Math.sqrt(3)/4;return r=r.filter(s=>cA(n,s)),r};wm.exports=aA});var bm=u((dB,Pm)=>{var at=R(),Er=D(),lA=e=>{let t=Er.toPoints(e),r=[];for(let n=0;n<t.length;n++){let s=(n+1)%t.length,o={v1:t[n],v2:t[s]};r.push(o)}for(let n=0;n<r.length;n++){let s=(n+1)%t.length;r[n].next=r[s],r[s].prev=r[n]}return r},uA=(e,t)=>{let r=`${t.v1}:${t.v2}`;e.set(r,t)},zs=(e,t)=>{let r=`${t.v1}:${t.v2}`;e.delete(r)},fA=(e,t)=>{let r=`${t.v2}:${t.v1}`;return e.get(r)},hA=(e,t,r)=>{let n=e.prev.v1,s=e.prev.v2,o=t.next.v2,i=ym(n,s,o,r);n=t.prev.v1,s=t.prev.v2,o=e.next.v2;let c=ym(n,s,o,r);return[i,c]},ym=(e,t,r,n)=>{let s=at.subtract(at.create(),t,e),o=at.subtract(at.create(),r,t);return at.cross(s,s,o),at.dot(s,n)},dA=e=>{let t,r=[];for(;e.next;){let n=e.next;r.push(e.v1),e.v1=null,e.v2=null,e.next=null,e.prev=null,e=n}return r.length>0&&(t=Er.fromPoints(r)),t},pA=(e,t)=>{if(t.length<2)return t;let r=t[0].plane,n=t.slice(),s=new Map;for(;n.length>0;){let i=n.shift(),c=lA(i);for(let a=0;a<c.length;a++){let l=c[a],h=fA(s,l);if(h){let f=hA(l,h,r);if(f[0]>=0&&f[1]>=0){let d=h.next,q=l.next;l.prev.next=h.next,l.next.prev=h.prev,h.prev.next=l.next,h.next.prev=l.prev,l.v1=null,l.v2=null,l.next=null,l.prev=null,zs(s,h),h.v1=null,h.v2=null,h.next=null,h.prev=null;let g=(p,m,v)=>{let x={v1:v.v1,v2:m.v2,next:m.next,prev:v.prev};v.prev.next=x,m.next.prev=x,zs(p,m),m.v1=null,m.v2=null,m.next=null,m.prev=null,zs(p,v),v.v1=null,v.v2=null,v.next=null,v.prev=null};f[0]===0&&g(s,d,d.prev),f[1]===0&&g(s,q,q.prev)}}else l.next&&uA(s,l)}}let o=[];return s.forEach(i=>{let c=dA(i);c&&o.push(c)}),o},Is=1e-13,mA=(e,t)=>Math.abs(e[0]-t[0])<=Is&&Math.abs(e[1]-t[1])<=Is&&Math.abs(e[2]-t[2])<=Is,gA=(e,t)=>Math.abs(e[3]-t[3])<15e-8?mA(e,t):!1,qA=(e,t)=>{let r=[];t.forEach(s=>{let o=r.find(i=>gA(i[0],Er.plane(s)));o?o[1].push(s):r.push([Er.plane(s),[s]])});let n=[];return r.forEach(s=>{let o=s[1],i=pA(e,o);n=n.concat(i)}),n};Pm.exports=qA});var Sm=u((pB,Mm)=>{var Em=W(),he=R(),vA=D(),Se=!1,re=e=>`${e}`,Am=(e,t,r,n,s,o)=>{let i=re(n),c=re(s);if(Se&&i===c)throw new Error("assert failed");let a=`${i}/${c}`,l=`${c}/${i}`;if(e.has(l))return Ar(e,t,r,s,n,null),null;let h={vertex0:n,vertex1:s,polygonindex:o};return e.has(a)?e.get(a).push(h):e.set(a,[h]),i in t?t[i].push(a):t[i]=[a],c in r?r[c].push(a):r[c]=[a],a},Ar=(e,t,r,n,s,o)=>{let i=re(n),c=re(s),a=`${i}/${c}`;if(Se&&!e.has(a))throw new Error("assert failed");let l=-1,h=e.get(a);for(let f=0;f<h.length;f++){let d=h[f],q=re(d.vertex0);if(q===i&&(q=re(d.vertex1),q===c&&!(o!==null&&d.polygonindex!==o))){l=f;break}}if(Se&&l<0)throw new Error("assert failed");if(h.splice(l,1),h.length===0&&e.delete(a),l=t[i].indexOf(a),Se&&l<0)throw new Error("assert failed");if(t[i].splice(l,1),t[i].length===0&&delete t[i],l=r[c].indexOf(a),Se&&l<0)throw new Error("assert failed");r[c].splice(l,1),r[c].length===0&&delete r[c]},xA=e=>{let t=new Map;for(let r=0;r<e.length;r++){let n=e[r],s=n.vertices.length;if(s>=3){let o=n.vertices[0],i=re(o);for(let c=0;c<s;c++){let a=c+1;a===s&&(a=0);let l=n.vertices[a],h=re(l),f=`${i}/${h}`,d=`${h}/${i}`;if(t.has(d)){let q=t.get(d);q.splice(-1,1),q.length===0&&t.delete(d)}else{let q={vertex0:o,vertex1:l,polygonindex:r};t.has(f)?t.get(f).push(q):t.set(f,[q])}o=l,i=h}}else console.warn("warning: invalid polygon found during insertTjunctions")}if(t.size>0){let r={},n={},s={};for(let[i,c]of t)s[i]=!0,c.forEach(a=>{let l=re(a.vertex0),h=re(a.vertex1);l in r?r[l].push(i):r[l]=[i],h in n?n[h].push(i):n[h]=[i]});let o=e.slice(0);for(;t.size!==0;){for(let c of t.keys())s[c]=!0;let i=!1;for(;;){let c=Object.keys(s);if(c.length===0)break;let a=c[0],l=!0;if(t.has(a)){let h=t.get(a);if(Se&&h.length===0)throw new Error("assert failed");let f=h[0];for(let d=0;d<2;d++){let q=d===0?f.vertex0:f.vertex1,g=d===0?f.vertex1:f.vertex0,p=re(q),m=re(g),v=[];d===0?p in n&&(v=n[p]):p in r&&(v=r[p]);for(let x=0;x<v.length;x++){let y=v[x],b=t.get(y)[0],w=d===0?b.vertex0:b.vertex1,E=d===0?b.vertex1:b.vertex0,P=re(w),k=re(E);if(Se&&k!==p)throw new Error("assert failed");if(P===m){Ar(t,r,n,q,g,null),Ar(t,r,n,g,q,null),l=!1,d=2,i=!0;break}else{let A=q,M=g,S=w,T=he.subtract(he.create(),S,A),F=he.dot(he.subtract(he.create(),M,A),T)/he.dot(T,T);if(F>0&&F<1){let N=he.scale(he.create(),T,F);if(he.add(N,N,A),he.squaredDistance(N,M)<Em.EPS*Em.EPS){let B=b.polygonindex,J=o[B],ne=re(b.vertex1),ae=-1;for(let Ct=0;Ct<J.vertices.length;Ct++)if(re(J.vertices[Ct])===ne){ae=Ct;break}if(Se&&ae<0)throw new Error("assert failed");let lt=J.vertices.slice(0);lt.splice(ae,0,g);let Ft=vA.fromPoints(lt);o[B]=Ft,Ar(t,r,n,b.vertex0,b.vertex1,B);let Xe=Am(t,r,n,b.vertex0,g,B),Ws=Am(t,r,n,g,b.vertex1,B);Xe!==null&&(s[Xe]=!0),Ws!==null&&(s[Ws]=!0),l=!1,d=2,i=!0;break}}}}}}l&&delete s[a]}if(!i)break}e=o}return t.clear(),e};Mm.exports=xA});var km=u((mB,Tm)=>{var Gs=R(),Ds=D(),wA=(e,t,r)=>{let n=t.vertices.length;if(n>3){if(n>4){let i=[0,0,0];t.vertices.forEach(c=>Gs.add(i,i,c)),Gs.snap(i,Gs.divide(i,i,[n,n,n]),e);for(let c=0;c<n;c++){let a=Ds.fromPoints([i,t.vertices[c],t.vertices[(c+1)%n]]);t.color&&(a.color=t.color),r.push(a)}return}let s=Ds.fromPoints([t.vertices[0],t.vertices[1],t.vertices[2]]),o=Ds.fromPoints([t.vertices[0],t.vertices[2],t.vertices[3]]);t.color&&(s.color=t.color,o.color=t.color),r.push(s,o);return}r.push(t)},yA=(e,t)=>{let r=[];return t.forEach(n=>{wA(e,n,r)}),r};Tm.exports=yA});var Fm=u((gB,Vm)=>{var te=R(),Xs=On(),Om=D(),Bm=(e,t,r)=>{let n=e.findIndex(s=>!!(s&&(te.equals(s[0],t[0])&&te.equals(s[1],t[1])||te.equals(s[0],t[1])&&te.equals(s[1],t[0]))));n>=0?(t=e[n],t.polygons.push(r)):(t.polygons=[r],e.push(t))},Nm=(e,t)=>{let r=e.findIndex(n=>!!(n&&(te.equals(n[0],t[0])&&te.equals(n[1],t[1])||te.equals(n[0],t[1])&&te.equals(n[1],t[0]))));r>=0&&(e[r].polygons=[],e[r]=null)},Rm=(e,t)=>{let r=t.vertices,n=r.length,s=[r[n-1],r[0]];Bm(e,s,t);for(let o=0;o<n-1;o++)s=[r[o],r[o+1]],Bm(e,s,t)},PA=(e,t)=>{t.polygons.forEach(n=>{let s=n.vertices,o=s.length,i=[s[o-1],s[0]];Nm(e,i);for(let c=0;c<o-1;c++)i=[s[c],s[c+1]],Nm(e,i)})},bA=(e,t,r)=>{let n=t.vertices,s=n.findIndex(c=>Ys(r,c,e[0])),o=Om.fromPoints([n[(s+0)%3],n[(s+1)%3],e[1]]),i=Om.fromPoints([e[1],n[(s+1)%3],n[(s+2)%3]]);return t.color&&(o.color=t.color,i.color=t.color),[o,i]},Ys=(e,t,r)=>Math.abs(t[0]-r[0])<=e&&Math.abs(t[1]-r[1])<=e&&Math.abs(t[2]-r[2])<=e,EA=(e,t,r)=>{if(e.distance<t.distance&&te.equals(e[0],t[1])){let n=te.squaredDistance(e[0],t[0]),s=te.squaredDistance(e[1],t[0]),o=te.squaredDistance(e[0],t[1]),i=te.squaredDistance(e[1],t[1]);if(n<=t.distance&&s<t.distance&&o<t.distance&&i<t.distance){let c=Xs.fromPoints(t[0],t[1]),a=te.snap(te.create(),r,Xs.closestPoint(e[0],c)),l=te.snap(te.create(),r,Xs.closestPoint(e[1],c));if(Ys(r,a,e[0])&&Ys(r,l,e[1]))return!0}}return!1},AA=(e,t,r)=>{for(let n=0;n<e.length;n++){let s=e[n];if(s&&EA(s,t,r)){let o=t.polygons[0];return bA(s,o,r)}}return null},MA=e=>{let t=[];return e.forEach((r,n)=>{r.polygons.length===1&&(r.distance=te.squaredDistance(r[0],r[1]),t.push(r))}),t},SA=e=>{let t=[];return e.forEach(r=>{r&&r.polygons&&r.polygons.forEach(n=>{n.visited||(n.visited=!0,t.push(n))})}),t},TA=e=>{let t=[];return e.forEach(r=>{Rm(t,r)}),t};Vm.exports={polygonsToEdges:TA,edgesToPolygons:SA,cullOpenEdges:MA,splitEdge:AA,removePolygons:PA,addPolygon:Rm}});var zm=u((qB,Cm)=>{var{polygonsToEdges:kA,edgesToPolygons:OA,cullOpenEdges:BA,splitEdge:NA,removePolygons:RA,addPolygon:Mr}=Fm(),VA=(e,t)=>{let r=kA(t),n=BA(r);if(n.length===0)return t;let s=!0;for(;s;){let o=0;for(let i=0;i<n.length;i++){let c=n[i];if(c&&c.polygons&&c.polygons.length===1){let a=NA(n,c,e);if(a){n[i]=null,Mr(n,a[0]),Mr(n,a[1]),RA(r,c),Mr(r,a[0]),Mr(r,a[1]),o++;break}}}s=o>0}return n=n.filter(o=>o&&o.polygons&&o.polygons.length===1),n.length>0&&console.warn("Repair of all T-junctions failed:",n.length),t=OA(r),t};Cm.exports=VA});var Dm=u((vB,Gm)=>{var FA=C(),CA=qe(),zA=G(),Im=z(),IA=Z(),GA=Cs(),DA=bm(),XA=Sm(),YA=km(),$A=zm(),LA=(e,t)=>t,ZA=(e,t)=>t,HA=(e,t)=>{let r={snap:!1,simplify:!1,triangulate:!1,repair:!1},{snap:n,simplify:s,triangulate:o,repair:i}=Object.assign({},r,e),c=CA(t),a=Im.toPolygons(t);n&&(a=GA(c,a)),s&&(a=DA(c,a)),o&&(a=XA(a),a=YA(c,a)),i&&(a=$A(c,a));let l=Object.assign({},t);return l.polygons=a,l},_A=(e,...t)=>{if(t=FA(t),t.length===0)throw new Error("wrong number of arguments");let r=t.map((n,s)=>{if(IA.isA(n))return LA(e,n);if(zA.isA(n))return ZA(e,n);if(Im.isA(n))return HA(e,n);throw new Error("invalid geometry")});return r.length===1?r[0]:r};Gm.exports=_A});var Ym=u((xB,Xm)=>{var WA=C(),De=I(),$s=G(),Ls=z(),Zs=Z(),Hs=qe(),UA=Cs(),jA=e=>{let t=Hs(e),n=Zs.toPoints(e).map(s=>De.snap(De.create(),s,t));return Zs.create(n)},KA=e=>{let t=Hs(e),n=$s.toSides(e).map(s=>[De.snap(De.create(),s[0],t),De.snap(De.create(),s[1],t)]);return n=n.filter(s=>!De.equals(s[0],s[1])),$s.create(n)},QA=e=>{let t=Hs(e),r=Ls.toPolygons(e),n=UA(t,r);return Ls.create(n)},JA=(...e)=>{if(e=WA(e),e.length===0)throw new Error("wrong number of arguments");let t=e.map(r=>Zs.isA(r)?jA(r):$s.isA(r)?KA(r):Ls.isA(r)?QA(r):r);return t.length===1?t[0]:t};Xm.exports=JA});var Lm=u((wB,$m)=>{$m.exports={generalize:Dm(),snap:Ym()}});var Hm=u((yB,Zm)=>{var e7=(e,t,r)=>{for(e=e.slice();e.length<r;)e.push(t);return e};Zm.exports=e7});var Km=u((PB,jm)=>{var t7=C(),_m=Hm(),Wm=Ut(),{translate:r7}=Ee(),n7=e=>{if(!Array.isArray(e.modes)||e.modes.length>3)throw new Error("align(): modes must be an array of length <= 3");if(e.modes=_m(e.modes,"none",3),e.modes.filter(t=>["center","max","min","none"].includes(t)).length!==3)throw new Error('align(): all modes must be one of "center", "max" or "min"');if(!Array.isArray(e.relativeTo)||e.relativeTo.length>3)throw new Error("align(): relativeTo must be an array of length <= 3");if(e.relativeTo=_m(e.relativeTo,0,3),e.relativeTo.filter(t=>Number.isFinite(t)||t==null).length!==3)throw new Error("align(): all relativeTo values must be a number, or null.");if(typeof e.grouped!="boolean")throw new Error("align(): grouped must be a boolean value.");return e},s7=(e,t,r)=>{for(let n=0;n<3;n++)e[n]==null&&(t[n]==="center"?e[n]=(r[0][n]+r[1][n])/2:t[n]==="max"?e[n]=r[1][n]:t[n]==="min"&&(e[n]=r[0][n]));return e},Um=(e,t,r)=>{let n=Wm(e),s=[0,0,0];for(let o=0;o<3;o++)t[o]==="center"?s[o]=r[o]-(n[0][o]+n[1][o])/2:t[o]==="max"?s[o]=r[o]-n[1][o]:t[o]==="min"&&(s[o]=r[o]-n[0][o]);return r7(s,e)},o7=(e,...t)=>{e=Object.assign({},{modes:["center","center","min"],relativeTo:[0,0,0],grouped:!1},e),e=n7(e);let{modes:n,relativeTo:s,grouped:o}=e;if(t=t7(t),t.length===0)throw new Error("align(): No geometries were provided to act upon");if(s.filter(i=>i==null).length){let i=Wm(t);s=s7(s,n,i)}return o?t=Um(t,n,s):t=t.map(i=>Um(i,n,s)),t.length===1?t[0]:t};jm.exports=o7});var Rt=u((bB,Qm)=>{var i7=C(),c7=G(),a7=z(),l7=Z(),u7=Ce(),{translate:f7}=Ee(),_s=(e,t)=>{let r={axes:[!0,!0,!0],relativeTo:[0,0,0]},{axes:n,relativeTo:s}=Object.assign({},r,e),o=u7(t),i=[0,0,0];return n[0]&&(i[0]=s[0]-(o[0][0]+(o[1][0]-o[0][0])/2)),n[1]&&(i[1]=s[1]-(o[0][1]+(o[1][1]-o[0][1])/2)),n[2]&&(i[2]=s[2]-(o[0][2]+(o[1][2]-o[0][2])/2)),f7(i,t)},Sr=(e,...t)=>{let r={axes:[!0,!0,!0],relativeTo:[0,0,0]},{axes:n,relativeTo:s}=Object.assign({},r,e);if(t=i7(t),t.length===0)throw new Error("wrong number of arguments");if(s.length!==3)throw new Error("relativeTo must be an array of length 3");e={axes:n,relativeTo:s};let o=t.map(i=>l7.isA(i)||c7.isA(i)||a7.isA(i)?_s(e,i):i);return o.length===1?o[0]:o},h7=(...e)=>Sr({axes:[!0,!1,!1]},e),d7=(...e)=>Sr({axes:[!1,!0,!1]},e),p7=(...e)=>Sr({axes:[!1,!1,!0]},e);Qm.exports={center:Sr,centerX:h7,centerY:d7,centerZ:p7}});var Vt=u((EB,ng)=>{var m7=C(),Jm=X(),eg=G(),tg=z(),rg=Z(),Tr=(e,...t)=>{if(!Array.isArray(e))throw new Error("factors must be an array");if(t=m7(t),t.length===0)throw new Error("wrong number of arguments");for(e=e.slice();e.length<3;)e.push(1);if(e[0]<=0||e[1]<=0||e[2]<=0)throw new Error("factors must be positive");let r=Jm.fromScaling(Jm.create(),e),n=t.map(s=>rg.isA(s)?rg.transform(r,s):eg.isA(s)?eg.transform(r,s):tg.isA(s)?tg.transform(r,s):s);return n.length===1?n[0]:n},g7=(e,...t)=>Tr([e,1,1],t),q7=(e,...t)=>Tr([1,e,1],t),v7=(e,...t)=>Tr([1,1,e],t);ng.exports={scale:Tr,scaleX:g7,scaleY:q7,scaleZ:v7}});var ag=u((AB,cg)=>{var x7=C(),sg=G(),og=z(),ig=Z(),w7=(e,...t)=>{if(t=x7(t),t.length===0)throw new Error("wrong number of arguments");let r=t.map(n=>ig.isA(n)?ig.transform(e,n):sg.isA(n)?sg.transform(e,n):og.isA(n)?og.transform(e,n):n);return r.length===1?r[0]:r};cg.exports=w7});var ug=u((MB,lg)=>{lg.exports={align:Km(),center:Rt().center,centerX:Rt().centerX,centerY:Rt().centerY,centerZ:Rt().centerZ,mirror:je().mirror,mirrorX:je().mirrorX,mirrorY:je().mirrorY,mirrorZ:je().mirrorZ,rotate:rt().rotate,rotateX:rt().rotateX,rotateY:rt().rotateY,rotateZ:rt().rotateZ,scale:Vt().scale,scaleX:Vt().scaleX,scaleY:Vt().scaleY,scaleZ:Vt().scaleZ,transform:ag(),translate:Ee().translate,translateX:Ee().translateX,translateY:Ee().translateY,translateZ:Ee().translateZ}});var y7=u((SB,fg)=>{fg.exports={colors:qo(),curves:Oo(),geometries:Yt(),maths:j0(),measurements:bf(),primitives:D2(),text:U2(),utils:hs(),booleans:$d(),expansions:mp(),extrusions:Bp(),hulls:vm(),modifiers:Lm(),transforms:ug()}});return y7();})();
